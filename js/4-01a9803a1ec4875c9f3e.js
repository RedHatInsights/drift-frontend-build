(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{729:function(e,t,a){var n=a(730),r=a(732),l=a(438),s=a(210),i=a(439),c=a(733),o=a(734),u=a(735),d=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(i(e)&&(s(e)||"string"==typeof e||"function"==typeof e.splice||c(e)||u(e)||l(e)))return!e.length;var t=r(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(o(e))return!n(e).length;for(var a in e)if(d.call(e,a))return!1;return!0}},730:function(e,t,a){var n=a(731)(Object.keys,Object);e.exports=n},731:function(e,t){e.exports=function(e,t){return function(a){return e(t(a))}}},732:function(e,t){var a=Object.prototype.toString;e.exports=function(e){return a.call(e)}},733:function(e,t){e.exports=function(){return!1}},734:function(e,t){e.exports=function(){return!1}},735:function(e,t){e.exports=function(){return!1}},856:function(e,t,a){"use strict";a.r(t),a.d(t,"BaselinesPage",(function(){return ae}));var n=a(9),r=a.n(n),l=a(19),s=a.n(l),i=a(28),c=a.n(i),o=a(29),u=a.n(o),d=a(30),p=a.n(d),b=a(31),m=a.n(b),h=a(18),f=a.n(h),y=a(0),B=a.n(y),S=a(4),k=a.n(S),C=a(32),v=a(20),E=a(134),g=a(747),T=a(746),x=a(757),M=a(661),O=a(662),D=a(767),I=a(404),P=a(736),N=a(777),R=a(45),w=a.n(R),j=a(729),H=a.n(j),F=a(752),K=a(753),A=a(749),X=a(25),_=a(660),q=a(96),z=a(380),J=a(780),L=a(739),Y=a(784),U=a(201);function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=f()(e);if(t){var r=f()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return m()(this,a)}}var Q=function(e){p()(n,e);var t,a=G(n);function n(e){var t;return c()(this,n),(t=a.call(this,e)).onSelect=function(e,a){(0,t.props.selectBaseline)([a.currentTarget.id],a.currentTarget.checked,"RADIO")},t.cancelModal=function(){var e=t.props,a=e.toggleCreateBaselineModal,n=e.clearSelectedBaselines;t.updateBaselineName(""),n("RADIO"),a()},t.checkKeyPress=function(e){"Enter"===e.key&&(e.preventDefault(),t.state.baselineName&&t.submitBaselineName())},t.renderModalBody=function(){var e,a=t.state,n=a.baselineName,r=a.copyBaselineChecked,l=a.copySystemChecked,s=t.props.createBaselineError;return r?e=t.renderCopyBaseline():l&&(e=t.renderCopySystem()),B.a.createElement(B.a.Fragment,null,t.renderRadioButtons(),B.a.createElement("br",null),B.a.createElement(F.a,null,B.a.createElement(K.a,{label:"Baseline name",isRequired:!0,type:"text",helperTextInvalid:s.hasOwnProperty("detail")?s.detail:null,fieldId:"name",validated:s.hasOwnProperty("status")?"error":null,onKeyPress:t.checkKeyPress},B.a.createElement(A.a,{className:"fact-value",placeholder:"Baseline name",value:n,type:"text",onChange:t.updateBaselineName,validated:s.hasOwnProperty("status")?X.d.error:null,"aria-label":"baseline name"}))),B.a.createElement("br",null),B.a.createElement("br",null),e)},t.submitBaselineName=t.submitBaselineName.bind(w()(t)),t.state={baselineName:"",fromScratchChecked:!0,copyBaselineChecked:!1,copySystemChecked:!1,columns:[{title:""},{title:"Name",transforms:[I.a]},{title:"Last updated",transforms:[I.a]}]},t.updateBaselineName=function(e){t.setState({baselineName:e})},t.handleChecked=function(e,a){var n=a.currentTarget.value;t.props.clearSelectedBaselines("RADIO"),"fromScratchChecked"===n?t.setState({fromScratchChecked:!0,copyBaselineChecked:!1,copySystemChecked:!1}):"copyBaselineChecked"===n?t.setState({fromScratchChecked:!1,copyBaselineChecked:!0,copySystemChecked:!1}):t.setState({fromScratchChecked:!1,copyBaselineChecked:!1,copySystemChecked:!0})},t}return u()(n,[{key:"submitBaselineName",value:(t=s()(r.a.mark((function e(){var t,a,n,l,s,i,c,o,u,d,p,b,m,h;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state,a=t.baselineName,n=t.fromScratchChecked,l=t.copyBaselineChecked,s=t.copySystemChecked,i=this.props,c=i.createBaseline,o=i.toggleCreateBaselineModal,u=i.selectedBaselineIds,d=i.history,p=i.entities,b=i.clearSelectedBaselines,m=i.selectedHSPIds,h={display_name:a},e.prev=3,""===a){e.next=30;break}if(!n){e.next=11;break}return h.baseline_facts=[],e.next=9,c(h);case 9:e.next=27;break;case 11:if(1!==u.length||!l){e.next=17;break}return h={display_name:a},e.next=15,c(h,u[0]);case 15:e.next=27;break;case 17:if(1!==p.selectedSystemIds.length||!s){e.next=23;break}return h.inventory_uuid=p.selectedSystemIds[0],e.next=21,c(h);case 21:e.next=27;break;case 23:if(1!==m.length||!s){e.next=27;break}return h.hsp_uuid=m[0],e.next=27,c(h);case 27:d.push("baselines/"+this.props.baselineData.id),o(),b("RADIO");case 30:e.next=34;break;case 32:e.prev=32,e.t0=e.catch(3);case 34:case"end":return e.stop()}}),e,this,[[3,32]])}))),function(){return t.apply(this,arguments)})},{key:"renderRadioButtons",value:function(){var e=this.state,t=e.fromScratchChecked,a=e.copyBaselineChecked,n=e.copySystemChecked;return B.a.createElement(B.a.Fragment,null,B.a.createElement(_.a,{isChecked:t,id:"create baseline",name:"baseline-create-options",label:"Create baseline from scratch",value:"fromScratchChecked",onChange:this.handleChecked}),B.a.createElement(_.a,{isChecked:a,id:"copy baseline",name:"baseline-create-options",label:"Copy an existing baseline",value:"copyBaselineChecked",onChange:this.handleChecked}),B.a.createElement(_.a,{isChecked:n,id:"copy system",name:"baseline-create-options",label:"Copy an existing system",value:"copySystemChecked",onChange:this.handleChecked}))}},{key:"renderCopyBaseline",value:function(){var e=this.props,t=e.baselineTableData,a=e.loading,n=e.createBaselineModalOpened,r=e.totalBaselines,l=this.state.columns;return B.a.createElement(B.a.Fragment,null,B.a.createElement("b",null,"Select baseline to copy from"),B.a.createElement(P.a,{tableId:"RADIO",onSelect:this.onSelect,tableData:t,loading:a,createBaselineModalOpened:n,columns:l,totalBaselines:r}))}},{key:"renderCopySystem",value:function(){var e=this.props.historicalProfiles;return B.a.createElement(B.a.Fragment,null,B.a.createElement("b",null,"Select system to copy from"),B.a.createElement(L.a,{selectedSystemIds:[],createBaselineModal:!0,hasHistoricalDropdown:!0,hasMultiSelect:!1,historicalProfiles:e}))}},{key:"renderActions",value:function(){var e=this.props,t=e.selectedBaselineIds,a=e.selectedHSPIds,n=e.entities,r=this.state,l=r.baselineName,s=r.copyBaselineChecked,i=r.copySystemChecked;return""===l||s&&0===t.length||i&&H()(n.selectedSystemIds)&&0===a.length?[B.a.createElement(q.a,{key:"confirm",variant:"primary",isDisabled:!0},"Create baseline"),B.a.createElement(q.a,{key:"cancel",variant:"link",onClick:this.cancelModal},"Cancel")]:[B.a.createElement(q.a,{key:"confirm",variant:"primary",onClick:this.submitBaselineName},"Create baseline"),B.a.createElement(q.a,{key:"cancel",variant:"link",onClick:this.cancelModal},"Cancel")]}},{key:"render",value:function(){var e=this.props,t=e.createBaselineError,a=e.createBaselineModalOpened;return B.a.createElement(z.a,{width:"1200px",title:"Create baseline",isOpen:a,onClose:this.cancelModal,actions:this.renderActions()},t.status?B.a.createElement(J.a,{variant:"danger",isInline:!0,title:"Status: "+t.status},B.a.createElement("p",null,t.detail)):B.a.createElement("div",null),this.renderModalBody())}}]),n}(y.Component);Q.propTypes={createBaselineModalOpened:k.a.bool,createBaseline:k.a.func,selectBaseline:k.a.func,history:k.a.object,baselineData:k.a.object,toggleCreateBaselineModal:k.a.func,clearSelectedBaselines:k.a.func,entities:k.a.object,selectedBaselineIds:k.a.array,createBaselineError:k.a.object,baselineTableData:k.a.array,loading:k.a.bool,totalBaselines:k.a.number,updatePagination:k.a.func,historicalProfiles:k.a.array,selectedHSPIds:k.a.array};var V=Object(v.o)(Object(C.connect)((function(e){return{createBaselineModalOpened:e.createBaselineModalState.createBaselineModalOpened,baselineData:e.createBaselineModalState.baselineData,entities:e.entities,selectedBaselineIds:e.baselinesTableState.radioTable.selectedBaselineIds,createBaselineError:e.createBaselineModalState.createBaselineError,loading:e.baselinesTableState.radioTable.loading,emptyState:e.baselinesTableState.radioTable.emptyState,baselineTableData:e.baselinesTableState.radioTable.baselineTableData,totalBaselines:e.baselinesTableState.radioTable.totalBaselines,historicalProfiles:e.compareState.historicalProfiles,selectedHSPIds:e.historicProfilesState.selectedHSPIds}}),(function(e){return{toggleCreateBaselineModal:function(){return e(Y.a.toggleCreateBaselineModal())},createBaseline:function(t,a){return e(Y.a.createBaseline(t,a))},selectBaseline:function(t,a,n){return e(U.a.selectBaseline(t,a,n))},clearSelectedBaselines:function(t){return e(U.a.clearSelectedBaselines(t))}}}))(Q)),W=a(206),Z=a(728),$=a(71),ee=a(208);function te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=f()(e);if(t){var r=f()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return m()(this,a)}}var ae=function(e){p()(n,e);var t,a=te(n);function n(e){var t;return c()(this,n),(t=a.call(this,e)).fetchBaseline=function(e){t.props.history.push("baselines/"+e)},t.onSelect=function(e,a,n){var r=t.props,l=r.baselineTableData;(0,r.selectBaseline)(-1===n?l.map((function(e){return e[0]})):[l[n][0]],a,"CHECKBOX")},t.onBulkSelect=function(e){var a=t.props,n=a.baselineTableData,r=a.selectBaseline,l=[];n.forEach((function(e){l.push(e[0])})),r(l,e,"CHECKBOX")},t.renderEmptyState=function(){var e=t.props,a=e.baselineError,n=e.revertBaselineFetch,r=t.state,l=r.emptyStateMessage,s=r.errorMessage;return a.status?200!==a.status&&void 0!==a.status?B.a.createElement(W.a,{icon:M.a,color:"#c9190b",title:"Baselines cannot be displayed",text:s,error:"Error "+a.status+": "+a.detail,button:B.a.createElement("a",{onClick:function(){return n("CHECKBOX")}},B.a.createElement(O.a,{className:"reload-button"}),"Retry")}):void 0:B.a.createElement(W.a,{icon:x.a,title:"No baselines",text:l,button:B.a.createElement(N.a,null)})},t.state={columns:[{title:"Name",transforms:[I.a]},{title:"Last updated",transforms:[I.a]},{title:""}],emptyStateMessage:["You currently have no baselines displayed.","Create a baseline to use in your Comparison analysis."],errorMessage:["The list of baselines cannot be displayed at this time. Please retry and if","the problem persists contact your system administrator.",""]},t}return u()(n,[{key:"componentDidMount",value:(t=s()(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.insights.chrome.auth.getUser();case 2:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"renderTable",value:function(){var e=this.props,t=e.baselineTableData,a=e.loading,n=e.createBaselineModalOpened,r=e.clearEditBaselineData,l=e.selectedBaselineIds,s=e.totalBaselines,i=this.state.columns;return r(),B.a.createElement(g.a,null,B.a.createElement("div",null,B.a.createElement(P.a,{tableId:"CHECKBOX",hasMultiSelect:!0,onSelect:this.onSelect,tableData:t,loading:a,columns:i,kebab:!0,createButton:!0,exportButton:!0,onClick:this.fetchBaseline,createBaselineModalOpened:n,onBulkSelect:this.onBulkSelect,selectedBaselineIds:l,totalBaselines:s})))}},{key:"render",value:function(){var e=this,t=this.props,a=t.baselineError,n=t.emptyState,r=t.loading,l=t.revertBaselineFetch;return B.a.createElement(B.a.Fragment,null,B.a.createElement(V,null),B.a.createElement(E.PageHeader,null,B.a.createElement(E.PageHeaderTitle,{title:"Baselines"})),B.a.createElement(E.Main,null,B.a.createElement(ee.a.Consumer,null,(function(t){return!1===t.permissions.baselinesRead?B.a.createElement(W.a,{icon:D.a,color:"#6a6e73",title:"You do not have access to Baselines",text:["Contact your organization administrator(s) for more information."]}):n&&!r?e.renderEmptyState():B.a.createElement(B.a.Fragment,null,B.a.createElement(Z.a,{error:!n&&a?a:{},onClose:l,tableId:"CHECKBOX"}),B.a.createElement(T.a,{className:"pf-t-light pf-m-opaque-100"},e.renderTable()))}))))}}]),n}(y.Component);ae.propTypes={loading:k.a.bool,baselineTableData:k.a.array,emptyState:k.a.bool,createBaselineModalOpened:k.a.bool,selectBaseline:k.a.func,history:k.a.object,baselineError:k.a.object,revertBaselineFetch:k.a.func,clearEditBaselineData:k.a.func,selectedBaselineIds:k.a.array,totalBaselines:k.a.number};t.default=Object(v.o)(Object(C.connect)((function(e){return{loading:e.baselinesTableState.checkboxTable.loading,emptyState:e.baselinesTableState.checkboxTable.emptyState,baselineTableData:e.baselinesTableState.checkboxTable.baselineTableData,createBaselineModalOpened:e.createBaselineModalState.createBaselineModalOpened,baselineError:e.baselinesTableState.checkboxTable.baselineError,selectedBaselineIds:e.baselinesTableState.checkboxTable.selectedBaselineIds,totalBaselines:e.baselinesTableState.checkboxTable.totalBaselines}}),(function(e){return{selectBaseline:function(t,a,n){return e(U.a.selectBaseline(t,a,n))},revertBaselineFetch:function(t){return e(U.a.revertBaselineFetch(t))},clearEditBaselineData:function(){return e($.a.clearEditBaselineData())}}}))(ae))}}]);
//# sourceMappingURL=../sourcemaps/4.js.map