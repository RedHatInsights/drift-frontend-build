(self.webpackChunkdrift_frontend=self.webpackChunkdrift_frontend||[]).push([[190],{27916:(e,t,a)=>{"use strict";a.r(t),a.d(t,{EditBaseline:()=>Q,default:()=>$});var n=a(87757),r=a.n(n),l=a(48926),i=a.n(l),o=a(34575),c=a.n(o),s=a(93913),u=a.n(s),d=a(81506),p=a.n(d),f=a(2205),m=a.n(f),h=a(78585),b=a.n(h),y=a(29754),v=a.n(y),E=a(41609),g=a.n(E),k=a(25558),B=a.n(k),D=a(45697),C=a.n(D),S=a(47194),F=a(70983),O=a(35115),x=a(87473),w=a(93),N=a(73540),R=a(64663),T=a(50902);const M=function(e){var t=0,a=0;return e.forEach((function(e){e.selected?T.Z.isCategory(e)?t+=1:a+=1:T.Z.isCategory(e)&&T.Z.baselineSubFacts(e).forEach((function(e){e.selected&&(a+=1)}))})),{categories:t,facts:a}};var I=function(e){m()(r,e);var t,a,n=(t=r,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=v()(t);if(a){var r=v()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b()(this,e)});function r(e){var t;return c()(this,r),(t=n.call(this,e)).isDisabled=function(){var e=t.props.editBaselineTableData,a=!0;return e.forEach((function(e){e.selected&&(a=!1),T.Z.isCategory(e)&&T.Z.baselineSubFacts(e).forEach((function(e){e.selected&&(a=!1)}))})),a},t.state={kebabOpened:!1,modalOpened:!1},t.toggleKebab=function(){var e=t.state.kebabOpened;t.setState({kebabOpened:!e})},t.toggleModalOpened=function(){var e=t.state.modalOpened;t.setState({modalOpened:!e,kebabOpened:!1})},t}return u()(r,[{key:"render",value:function(){var e,t,a,n=this.state,r=n.kebabOpened,l=n.modalOpened,i=this.props.editBaselineTableData,o=M(i),c=o.categories,s=o.facts;return c>0&&(t=1===c?"1 category":c+" categories"),s>0&&(a=1===s?"1 fact":s+" facts"),e=[B().createElement(x.DropdownItem,{key:"multi-delete",component:"button",onClick:this.toggleModalOpened,isDisabled:!(i.length>0)||this.isDisabled()},"Delete facts")],B().createElement(B().Fragment,null,l?B().createElement(R.Z,{toggleModal:this.toggleModalOpened.bind(this),modalOpened:l,categoryMessage:t,factMessage:a}):null,B().createElement(x.Dropdown,{style:{float:"left"},toggle:B().createElement(x.KebabToggle,{onToggle:this.toggleKebab}),isOpen:r,dropdownItems:e,isPlain:!0,ouiaId:"actions"}))}}]),r}(k.Component);I.propTypes={editBaselineTableData:C().array};const P=(0,F.connect)((function(e){return{editBaselineTableData:e.editBaselineState.editBaselineTableData}}),null)(I);var V=a(92637);var Z=function(e){m()(r,e);var t,a,n=(t=r,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=v()(t);if(a){var r=v()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b()(this,e)});function r(e){var t;return c()(this,r),(t=n.call(this,e)).handleAddFact=function(){var e=t.props,a=e.setFactData,n=e.toggleFactModal;a({factName:"",factValue:"",fact:[]}),n()},t}return u()(r,[{key:"render",value:function(){var e=this.props,t=e.editBaselineEmptyState,a=e.hasWritePermissions,n=e.isDisabled;return B().createElement(B().Fragment,null,a||void 0===a?B().createElement(x.Button,{variant:"primary",isDisabled:n,onClick:this.handleAddFact,ouiaId:"add_fact"},"Add fact or category"):B().createElement(x.Tooltip,{content:B().createElement("div",null,"You do not have permissions to perform this action")},B().createElement("div",{className:t?"tooltip-button-margin":null},B().createElement(x.Button,{variant:"primary",isDisabled:!0,onClick:this.handleAddFact,ouiaId:"add_fact"},"Add fact or category"))))}}]),r}(k.Component);Z.propTypes={toggleFactModal:C().func,setFactData:C().func,isDisabled:C().bool,hasWritePermissions:C().bool,editBaselineEmptyState:C().bool};const A=(0,F.connect)(null,(function(e){return{toggleFactModal:function(){return e(V.E.toggleFactModal())},setFactData:function(t){return e(V.E.setFactData(t))}}}))(Z);var j=a(68185),W=a(92650);var _=function(e){m()(r,e);var t,a,n=(t=r,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=v()(t);if(a){var r=v()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b()(this,e)});function r(e){var t;return c()(this,r),(t=n.call(this,e)).onToggle=function(){var e=t.state.dropdownOpen;t.setState({dropdownOpen:!e})},t.state={bulkSelectItems:[{title:"Select all",key:"select-all",onClick:function(){return t.props.onBulkSelect(!0)}},{title:"Select none",key:"select-none",onClick:function(){return t.props.onBulkSelect(!1)}}],dropdownOpen:!1,dropdownItems:[B().createElement(x.DropdownItem,{key:"export-to-CSV",component:"button",ouiaId:"edit-baseline-export-to-csv",onClick:function(){return t.props.exportToCSV(t.props.tableData,t.props.baselineData)}},"Export to CSV")]},t}return u()(r,[{key:"render",value:function(){var e=this.props,t=e.hasWritePermissions,a=e.isDisabled,n=e.onBulkSelect,r=e.selected,l=e.totalFacts,i=this.state,o=i.bulkSelectItems,c=i.dropdownItems,s=i.dropdownOpen;return B().createElement(x.Toolbar,{className:"drift-toolbar"},B().createElement(x.ToolbarContent,null,B().createElement(x.ToolbarItem,null,B().createElement(O.BulkSelect,{count:r>0?r:null,items:o,checked:j.Z.findCheckedValue(l,r),onSelect:function(){return n(!r>0)},isDisabled:a})),B().createElement(x.ToolbarItem,null,B().createElement(A,{isDisabled:a,hasWritePermissions:t})),B().createElement(x.ToolbarGroup,{variant:"icon-button-group"},B().createElement(x.ToolbarItem,null,B().createElement(W.Z,{dropdownItems:c,isOpen:s,onToggle:this.onToggle,ouiaId:"edit-baseline-export-dropdown"})),B().createElement(x.ToolbarItem,null,B().createElement(P,null)))))}}]),r}(k.Component);_.propTypes={isDisabled:C().bool,onBulkSelect:C().func,selected:C().any,totalFacts:C().number,exportToCSV:C().func,tableData:C().array,baselineData:C().object,hasWritePermissions:C().bool};const K=_;var H=a(39616);var L=function(e){m()(o,e);var t,a,n,l=(a=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=v()(a);if(n){var r=v()(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return b()(this,e)});function o(e){var t;return c()(this,o),(t=l.call(this,e)).checkKeyPress=function(e){"Enter"===e.key&&(e.preventDefault(),t.confirmModal())},t.cancelFact=t.cancelFact.bind(p()(t)),t.confirmModal=t.confirmModal.bind(p()(t)),t.renderCategoryCheckbox=t.renderCategoryCheckbox.bind(p()(t)),t.renderFactInput=t.renderFactInput.bind(p()(t)),t.renderValueInput=t.renderValueInput.bind(p()(t)),t.renderModalBody=t.renderModalBody.bind(p()(t)),t.state={factName:t.props.factName,factValue:t.props.factValue,factData:t.props.factData,isCategory:t.props.isCategory},t.state.isAddFact=""===t.props.factName&&""===t.props.factValue,t.state.isEditFact=""!==t.props.factName&&""!==t.props.factValue,t.handleChange=function(e){t.setState({isCategory:e})},t.handleNewName=function(e){t.setState({factName:e})},t.handleNewValue=function(e){t.setState({factValue:e})},t}return u()(o,[{key:"cancelFact",value:function(){(0,this.props.toggleFactModal)()}},{key:"confirmModal",value:(t=i()(r().mark((function e(){var t,a,n,l,i,o,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.toggleFactModal,n=t.baselineData,l=t.patchBaseline,i=t.fetchBaselineData,o=this.state.isAddFact,"",e.prev=3,c=o?this.addFact(n):this.editFact(n),e.next=7,l(n.id,c);case 7:e.sent&&i(n.id),a(),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(3);case 14:case"end":return e.stop()}}),e,this,[[3,12]])}))),function(){return t.apply(this,arguments)})},{key:"addFact",value:function(e){var t=this.state,a=t.isCategory,n=t.factName,r=t.factValue,l=t.factData,i=T.Z.buildNewFactData(a,n,r,l);return T.Z.makeAddFactPatch(i,e)}},{key:"editFact",value:function(e){var t=this.state,a=t.isCategory,n=t.factName,r=t.factValue,l=t.factData,i=T.Z.buildEditedFactData(a,this.props.factName,n,this.props.factValue,r,l);return T.Z.makeEditFactPatch(i,e,l)}},{key:"renderCategoryCheckbox",value:function(){var e=this.state,t=e.isCategory,a=e.isEditFact;return B().createElement(x.Checkbox,{"data-ouia-component-type":"PF4/Checkbox","data-ouia-component-id":"category-checkbox",className:"sm-padding-bottom","aria-label":"controlled checkbox example",label:"This is a category",id:"isCategory",name:"isCategory",onChange:this.handleChange,isChecked:t,isDisabled:t&&a})}},{key:"renderFactInput",value:function(){var e=this.props.inlineError,t=this.state,a=t.factName,n=t.isCategory;return B().createElement("div",{className:"fact-value"},B().createElement(x.FormGroup,{label:n?"Category name":"Fact name",isRequired:!0,helperTextInvalid:Object.prototype.hasOwnProperty.call(e,"detail")?e.detail:null,validated:Object.prototype.hasOwnProperty.call(e,"status")?"error":null,fieldId:"fact name",onKeyPress:this.checkKeyPress},B().createElement(x.TextInput,{"data-ouia-component-type":"PF4/TextInput","data-ouia-component-id":"fact-name-input",value:a,type:"text",placeholder:"Name",onChange:this.handleNewName,validated:Object.prototype.hasOwnProperty.call(e,"status")?x.ValidatedOptions.error:null,"aria-label":"fact name"})))}},{key:"renderValueInput",value:function(){var e=this.props.inlineError,t=this.state.factValue;return B().createElement("div",{className:"fact-value"},B().createElement(x.FormGroup,{label:"Value",isRequired:!0,helperTextInvalid:Object.prototype.hasOwnProperty.call(e,"detail")?e.detail:null,validated:Object.prototype.hasOwnProperty.call(e,"status")?"error":null,fieldId:"fact value",onKeyPress:this.checkKeyPress},B().createElement(x.TextInput,{"data-ouia-component-type":"PF4/TextInput","data-ouia-component-id":"value-input",value:t,type:"text",placeholder:"Value",onChange:this.handleNewValue,validated:Object.prototype.hasOwnProperty.call(e,"status")?x.ValidatedOptions.error:null,"aria-label":"value"})))}},{key:"renderModalBody",value:function(){var e=this.props,t=e.inlineError,a=e.isSubFact,n=this.state,r=n.isAddFact,l=n.isCategory;return B().createElement(B().Fragment,null,t.status?B().createElement(x.Alert,{variant:"danger",isInline:!0,title:"Status: "+t.status},B().createElement("p",null,t.detail)):B().createElement("div",null),r&&!a||l?this.renderCategoryCheckbox():null,B().createElement(x.Form,null,this.renderFactInput(),l?null:this.renderValueInput()))}},{key:"title",value:function(){var e=this.props.isSubFact,t=this.state,a=t.isAddFact,n=t.isEditFact,r=t.isCategory,l="Add fact";return!0!==n||r||e?!0===a&&!0===r?l="Add category":!0===a&&!0===e?l="Add sub fact":!0===n&&!0===e?l="Edit sub fact":!0===r&&(l="Edit category"):l="Edit fact",l}},{key:"render",value:function(){var e=this.props.factModalOpened;return B().createElement(x.Modal,{className:"drift",ouiaId:"add-fact-modal",variant:x.ModalVariant.small,title:this.title(),isOpen:e,onClose:this.cancelFact,actions:[B().createElement(x.Button,{key:"confirm",variant:"primary",ouiaId:"fact-modal-save-button",onClick:this.confirmModal},"Save"),B().createElement(x.Button,{key:"cancel",variant:"link",ouiaId:"fact-modal-cancel-button",onClick:this.cancelFact},"Cancel")]},this.renderModalBody())}}]),o}(k.Component);L.propTypes={toggleFactModal:C().func,factModalOpened:C().bool,factName:C().string,factValue:C().string,factData:C().object,isCategory:C().bool,isSubFact:C().bool,baselineData:C().object,patchBaseline:C().func,fetchBaselineData:C().func,inlineError:C().object};const q=(0,F.connect)((function(e){return{factModalOpened:e.editBaselineState.factModalOpened,factName:e.editBaselineState.factName,factValue:e.editBaselineState.factValue,factData:e.editBaselineState.factData,isCategory:e.editBaselineState.isCategory,isSubFact:e.editBaselineState.isSubFact,baselineData:e.editBaselineState.baselineData,inlineError:e.editBaselineState.inlineError}}),(function(e){return{toggleFactModal:function(){return e(V.E.toggleFactModal())},patchBaseline:function(t,a){return e(V.E.patchBaseline(t,a))},fetchBaselineData:function(t){return e(V.E.fetchBaselineData(t))}}}))(L);var z=function(e){m()(o,e);var t,a,n,l=(a=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=v()(a);if(n){var r=v()(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return b()(this,e)});function o(e){var t;return c()(this,o),(t=l.call(this,e)).cancelModal=function(){var e=t.props,a=e.toggleEditNameModal,n=e.baselineData;t.updateBaselineName(n.display_name),a()},t.checkKeyPress=function(e){"Enter"===e.key&&(e.preventDefault(),t.confirmModal())},t.state={baselineName:t.props.baselineData.display_name},t.updateBaselineName=function(e){t.setState({baselineName:e})},t.confirmModal=t.confirmModal.bind(p()(t)),t}return u()(o,[{key:"confirmModal",value:(t=i()(r().mark((function e(){var t,a,n,l,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.baselineName,a=this.props,n=a.baselineData,l=a.patchBaseline,i=a.toggleEditNameModal,e.prev=2,e.next=5,l(n.id,{display_name:t,facts_patch:[]});case 5:i(),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(2);case 10:case"end":return e.stop()}}),e,this,[[2,8]])}))),function(){return t.apply(this,arguments)})},{key:"renderModalBody",value:function(){var e=this.state.baselineName,t=this.props.error,a=Object.prototype.hasOwnProperty.call(t,"status")?x.ValidatedOptions.error:null;return B().createElement("div",{className:"fact-value"},B().createElement(x.Form,null,B().createElement(x.FormGroup,{label:"Baseline title",isRequired:!0,fieldId:"baseline name",helperTextInvalid:Object.prototype.hasOwnProperty.call(t,"detail")?t.detail:null,validated:a,onKeyPress:this.checkKeyPress},B().createElement(x.TextInput,{value:e,type:"text",onChange:this.updateBaselineName,validated:a,"aria-label":"baseline name"}))))}},{key:"render",value:function(){var e=this.props,t=e.modalOpened,a=e.error;return B().createElement(x.Modal,{className:"drift",variant:x.ModalVariant.small,title:"Edit name",isOpen:t,onClose:this.cancelModal,actions:[B().createElement(x.Button,{key:"confirm",variant:"primary",ouiaId:"save",onClick:this.confirmModal},"Save"),B().createElement(x.Button,{key:"cancel",variant:"link",ouiaId:"cancel",onClick:this.cancelModal},"Cancel")]},a.status&&B().createElement(x.Alert,{variant:"danger",isInline:!0,title:"Status: "+a.status},B().createElement("p",null,a.detail)),this.renderModalBody())}}]),o}(k.Component);z.propTypes={baselineData:C().object,toggleEditNameModal:C().func,modalOpened:C().bool,patchBaseline:C().func,error:C().object};const G=(0,F.connect)(null,(function(e){return{patchBaseline:function(t,a){return e(V.E.patchBaseline(t,a))}}}))(z);var U=a(53847),X=a(31222),Y=a(86758),J=a(26475);var Q=function(e){m()(o,e);var t,a,n,l=(a=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=v()(a);if(n){var r=v()(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return b()(this,e)});function o(e){var t;return c()(this,o),(t=l.call(this,e)).retryBaselineFetch=function(){(0,t.props.clearErrorData)(),t.fetchBaselineId()},t.renderPageHeader=function(e,a){var n=t.state.modalOpened,r=t.props,l=r.baselineData,i=r.baselineDataLoading,o=r.inlineError;return i?B().createElement(O.PageHeader,null,B().createElement("div",null,B().createElement(O.Skeleton,{size:O.SkeletonSize.lg}))):void 0!==l?B().createElement(B().Fragment,null,B().createElement(G,{baselineData:l,modalOpened:n,toggleEditNameModal:t.toggleEditNameModal,error:o}),B().createElement(O.PageHeader,null,t.renderBreadcrumb(l,e),B().createElement("div",{id:"edit-baseline-title"},t.renderPageTitle(l,e,a)))):B().createElement(O.PageHeader,null,t.renderBreadcrumb(),B().createElement(O.PageHeaderTitle,{title:"Baseline"}))},t.onSelect=function(e,a){var n,r=t.props,l=r.editBaselineTableData,i=r.selectFact,o=[],c=Number(a.target.name);l.forEach((function(e){e[X.ki]===c?n=e:T.Z.isCategory(e)&&T.Z.baselineSubFacts(e).forEach((function(e){e[X.ki]===c&&(n=e)}))})),o=[n[0]],T.Z.isCategory(n)&&T.Z.baselineSubFacts(n).forEach((function(e){o.push(e[X.ki])})),i(o,e)},t.onBulkSelect=function(e){var a=t.props,n=a.editBaselineTableData,r=a.selectFact,l=[];n.forEach((function(e){l.push(e[X.ki]),T.Z.isCategory(e)&&T.Z.baselineSubFacts(e).forEach((function(e){l.push(e[X.ki])}))})),r(l,e)},t.renderCheckbox=function(e){var a;return T.Z.isCategory(e)?a="category-"+e[X.ki]:"string"==typeof e[X.fO]&&(a="fact-"+e[X.ki]),B().createElement(x.Checkbox,{isChecked:e.selected,onChange:t.onSelect,id:a,name:e[X.ki]})},t.state={modalOpened:!1,errorMessage:["The baseline cannot be displayed at this time. Please retry and if","the problem persists contact your system administrator.",""],loadingColumns:[{title:"Fact",transforms:[(0,N.cellWidth)(40)]},{title:"Value",transforms:[(0,N.cellWidth)(45)]},{title:"",transforms:[(0,N.cellWidth)(5)]}]},t.fetchBaselineId(),t.renderBreadcrumb=t.renderBreadcrumb.bind(p()(t)),t.goToBaselinesList=t.goToBaselinesList.bind(p()(t)),t.toggleEditNameModal=function(){var e=t.state.modalOpened,a=t.props.clearErrorData;t.setState({modalOpened:!e}),a()},t}return u()(o,[{key:"componentDidMount",value:(t=i()(r().mark((function e(){var t,a,n,l,i,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=this.props.match.params,e.next=3,window.insights.chrome.auth.getUser();case 3:return e.next=5,null===(t=window.insights)||void 0===t||null===(a=t.chrome)||void 0===a||null===(n=a.appAction)||void 0===n?void 0:n.call(a,"baseline-view");case 5:return e.next=7,null===(l=window.insights)||void 0===l||null===(i=l.chrome)||void 0===i?void 0:i.appObjectId(o.id);case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"componentDidUpdate",value:function(){this.props.baselineData&&(document.title=this.props.baselineData.display_name+" - Baselines - Drift | Red Hat Insights")}},{key:"fetchBaselineId",value:function(){var e=this.props,t=e.match.params;(0,e.fetchBaselineData)(t.id)}},{key:"goToBaselinesList",value:function(){var e=this.props,t=e.clearBaselineData,a=e.fetchBaselines,n=e.history;t("CHECKBOX"),a("CHECKBOX"),n.push("/baselines")}},{key:"renderBreadcrumb",value:function(e,t){var a=this;return B().createElement(x.Breadcrumb,{ouiaId:"edit-baseline-breadcrumb"},B().createElement(x.BreadcrumbItem,null,B().createElement("a",{onClick:function(){return a.goToBaselinesList()}},"Baselines")),e&&t?B().createElement(x.BreadcrumbHeading,null,e.display_name):null)}},{key:"renderPageTitle",value:function(e,t,a){var n=this;return t?a?B().createElement(B().Fragment,null,B().createElement("span",{className:"pf-c-title pf-m-2xl"},g()(e)?null:e.display_name),B().createElement("span",null,B().createElement(w.EditAltIcon,{className:"pointer not-active edit-icon-margin","data-ouia-component-id":"edit-baseline-name-button","data-ouia-component-type":"PF4/Button",onClick:function(){return n.toggleEditNameModal()}}))):B().createElement(B().Fragment,null,g()(e)?null:e.display_name):B().createElement(B().Fragment,null,"Baseline")}},{key:"renderHeaderRow",value:function(e){return B().createElement("tr",{key:"edit-baseline-table-header"},e?B().createElement("th",null):null,B().createElement("th",{className:"edit-baseline-header"},B().createElement("div",null,"Fact")),B().createElement("th",{className:"edit-baseline-header"},B().createElement("div",null,"Value")),B().createElement("th",null))}},{key:"renderLoadingRows",value:function(){var e=this.state.loadingColumns;return B().createElement(O.SkeletonTable,{columns:e,rowSize:8,onSelect:!0,canSelectAll:!1,isSelectable:!0})}},{key:"renderExpandableRowButton",value:function(e){var t=this;return this.props.expandedRows.includes(e)?B().createElement(w.AngleDownIcon,{className:"pointer active-blue",onClick:function(){return t.props.expandRow(e)}}):B().createElement(w.AngleRightIcon,{className:"pointer",onClick:function(){return t.props.expandRow(e)}})}},{key:"renderRowData",value:function(e,t){var a=this,n=this.props,r=n.expandedRows,l=n.baselineData,i=[],o=[],c=l.baseline_facts.find((function(t){return t.name===e[X.Ov]}));return t&&i.push(B().createElement("td",{className:r.includes(e[X.Ov])?"pf-c-table__check nested-fact":"pf-c-table__check"},this.renderCheckbox(e))),T.Z.isCategory(e)?(i.push(B().createElement("td",null,this.renderExpandableRowButton(e[X.Ov])," ",e[X.Ov])),i.push(B().createElement("td",null)),i.push(T.Z.renderKebab({factName:e[X.Ov],factData:c,isCategory:!0,hasWritePermissions:t})),o.push(B().createElement("tr",{key:e[X.Ov]},i)),r.includes(e[X.Ov])&&T.Z.baselineSubFacts(e).forEach((function(e){i=[],t&&i.push(B().createElement("td",{className:"pf-c-table__check nested-fact"},a.renderCheckbox(e))),i.push(B().createElement("td",null,B().createElement("p",{className:"child-row"},e[X.Ov]))),i.push(B().createElement("td",null,e[X.fO])),i.push(T.Z.renderKebab({factName:e[X.Ov],factValue:e[X.fO],factData:c,isSubFact:!0,hasWritePermissions:t})),o.push(B().createElement("tr",{key:e[X.Ov]},i))}))):(i.push(B().createElement("td",null,e[X.Ov])),i.push(B().createElement("td",null,e[X.fO])),i.push(T.Z.renderKebab({factName:e[X.Ov],factValue:e[X.fO],factData:c,hasWritePermissions:t})),o.push(B().createElement("tr",{key:e[X.Ov]},i))),o}},{key:"renderRows",value:function(e){var t=this.props.editBaselineTableData,a=[],n=[];if(0!==t.length)for(var r=0;r<t.length;r+=1)n=this.renderRowData(t[r],e),a.push(n);return a}},{key:"renderEmptyState",value:function(e){var t=this,a=this.props,n=a.editBaselineEmptyState,r=a.editBaselineError,l=this.state.errorMessage;return 200!==r.status&&void 0!==r.status?B().createElement(Y.Z,{icon:w.ExclamationCircleIcon,color:"#c9190b",title:"Baseline cannot be displayed",text:l,error:"Error "+r.status+": "+r.detail,button:B().createElement("a",{onClick:function(){return t.retryBaselineFetch()}},B().createElement(w.UndoIcon,{className:"reload-button"}),"Retry")}):B().createElement(Y.Z,{title:"No facts",text:["No facts or categories have been added to this baseline yet."],button:B().createElement(A,{hasWritePermissions:e,editBaselineEmptyState:n})})}},{key:"renderTable",value:function(e){return B().createElement("table",{className:"pf-c-table ins-c-table pf-m-grid-md ins-entity-table"},B().createElement("thead",null,this.renderHeaderRow(e)),B().createElement("tbody",{key:"edit-baseline-table"},this.renderRows(e)))}},{key:"render",value:function(){var e=this,t=this.props,a=t.baselineData,n=t.baselineDataLoading,r=t.editBaselineTableData,l=t.exportToCSV,i=t.factModalOpened,o=t.editBaselineEmptyState,c=t.editBaselineError,s=t.clearErrorData,u=T.Z.findSelected(r);return B().createElement(J.B.Consumer,null,(function(t){return B().createElement(B().Fragment,null,e.renderPageHeader(t.permissions.baselinesRead,t.permissions.baselinesWrite),B().createElement(O.Main,null,!1===t.permissions.baselinesRead?B().createElement(Y.Z,{icon:w.LockIcon,color:"#6a6e73",title:"You do not have access to view this Baseline",text:["Contact your organization administrator(s) for more information."]}):B().createElement(B().Fragment,null,i?B().createElement(q,null):B().createElement("div",null),B().createElement(H.Z,{error:!o&&c.status?c:{},onClose:s}),o?e.renderEmptyState(t.permissions.baselinesWrite):B().createElement(x.Card,{className:"pf-t-light pf-m-opaque-100"},B().createElement(x.CardBody,null,B().createElement(K,{selected:u,onBulkSelect:e.onBulkSelect,isDisabled:0===r.length||!t.permissions.baselinesWrite,totalFacts:T.Z.findFactCount(r),baselineData:a,exportToCSV:l,tableData:r,hasWritePermissions:t.permissions.baselinesWrite}),n?e.renderLoadingRows():e.renderTable(t.permissions.baselinesWrite))))))}))}}]),o}(k.Component);Q.propTypes={history:C().object,match:C().any,clearBaselineData:C().func,baselineData:C().object,baselineDataLoading:C().bool,fetchBaselineData:C().func,factModalOpened:C().bool,editBaselineTableData:C().array,expandRow:C().func,expandedRows:C().array,selectFact:C().func,clearErrorData:C().func,editBaselineError:C().object,inlineError:C().object,editBaselineEmptyState:C().bool,exportToCSV:C().func,hasWritePermissions:C().bool,fetchBaselines:C().func};const $=(0,S.withRouter)((0,F.connect)((function(e){return{baselineData:e.editBaselineState.baselineData,baselineDataLoading:e.editBaselineState.baselineDataLoading,factModalOpened:e.editBaselineState.factModalOpened,editBaselineTableData:e.editBaselineState.editBaselineTableData,expandedRows:e.editBaselineState.expandedRows,editBaselineError:e.editBaselineState.editBaselineError,editBaselineEmptyState:e.editBaselineState.editBaselineEmptyState,inlineError:e.editBaselineState.inlineError}}),(function(e){return{clearBaselineData:function(t){return e(U.w.clearBaselineData(t))},expandRow:function(t){return e(V.E.expandRow(t))},fetchBaselineData:function(t){return e(V.E.fetchBaselineData(t))},selectFact:function(t,a){return e(V.E.selectFact(t,a))},clearErrorData:function(){return e(V.E.clearErrorData())},exportToCSV:function(t,a){e(V.E.exportToCSV(t,a))},fetchBaselines:function(t,a){return e(U.w.fetchBaselines(t,a))}}}))(Q))}}]);
//# sourceMappingURL=190.df0580f0bce9a06b3eae.js.map