(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{831:function(e,a,t){"use strict";t.r(a),t.d(a,"BaselinesPage",(function(){return G}));var n=t(8),l=t.n(n),r=t(15),s=t.n(r),c=t(29),i=t.n(c),o=t(30),d=t.n(o),u=t(31),b=t.n(u),p=t(32),m=t.n(p),h=t(22),y=t.n(h),f=t(0),B=t.n(f),k=t(5),C=t.n(k),S=t(33),v=t(9),g=t(353),E=t(590),T=t(589),M=t(601),D=t(537),x=t(538),O=t(559),I=t(524),N=t(620),R=t(38),w=t.n(R),P=t(595),j=t(596),F=t(592),A=t(597),K=t(68),H=t(235),X=t(633),_=t(635),J=t(75);function L(e){var a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=y()(e);if(a){var l=y()(this).constructor;t=Reflect.construct(n,arguments,l)}else t=n.apply(this,arguments);return m()(this,t)}}var V=function(e){b()(n,e);var a,t=L(n);function n(e){var a;return i()(this,n),(a=t.call(this,e)).onSelect=function(e,t){(0,a.props.selectBaseline)([t.currentTarget.id],t.currentTarget.checked,"RADIO")},a.cancelModal=function(){var e=a.props,t=e.toggleCreateBaselineModal,n=e.clearSelectedBaselines;a.updateBaselineName(""),n("RADIO"),t()},a.checkKeyPress=function(e){"Enter"===e.key&&(e.preventDefault(),a.state.baselineName&&a.submitBaselineName())},a.renderModalBody=function(){var e,t=a.state,n=t.baselineName,l=t.copyBaselineChecked,r=t.copySystemChecked,s=a.props.error;return l?e=a.renderCopyBaseline():r&&(e=a.renderCopySystem()),B.a.createElement(B.a.Fragment,null,a.renderRadioButtons(),B.a.createElement("br",null),B.a.createElement("b",null,"Baseline name"),B.a.createElement("br",null),B.a.createElement(P.a,null,B.a.createElement(j.a,{type:"text",helperTextInvalid:s.hasOwnProperty("detail")?s.detail:null,fieldId:"name",isValid:!s.hasOwnProperty("status"),onKeyPress:a.checkKeyPress},B.a.createElement(F.a,{className:"fact-value",placeholder:"Baseline name",value:n,type:"text",onChange:a.updateBaselineName,isValid:!s.hasOwnProperty("status"),"aria-label":"baseline name"}))),B.a.createElement("br",null),B.a.createElement("br",null),e)},a.submitBaselineName=a.submitBaselineName.bind(w()(a)),a.state={baselineName:"",fromScratchChecked:!0,copyBaselineChecked:!1,copySystemChecked:!1,columns:[{title:""},{title:"Name",transforms:[O.a]},{title:"Last updated",transforms:[O.a]}]},a.updateBaselineName=function(e){a.setState({baselineName:e})},a.handleChecked=function(e,t){var n=t.currentTarget.value;a.props.clearSelectedBaselines("RADIO"),"fromScratchChecked"===n?a.setState({fromScratchChecked:!0,copyBaselineChecked:!1,copySystemChecked:!1}):"copyBaselineChecked"===n?a.setState({fromScratchChecked:!1,copyBaselineChecked:!0,copySystemChecked:!1}):a.setState({fromScratchChecked:!1,copyBaselineChecked:!1,copySystemChecked:!0})},a}return d()(n,[{key:"submitBaselineName",value:(a=s()(l.a.mark((function e(){var a,t,n,r,s,c,i,o,d,u,b,p,m;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.state,t=a.baselineName,n=a.fromScratchChecked,r=a.copyBaselineChecked,s=a.copySystemChecked,c=this.props,i=c.createBaseline,o=c.toggleCreateBaselineModal,d=c.selectedBaselineIds,u=c.history,b=c.entities,p=c.clearSelectedBaselines,m={display_name:t},e.prev=3,""===t){e.next=24;break}if(!n){e.next=11;break}return m.baseline_facts=[],e.next=9,i(m);case 9:e.next=21;break;case 11:if(1!==d.length||!r){e.next=17;break}return m={display_name:t},e.next=15,i(m,d[0]);case 15:e.next=21;break;case 17:if(1!==b.selectedSystemIds.length||!s){e.next=21;break}return m.inventory_uuid=b.selectedSystemIds[0],e.next=21,i(m);case 21:u.push("baselines/"+this.props.baselineData.id),o(),p("RADIO");case 24:e.next=28;break;case 26:e.prev=26,e.t0=e.catch(3);case 28:case"end":return e.stop()}}),e,this,[[3,26]])}))),function(){return a.apply(this,arguments)})},{key:"renderRadioButtons",value:function(){var e=this.state,a=e.fromScratchChecked,t=e.copyBaselineChecked,n=e.copySystemChecked;return B.a.createElement(B.a.Fragment,null,B.a.createElement(A.a,{isChecked:a,id:"create baseline",name:"baseline-create-options",label:"Create baseline from scratch",value:"fromScratchChecked",onChange:this.handleChecked}),B.a.createElement(A.a,{isChecked:t,id:"copy baseline",name:"baseline-create-options",label:"Copy an existing baseline",value:"copyBaselineChecked",onChange:this.handleChecked}),B.a.createElement(A.a,{isChecked:n,id:"copy system",name:"baseline-create-options",label:"Copy an existing system",value:"copySystemChecked",onChange:this.handleChecked}))}},{key:"renderCopyBaseline",value:function(){var e=this.props,a=e.baselineTableData,t=e.loading,n=e.createBaselineModalOpened,l=e.totalBaselines,r=this.state.columns;return B.a.createElement(B.a.Fragment,null,B.a.createElement("b",null,"Select baseline to copy from"),B.a.createElement(I.a,{tableId:"RADIO",onSelect:this.onSelect,tableData:a,loading:t,createBaselineModalOpened:n,columns:r,totalBaselines:l}))}},{key:"renderCopySystem",value:function(){return B.a.createElement(B.a.Fragment,null,B.a.createElement("b",null,"Select system to copy from"),B.a.createElement(X.a,{selectedSystemIds:[],createBaselineModal:!0}))}},{key:"renderActions",value:function(){var e=this.props,a=e.selectedBaselineIds,t=e.entities,n=this.state,l=n.baselineName,r=n.copyBaselineChecked,s=n.copySystemChecked;return""===l||r&&0===a.length||s&&t&&void 0!==t.selectedSystemIds&&0===t.selectedSystemIds.length?[B.a.createElement(K.a,{key:"confirm",variant:"primary",isDisabled:!0},"Create baseline"),B.a.createElement(K.a,{key:"cancel",variant:"link",onClick:this.cancelModal},"Cancel")]:[B.a.createElement(K.a,{key:"confirm",variant:"primary",onClick:this.submitBaselineName},"Create baseline"),B.a.createElement(K.a,{key:"cancel",variant:"link",onClick:this.cancelModal},"Cancel")]}},{key:"render",value:function(){var e=this.props.createBaselineModalOpened;return B.a.createElement(H.a,{width:"1200px",title:"Create baseline",isOpen:e,onClose:this.cancelModal,actions:this.renderActions()},this.renderModalBody())}}]),n}(f.Component);V.propTypes={createBaselineModalOpened:C.a.bool,createBaseline:C.a.func,selectBaseline:C.a.func,history:C.a.object,baselineData:C.a.array,toggleCreateBaselineModal:C.a.func,clearSelectedBaselines:C.a.func,entities:C.a.object,selectedBaselineIds:C.a.array,error:C.a.object,baselineTableData:C.a.array,loading:C.a.bool,page:C.a.number,perPage:C.a.number,totalBaselines:C.a.number};var q=Object(v.o)(Object(S.connect)((function(e){return{createBaselineModalOpened:e.createBaselineModalState.createBaselineModalOpened,baselineData:e.createBaselineModalState.baselineData,entities:e.entities,selectedBaselineIds:e.baselinesTableState.radioTable.selectedBaselineIds,error:e.createBaselineModalState.error,loading:e.baselinesTableState.radioTable.loading,emptyState:e.baselinesTableState.radioTable.emptyState,baselineTableData:e.baselinesTableState.radioTable.baselineTableData,page:e.baselinesTableState.radioTable.page,perPage:e.baselinesTableState.radioTable.perPage,totalBaselines:e.baselinesTableState.radioTable.totalBaselines}}),(function(e){return{toggleCreateBaselineModal:function(){return e(_.a.toggleCreateBaselineModal())},createBaseline:function(a,t){return e(_.a.createBaseline(a,t))},selectBaseline:function(a,t,n){return e(J.a.selectBaseline(a,t,n))},clearSelectedBaselines:function(a){return e(J.a.clearSelectedBaselines(a))}}}))(V)),U=t(385),Y=t(34);function z(e){var a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=y()(e);if(a){var l=y()(this).constructor;t=Reflect.construct(n,arguments,l)}else t=n.apply(this,arguments);return m()(this,t)}}var G=function(e){b()(n,e);var a,t=z(n);function n(e){var a;return i()(this,n),(a=t.call(this,e)).fetchBaseline=function(e){a.props.history.push("baselines/"+e)},a.onSelect=function(e,t,n){var l=a.props,r=l.baselineTableData;(0,l.selectBaseline)(-1===n?r.map((function(e){return e[0]})):[r[n][0]],t,"CHECKBOX")},a.onBulkSelect=function(e){var t=a.props,n=t.baselineTableData,l=t.selectBaseline,r=[];n.forEach((function(e){r.push(e[0])})),l(r,e,"CHECKBOX")},a.renderCardBody=function(){var e=a.props,t=e.emptyState,n=e.loading,l=e.baselineError,r=e.revertBaselineFetch,s=a.state,c=s.emptyStateMessage,i=s.errorMessage;return t&&!n?B.a.createElement(U.a,{icon:M.a,title:"No baselines",text:c,button:B.a.createElement(N.a,null)}):n&&200!==l.status&&void 0!==l.status?B.a.createElement(U.a,{icon:D.a,color:"#c9190b",title:"Baselines cannot be displayed",text:i,error:"Error "+a.props.baselineError.status+": "+a.props.baselineError.detail,button:B.a.createElement("a",{onClick:function(){return r("CHECKBOX")}},B.a.createElement(x.a,{className:"reload-button"}),"Retry")}):a.renderTable()},a.state={columns:[{title:"Name",transforms:[O.a]},{title:"Last updated",transforms:[O.a]},{title:""}],emptyStateMessage:["You currently have no baselines displayed.","Create a baseline to use in your Comparison analysis."],errorMessage:["The list of baselines cannot be displayed at this time. Please retry and if","the problem persists contact your system administrator.",""]},a}return d()(n,[{key:"componentDidMount",value:(a=s()(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.insights.chrome.auth.getUser();case 2:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)})},{key:"renderTable",value:function(){var e=this.props,a=e.baselineTableData,t=e.loading,n=e.createBaselineModalOpened,l=e.clearEditBaselineData,r=e.selectedBaselineIds,s=e.totalBaselines,c=this.state.columns;return l(),B.a.createElement(E.a,null,B.a.createElement("div",null,B.a.createElement(I.a,{tableId:"CHECKBOX",hasMultiSelect:!0,onSelect:this.onSelect,tableData:a,loading:t,columns:c,kebab:!0,createButton:!0,exportButton:!0,onClick:this.fetchBaseline,createBaselineModalOpened:n,onBulkSelect:this.onBulkSelect,selectedBaselineIds:r,totalBaselines:s})))}},{key:"render",value:function(){return B.a.createElement(B.a.Fragment,null,B.a.createElement(q,null),B.a.createElement(g.PageHeader,null,B.a.createElement(g.PageHeaderTitle,{title:"Baselines"})),B.a.createElement(g.Main,null,B.a.createElement(T.a,{className:"pf-t-light pf-m-opaque-100"},this.renderCardBody())))}}]),n}(f.Component);G.propTypes={loading:C.a.bool,baselineTableData:C.a.array,emptyState:C.a.bool,createBaselineModalOpened:C.a.bool,selectBaseline:C.a.func,history:C.a.object,baselineError:C.a.object,revertBaselineFetch:C.a.func,clearEditBaselineData:C.a.func,selectedBaselineIds:C.a.array,totalBaselines:C.a.number};a.default=Object(v.o)(Object(S.connect)((function(e){return{loading:e.baselinesTableState.checkboxTable.loading,emptyState:e.baselinesTableState.checkboxTable.emptyState,baselineTableData:e.baselinesTableState.checkboxTable.baselineTableData,createBaselineModalOpened:e.createBaselineModalState.createBaselineModalOpened,baselineError:e.baselinesTableState.checkboxTable.baselineError,selectedBaselineIds:e.baselinesTableState.checkboxTable.selectedBaselineIds,totalBaselines:e.baselinesTableState.checkboxTable.totalBaselines}}),(function(e){return{selectBaseline:function(a,t,n){return e(J.a.selectBaseline(a,t,n))},revertBaselineFetch:function(a){return e(J.a.revertBaselineFetch(a))},clearEditBaselineData:function(){return e(Y.a.clearEditBaselineData())}}}))(G))}}]);
//# sourceMappingURL=../sourcemaps/5.js.map