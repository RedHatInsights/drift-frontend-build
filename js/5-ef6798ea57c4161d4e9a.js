(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{1020:function(e,a,t){"use strict";t.r(a),t.d(a,"BaselinesPage",(function(){return te}));var n=t(26),s=t.n(n),l=t(51),r=t.n(l),i=t(82),c=t.n(i),o=t(83),d=t.n(o),u=t(84),m=t.n(u),b=t(85),p=t.n(b),h=t(50),y=t.n(h),f=t(1),B=t.n(f),S=t(7),k=t.n(S),C=t(75),v=t(52),E=t(305),g=t(625),T=t(186),P=t(632),M=t(615),I=t(616),x=t(642),D=t(259),O=t(189),R=t(1004),N=t(1009),w=t(118),F=t.n(w),j=t(627),H=t(628),W=t(626),K=t(15),A=t(614),X=t(143),_=t(276),q=t(665),J=t(1007),L=t(1011),Y=t(1012),z=t(422);function U(e){var a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=y()(e);if(a){var s=y()(this).constructor;t=Reflect.construct(n,arguments,s)}else t=n.apply(this,arguments);return p()(this,t)}}var V=function(e){m()(n,e);var a,t=U(n);function n(e){var a;return c()(this,n),(a=t.call(this,e)).onSelect=function(e,t,n){var s=a.props,l=s.baselineTableData;(0,s.selectBaseline)([l[n][0]],t,"RADIO")},a.cancelModal=function(){var e=a.props,t=e.toggleCreateBaselineModal,n=e.clearSelectedBaselines;a.updateBaselineName(""),n("RADIO"),t()},a.checkKeyPress=function(e){"Enter"===e.key&&(e.preventDefault(),a.state.baselineName&&a.submitBaselineName())},a.renderModalBody=function(){var e,t=a.state,n=t.baselineName,s=t.copyBaselineChecked,l=t.copySystemChecked,r=a.props.createBaselineError;return s?e=a.renderCopyBaseline():l&&(e=a.renderCopySystem()),B.a.createElement(B.a.Fragment,null,a.renderRadioButtons(),B.a.createElement("div",{className:"md-padding-top md-padding-bottom"},B.a.createElement(j.a,null,B.a.createElement(H.a,{label:"Baseline name",isRequired:!0,type:"text",helperTextInvalid:r.hasOwnProperty("detail")?r.detail:null,fieldId:"name",validated:r.hasOwnProperty("status")?"error":null,onKeyPress:a.checkKeyPress},B.a.createElement(W.a,{className:"fact-value",placeholder:"Baseline name",value:n,type:"text",onChange:a.updateBaselineName,validated:r.hasOwnProperty("status")?K.d.error:null,"aria-label":"baseline name"})))),e)},a.submitBaselineName=a.submitBaselineName.bind(F()(a)),a.state={baselineName:"",fromScratchChecked:!0,copyBaselineChecked:!1,copySystemChecked:!1,columns:[{title:"Name",transforms:[D.a]},{title:"Last updated",transforms:[D.a,Object(O.a)(40)]}]},a.updateBaselineName=function(e){a.setState({baselineName:e})},a.handleChecked=function(e,t){var n=t.currentTarget.value;a.props.clearSelectedBaselines("RADIO"),"fromScratchChecked"===n?a.setState({fromScratchChecked:!0,copyBaselineChecked:!1,copySystemChecked:!1}):"copyBaselineChecked"===n?a.setState({fromScratchChecked:!1,copyBaselineChecked:!0,copySystemChecked:!1}):a.setState({fromScratchChecked:!1,copyBaselineChecked:!1,copySystemChecked:!0})},a}return d()(n,[{key:"submitBaselineName",value:(a=r()(s.a.mark((function e(){var a,t,n,l,r,i,c,o,d,u,m,b,p,h;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.state,t=a.baselineName,n=a.fromScratchChecked,l=a.copyBaselineChecked,r=a.copySystemChecked,i=this.props,c=i.createBaseline,o=i.toggleCreateBaselineModal,d=i.selectedBaselineIds,u=i.history,m=i.entities,b=i.clearSelectedBaselines,p=i.selectedHSPIds,h={display_name:t},e.prev=3,""===t){e.next=30;break}if(!n){e.next=11;break}return h.baseline_facts=[],e.next=9,c(h);case 9:e.next=27;break;case 11:if(1!==d.length||!l){e.next=17;break}return h={display_name:t},e.next=15,c(h,d[0]);case 15:e.next=27;break;case 17:if(1!==m.selectedSystemIds.length||!r){e.next=23;break}return h.inventory_uuid=m.selectedSystemIds[0],e.next=21,c(h);case 21:e.next=27;break;case 23:if(1!==p.length||!r){e.next=27;break}return h.hsp_uuid=p[0],e.next=27,c(h);case 27:u.push("baselines/"+this.props.baselineData.id),o(),b("RADIO");case 30:e.next=34;break;case 32:e.prev=32,e.t0=e.catch(3);case 34:case"end":return e.stop()}}),e,this,[[3,32]])}))),function(){return a.apply(this,arguments)})},{key:"renderRadioButtons",value:function(){var e=this.state,a=e.fromScratchChecked,t=e.copyBaselineChecked,n=e.copySystemChecked;return B.a.createElement(B.a.Fragment,null,B.a.createElement(A.a,{isChecked:a,id:"create baseline",name:"baseline-create-options",label:"Create baseline from scratch",value:"fromScratchChecked",onChange:this.handleChecked}),B.a.createElement(A.a,{isChecked:t,id:"copy baseline",name:"baseline-create-options",label:"Copy an existing baseline",value:"copyBaselineChecked",onChange:this.handleChecked}),B.a.createElement(A.a,{isChecked:n,id:"copy system",name:"baseline-create-options",label:"Copy an existing system",value:"copySystemChecked",onChange:this.handleChecked}))}},{key:"renderCopyBaseline",value:function(){var e=this.props,a=e.baselineTableData,t=e.createBaselineModalOpened,n=e.hasReadPermissions,s=e.hasWritePermissions,l=e.loading,r=e.totalBaselines,i=this.state.columns;return B.a.createElement(B.a.Fragment,null,B.a.createElement("b",null,"Select baseline to copy from"),B.a.createElement(R.a,{tableId:"RADIO",onSelect:this.onSelect,tableData:a,loading:l,createBaselineModalOpened:t,columns:i,totalBaselines:r,hasReadPermissions:n,hasWritePermissions:s,hasMultiSelect:!1}))}},{key:"renderCopySystem",value:function(){var e=this.props,a=e.hasInventoryReadPermissions,t=e.entities,n=e.historicalProfiles;return B.a.createElement(B.a.Fragment,null,B.a.createElement("b",null,"Select system to copy from"),B.a.createElement("br",null),B.a.createElement(J.a,{selectedSystemIds:[],createBaselineModal:!0,hasHistoricalDropdown:!0,hasMultiSelect:!1,historicalProfiles:n,hasInventoryReadPermissions:a,entities:t,selectVariant:"radio"}))}},{key:"renderActions",value:function(){var e=this.props,a=e.selectedBaselineIds,t=e.selectedHSPIds,n=e.entities,s=this.state,l=s.baselineName,r=s.copyBaselineChecked,i=s.copySystemChecked,c=void 0===n||void 0===n.selectedSystemIds?[]:n.selectedSystemIds;return""===l||r&&0===a.length||i&&0===c.length&&0===t.length?[B.a.createElement(X.a,{key:"confirm",variant:"primary",isDisabled:!0},"Create baseline"),B.a.createElement(X.a,{key:"cancel",variant:"link",onClick:this.cancelModal},"Cancel")]:[B.a.createElement(X.a,{key:"confirm",variant:"primary",onClick:this.submitBaselineName},"Create baseline"),B.a.createElement(X.a,{key:"cancel",variant:"link",onClick:this.cancelModal},"Cancel")]}},{key:"render",value:function(){var e=this.props,a=e.createBaselineError,t=e.createBaselineModalOpened,n=e.globalFilterState,s=this.state.copySystemChecked;return B.a.createElement(_.a,{width:"1200px",title:"Create baseline",isOpen:t,onClose:this.cancelModal,actions:this.renderActions()},s?B.a.createElement(L.a,{globalFilterState:n}):null,a.status?B.a.createElement(q.a,{variant:"danger",isInline:!0,title:"Status: "+a.status},B.a.createElement("p",null,a.detail)):B.a.createElement("div",null),this.renderModalBody())}}]),n}(f.Component);V.propTypes={createBaselineModalOpened:k.a.bool,createBaseline:k.a.func,selectBaseline:k.a.func,history:k.a.object,baselineData:k.a.object,toggleCreateBaselineModal:k.a.func,clearSelectedBaselines:k.a.func,entities:k.a.object,selectedBaselineIds:k.a.array,createBaselineError:k.a.object,baselineTableData:k.a.array,loading:k.a.bool,totalBaselines:k.a.number,updatePagination:k.a.func,historicalProfiles:k.a.array,selectedHSPIds:k.a.array,hasInventoryReadPermissions:k.a.bool,hasReadPermissions:k.a.bool,hasWritePermissions:k.a.bool,globalFilterState:k.a.object};var G=Object(v.o)(Object(C.connect)((function(e){return{createBaselineModalOpened:e.createBaselineModalState.createBaselineModalOpened,baselineData:e.createBaselineModalState.baselineData,entities:e.entities,selectedBaselineIds:e.baselinesTableState.radioTable.selectedBaselineIds,createBaselineError:e.createBaselineModalState.createBaselineError,loading:e.baselinesTableState.radioTable.loading,emptyState:e.baselinesTableState.radioTable.emptyState,baselineTableData:e.baselinesTableState.radioTable.baselineTableData,totalBaselines:e.baselinesTableState.radioTable.totalBaselines,historicalProfiles:e.compareState.historicalProfiles,selectedHSPIds:e.historicProfilesState.selectedHSPIds,globalFilterState:e.globalFilterState}}),(function(e){return{toggleCreateBaselineModal:function(){return e(Y.a.toggleCreateBaselineModal())},createBaseline:function(a,t){return e(Y.a.createBaseline(a,t))},selectBaseline:function(a,t,n){return e(z.a.selectBaseline(a,t,n))},clearSelectedBaselines:function(a){return e(z.a.clearSelectedBaselines(a))}}}))(V)),Q=t(423),Z=t(1003),$=t(150),ee=t(424);function ae(e){var a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=y()(e);if(a){var s=y()(this).constructor;t=Reflect.construct(n,arguments,s)}else t=n.apply(this,arguments);return p()(this,t)}}var te=function(e){m()(n,e);var a,t=ae(n);function n(e){var a;return c()(this,n),(a=t.call(this,e)).fetchBaseline=function(e){a.props.history.push("baselines/"+e)},a.onSelect=function(e,t,n){var s=a.props,l=s.baselineTableData;(0,s.selectBaseline)(-1===n?l.map((function(e){return e[0]})):[l[n][0]],t,"CHECKBOX")},a.onBulkSelect=function(e){var t=a.props,n=t.baselineTableData,s=t.selectBaseline,l=[];n.forEach((function(e){l.push(e[0])})),s(l,e,"CHECKBOX")},a.renderEmptyState=function(e){var t=a.props,n=t.baselineError,s=t.emptyState,l=t.loading,r=t.revertBaselineFetch,i=a.state,c=i.emptyStateMessage,o=i.errorMessage;return n.status?200!==n.status&&void 0!==n.status?B.a.createElement(Q.a,{icon:M.a,color:"#c9190b",title:"Baselines cannot be displayed",text:o,error:"Error "+n.status+": "+n.detail,button:B.a.createElement("a",{onClick:function(){return r("CHECKBOX")}},B.a.createElement(I.a,{className:"reload-button"}),"Retry")}):void 0:B.a.createElement(Q.a,{icon:P.a,title:"No baselines",text:c,button:B.a.createElement(N.a,{emptyState:s,hasWritePermissions:e,loading:l})})},a.state={columns:[{title:"Name",transforms:[D.a,Object(O.a)(40)]},{title:"Last updated",transforms:[D.a,Object(O.a)(45)]},{title:"",transforms:[Object(O.a)(5)]}],emptyStateMessage:["You currently have no baselines displayed.","Create a baseline to use in your Comparison analysis."],errorMessage:["The list of baselines cannot be displayed at this time. Please retry and if","the problem persists contact your system administrator.",""]},a}return d()(n,[{key:"componentDidMount",value:(a=r()(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.insights.chrome.auth.getUser();case 2:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)})},{key:"renderTable",value:function(e,a){var t=this.props,n=t.baselineTableData,s=t.loading,l=t.createBaselineModalOpened,r=t.clearEditBaselineData,i=t.selectedBaselineIds,c=t.totalBaselines,o=this.state.columns;return r(),B.a.createElement(g.a,null,B.a.createElement("div",null,B.a.createElement(R.a,{tableId:"CHECKBOX",hasMultiSelect:!0,onSelect:this.onSelect,tableData:n,loading:s,columns:o,kebab:!0,createButton:!0,exportButton:!0,onClick:this.fetchBaseline,createBaselineModalOpened:l,onBulkSelect:this.onBulkSelect,selectedBaselineIds:i,totalBaselines:c,hasReadPermissions:e,hasWritePermissions:a})))}},{key:"render",value:function(){var e=this,a=this.props,t=a.baselineError,n=a.emptyState,s=a.loading,l=a.revertBaselineFetch;return B.a.createElement(ee.a.Consumer,null,(function(a){return B.a.createElement(B.a.Fragment,null,B.a.createElement(G,{hasInventoryReadPermissions:a.permissions.inventoryRead,hasReadPermissions:a.permissions.baselinesRead,hasWritePermissions:a.permissions.baselinesWrite}),B.a.createElement(E.PageHeader,null,B.a.createElement(E.PageHeaderTitle,{title:"Baselines"})),B.a.createElement(E.Main,null,!1===a.permissions.baselinesRead?B.a.createElement(Q.a,{icon:x.a,color:"#6a6e73",title:"You do not have access to Baselines",text:["Contact your organization administrator(s) for more information."]}):n&&!s?e.renderEmptyState(a.permissions.baselinesWrite):B.a.createElement(B.a.Fragment,null,B.a.createElement(Z.a,{error:!n&&t?t:{},onClose:l,tableId:"CHECKBOX"}),B.a.createElement(T.a,{className:"pf-t-light pf-m-opaque-100"},e.renderTable(a.permissions.baselinesRead,a.permissions.baselinesWrite)))))}))}}]),n}(f.Component);te.propTypes={loading:k.a.bool,baselineTableData:k.a.array,emptyState:k.a.bool,createBaselineModalOpened:k.a.bool,selectBaseline:k.a.func,history:k.a.object,baselineError:k.a.object,revertBaselineFetch:k.a.func,clearEditBaselineData:k.a.func,selectedBaselineIds:k.a.array,totalBaselines:k.a.number};a.default=Object(v.o)(Object(C.connect)((function(e){return{loading:e.baselinesTableState.checkboxTable.loading,emptyState:e.baselinesTableState.checkboxTable.emptyState,baselineTableData:e.baselinesTableState.checkboxTable.baselineTableData,createBaselineModalOpened:e.createBaselineModalState.createBaselineModalOpened,baselineError:e.baselinesTableState.checkboxTable.baselineError,selectedBaselineIds:e.baselinesTableState.checkboxTable.selectedBaselineIds,totalBaselines:e.baselinesTableState.checkboxTable.totalBaselines}}),(function(e){return{selectBaseline:function(a,t,n){return e(z.a.selectBaseline(a,t,n))},revertBaselineFetch:function(a){return e(z.a.revertBaselineFetch(a))},clearEditBaselineData:function(){return e($.a.clearEditBaselineData())}}}))(te))}}]);
//# sourceMappingURL=../sourcemaps/5.js.map