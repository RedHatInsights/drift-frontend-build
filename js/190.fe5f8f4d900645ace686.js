(self.webpackChunkdrift_frontend=self.webpackChunkdrift_frontend||[]).push([[190],{27916:(e,t,a)=>{"use strict";a.r(t),a.d(t,{EditBaseline:()=>Q,default:()=>$});var n=a(87757),r=a.n(n),o=a(48926),l=a.n(o),i=a(34575),c=a.n(i),s=a(93913),u=a.n(s),d=a(81506),p=a.n(d),f=a(2205),m=a.n(f),h=a(78585),b=a.n(h),y=a(29754),v=a.n(y),E=a(41609),g=a.n(E),k=a(25558),B=a.n(k),D=a(45697),C=a.n(D),F=a(47194),S=a(70983),w=a(35115),O=a(87473),x=a(93),R=a(73540),T=a(64663),N=a(50902);const I=function(e){var t=0,a=0;return e.forEach((function(e){e.selected?N.Z.isCategory(e)?t+=1:a+=1:N.Z.isCategory(e)&&N.Z.baselineSubFacts(e).forEach((function(e){e.selected&&(a+=1)}))})),{categories:t,facts:a}};var M=function(e){m()(r,e);var t,a,n=(t=r,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=v()(t);if(a){var r=v()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b()(this,e)});function r(e){var t;return c()(this,r),(t=n.call(this,e)).isDisabled=function(){var e=t.props.editBaselineTableData,a=!0;return e.forEach((function(e){e.selected&&(a=!1),N.Z.isCategory(e)&&N.Z.baselineSubFacts(e).forEach((function(e){e.selected&&(a=!1)}))})),a},t.state={kebabOpened:!1,modalOpened:!1},t.toggleKebab=function(){var e=t.state.kebabOpened;t.setState({kebabOpened:!e})},t.toggleModalOpened=function(){var e=t.state.modalOpened;t.setState({modalOpened:!e,kebabOpened:!1})},t}return u()(r,[{key:"render",value:function(){var e,t,a,n=this.state,r=n.kebabOpened,o=n.modalOpened,l=this.props.editBaselineTableData,i=I(l),c=i.categories,s=i.facts;return c>0&&(t=1===c?"1 category":c+" categories"),s>0&&(a=1===s?"1 fact":s+" facts"),e=[B().createElement(O.DropdownItem,{key:"multi-delete",component:"button","data-ouia-component-id":"delete-facts-dropdown-item",onClick:this.toggleModalOpened,isDisabled:!(l.length>0)||this.isDisabled()},"Delete facts")],B().createElement(B().Fragment,null,o?B().createElement(T.Z,{toggleModal:this.toggleModalOpened.bind(this),modalOpened:o,categoryMessage:t,factMessage:a}):null,B().createElement(O.Dropdown,{style:{float:"left"},toggle:B().createElement(O.KebabToggle,{"data-ouia-component-id":"delete-facts-dropdown-toggle","data-ouia-component-type":"PF4/DropdownToggle",onToggle:this.toggleKebab}),isOpen:r,dropdownItems:e,isPlain:!0,ouiaId:"delete-facts-dropdown"}))}}]),r}(k.Component);M.propTypes={editBaselineTableData:C().array};const P=(0,S.connect)((function(e){return{editBaselineTableData:e.editBaselineState.editBaselineTableData}}),null)(M);var V=a(92637);var Z=function(e){m()(r,e);var t,a,n=(t=r,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=v()(t);if(a){var r=v()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b()(this,e)});function r(e){var t;return c()(this,r),(t=n.call(this,e)).handleAddFact=function(){var e=t.props,a=e.setFactData,n=e.toggleFactModal;a({factName:"",factValue:"",fact:[]}),n()},t}return u()(r,[{key:"render",value:function(){var e=this.props,t=e.editBaselineEmptyState,a=e.hasWritePermissions,n=e.isDisabled;return B().createElement(B().Fragment,null,a||void 0===a?B().createElement(O.Button,{variant:"primary",isDisabled:n,onClick:this.handleAddFact,ouiaId:"add-fact-or-category-button"},"Add fact or category"):B().createElement(O.Tooltip,{content:B().createElement("div",null,"You do not have permissions to perform this action")},B().createElement("div",{className:t?"tooltip-button-margin":null},B().createElement(O.Button,{variant:"primary",isDisabled:!0,onClick:this.handleAddFact,ouiaId:"add-fact-or-category-button"},"Add fact or category"))))}}]),r}(k.Component);Z.propTypes={toggleFactModal:C().func,setFactData:C().func,isDisabled:C().bool,hasWritePermissions:C().bool,editBaselineEmptyState:C().bool};const A=(0,S.connect)(null,(function(e){return{toggleFactModal:function(){return e(V.E.toggleFactModal())},setFactData:function(t){return e(V.E.setFactData(t))}}}))(Z);var j=a(68185),W=a(92650);var _=function(e){m()(r,e);var t,a,n=(t=r,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=v()(t);if(a){var r=v()(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return b()(this,e)});function r(e){var t;return c()(this,r),(t=n.call(this,e)).onToggle=function(){var e=t.state.dropdownOpen;t.setState({dropdownOpen:!e})},t.state={bulkSelectItems:[{title:"Select all",key:"select-all",onClick:function(){return t.props.onBulkSelect(!0)}},{title:"Select none",key:"select-none",onClick:function(){return t.props.onBulkSelect(!1)}}],dropdownOpen:!1,dropdownItems:[B().createElement(O.DropdownItem,{key:"export-to-CSV",component:"button",ouiaId:"edit-baseline-export-to-csv",onClick:function(){return t.props.exportToCSV(t.props.tableData,t.props.baselineData)}},"Export to CSV")]},t}return u()(r,[{key:"render",value:function(){var e=this.props,t=e.hasWritePermissions,a=e.isDisabled,n=e.onBulkSelect,r=e.selected,o=e.totalFacts,l=this.state,i=l.bulkSelectItems,c=l.dropdownItems,s=l.dropdownOpen;return B().createElement(O.Toolbar,{className:"drift-toolbar"},B().createElement(O.ToolbarContent,null,B().createElement(O.ToolbarItem,null,B().createElement(w.BulkSelect,{count:r>0?r:null,items:i,checked:j.Z.findCheckedValue(o,r),onSelect:function(){return n(!r>0)},isDisabled:a,ouiaId:"edit-baseline-bulk-selector-dropdown"})),B().createElement(O.ToolbarItem,null,B().createElement(A,{isDisabled:a,hasWritePermissions:t})),B().createElement(O.ToolbarGroup,{variant:"icon-button-group"},B().createElement(O.ToolbarItem,null,B().createElement(W.Z,{dropdownItems:c,isOpen:s,onToggle:this.onToggle,ouiaId:"edit-baseline-export-dropdown"})),B().createElement(O.ToolbarItem,null,B().createElement(P,null)))))}}]),r}(k.Component);_.propTypes={isDisabled:C().bool,onBulkSelect:C().func,selected:C().any,totalFacts:C().number,exportToCSV:C().func,tableData:C().array,baselineData:C().object,hasWritePermissions:C().bool};const K=_;var H=a(39616);var L=function(e){m()(i,e);var t,a,n,o=(a=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=v()(a);if(n){var r=v()(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return b()(this,e)});function i(e){var t;return c()(this,i),(t=o.call(this,e)).checkKeyPress=function(e){"Enter"===e.key&&(e.preventDefault(),t.confirmModal())},t.cancelFact=t.cancelFact.bind(p()(t)),t.confirmModal=t.confirmModal.bind(p()(t)),t.renderCategoryCheckbox=t.renderCategoryCheckbox.bind(p()(t)),t.renderFactInput=t.renderFactInput.bind(p()(t)),t.renderValueInput=t.renderValueInput.bind(p()(t)),t.renderModalBody=t.renderModalBody.bind(p()(t)),t.state={factName:t.props.factName,factValue:t.props.factValue,factData:t.props.factData,isCategory:t.props.isCategory},t.state.isAddFact=""===t.props.factName&&""===t.props.factValue,t.state.isEditFact=""!==t.props.factName&&""!==t.props.factValue,t.handleChange=function(e){t.setState({isCategory:e})},t.handleNewName=function(e){t.setState({factName:e})},t.handleNewValue=function(e){t.setState({factValue:e})},t}return u()(i,[{key:"cancelFact",value:function(){(0,this.props.toggleFactModal)()}},{key:"confirmModal",value:(t=l()(r().mark((function e(){var t,a,n,o,l,i,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.toggleFactModal,n=t.baselineData,o=t.patchBaseline,l=t.fetchBaselineData,i=this.state.isAddFact,"",e.prev=3,c=i?this.addFact(n):this.editFact(n),e.next=7,o(n.id,c);case 7:e.sent&&l(n.id),a(),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(3);case 14:case"end":return e.stop()}}),e,this,[[3,12]])}))),function(){return t.apply(this,arguments)})},{key:"addFact",value:function(e){var t=this.state,a=t.isCategory,n=t.factName,r=t.factValue,o=t.factData,l=N.Z.buildNewFactData(a,n,r,o);return N.Z.makeAddFactPatch(l,e)}},{key:"editFact",value:function(e){var t=this.state,a=t.isCategory,n=t.factName,r=t.factValue,o=t.factData,l=N.Z.buildEditedFactData(a,this.props.factName,n,this.props.factValue,r,o);return N.Z.makeEditFactPatch(l,e,o)}},{key:"renderCategoryCheckbox",value:function(){var e=this.state,t=e.isCategory,a=e.isEditFact;return B().createElement(O.Checkbox,{"data-ouia-component-type":"PF4/Checkbox","data-ouia-component-id":"category-checkbox",className:"sm-padding-bottom","aria-label":"controlled checkbox example",label:"This is a category",id:"isCategory",name:"isCategory",onChange:this.handleChange,isChecked:t,isDisabled:t&&a})}},{key:"renderFactInput",value:function(){var e=this.props.inlineError,t=this.state,a=t.factName,n=t.isCategory;return B().createElement("div",{className:"fact-value"},B().createElement(O.FormGroup,{label:n?"Category name":"Fact name",isRequired:!0,helperTextInvalid:Object.prototype.hasOwnProperty.call(e,"detail")?e.detail:null,validated:Object.prototype.hasOwnProperty.call(e,"status")?"error":null,fieldId:"fact name",onKeyPress:this.checkKeyPress},B().createElement(O.TextInput,{"data-ouia-component-type":"PF4/TextInput","data-ouia-component-id":"fact-name-input",value:a,type:"text",placeholder:"Name",onChange:this.handleNewName,validated:Object.prototype.hasOwnProperty.call(e,"status")?O.ValidatedOptions.error:null,"aria-label":"fact name"})))}},{key:"renderValueInput",value:function(){var e=this.props.inlineError,t=this.state.factValue;return B().createElement("div",{className:"fact-value"},B().createElement(O.FormGroup,{label:"Value",isRequired:!0,helperTextInvalid:Object.prototype.hasOwnProperty.call(e,"detail")?e.detail:null,validated:Object.prototype.hasOwnProperty.call(e,"status")?"error":null,fieldId:"fact value",onKeyPress:this.checkKeyPress},B().createElement(O.TextInput,{"data-ouia-component-type":"PF4/TextInput","data-ouia-component-id":"value-input",value:t,type:"text",placeholder:"Value",onChange:this.handleNewValue,validated:Object.prototype.hasOwnProperty.call(e,"status")?O.ValidatedOptions.error:null,"aria-label":"value"})))}},{key:"renderModalBody",value:function(){var e=this.props,t=e.inlineError,a=e.isSubFact,n=this.state,r=n.isAddFact,o=n.isCategory;return B().createElement(B().Fragment,null,t.status?B().createElement(O.Alert,{variant:"danger",isInline:!0,title:"Status: "+t.status},B().createElement("p",null,t.detail)):B().createElement("div",null),r&&!a||o?this.renderCategoryCheckbox():null,B().createElement(O.Form,null,this.renderFactInput(),o?null:this.renderValueInput()))}},{key:"title",value:function(){var e=this.props.isSubFact,t=this.state,a=t.isAddFact,n=t.isEditFact,r=t.isCategory,o="Add fact";return!0!==n||r||e?!0===a&&!0===r?o="Add category":!0===a&&!0===e?o="Add sub fact":!0===n&&!0===e?o="Edit sub fact":!0===r&&(o="Edit category"):o="Edit fact",o}},{key:"render",value:function(){var e=this.props.factModalOpened;return B().createElement(O.Modal,{className:"drift",ouiaId:"add-fact-modal",variant:O.ModalVariant.small,title:this.title(),isOpen:e,onClose:this.cancelFact,actions:[B().createElement(O.Button,{key:"confirm",variant:"primary",ouiaId:"fact-modal-save-button",onClick:this.confirmModal},"Save"),B().createElement(O.Button,{key:"cancel",variant:"link",ouiaId:"fact-modal-cancel-button",onClick:this.cancelFact},"Cancel")]},this.renderModalBody())}}]),i}(k.Component);L.propTypes={toggleFactModal:C().func,factModalOpened:C().bool,factName:C().string,factValue:C().string,factData:C().object,isCategory:C().bool,isSubFact:C().bool,baselineData:C().object,patchBaseline:C().func,fetchBaselineData:C().func,inlineError:C().object};const q=(0,S.connect)((function(e){return{factModalOpened:e.editBaselineState.factModalOpened,factName:e.editBaselineState.factName,factValue:e.editBaselineState.factValue,factData:e.editBaselineState.factData,isCategory:e.editBaselineState.isCategory,isSubFact:e.editBaselineState.isSubFact,baselineData:e.editBaselineState.baselineData,inlineError:e.editBaselineState.inlineError}}),(function(e){return{toggleFactModal:function(){return e(V.E.toggleFactModal())},patchBaseline:function(t,a){return e(V.E.patchBaseline(t,a))},fetchBaselineData:function(t){return e(V.E.fetchBaselineData(t))}}}))(L);var z=function(e){m()(i,e);var t,a,n,o=(a=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=v()(a);if(n){var r=v()(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return b()(this,e)});function i(e){var t;return c()(this,i),(t=o.call(this,e)).cancelModal=function(){var e=t.props,a=e.toggleEditNameModal,n=e.baselineData;t.updateBaselineName(n.display_name),a()},t.checkKeyPress=function(e){"Enter"===e.key&&(e.preventDefault(),t.confirmModal())},t.state={baselineName:t.props.baselineData.display_name},t.updateBaselineName=function(e){t.setState({baselineName:e})},t.confirmModal=t.confirmModal.bind(p()(t)),t}return u()(i,[{key:"confirmModal",value:(t=l()(r().mark((function e(){var t,a,n,o,l;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.baselineName,a=this.props,n=a.baselineData,o=a.patchBaseline,l=a.toggleEditNameModal,e.prev=2,e.next=5,o(n.id,{display_name:t,facts_patch:[]});case 5:l(),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(2);case 10:case"end":return e.stop()}}),e,this,[[2,8]])}))),function(){return t.apply(this,arguments)})},{key:"renderModalBody",value:function(){var e=this.state.baselineName,t=this.props.error,a=Object.prototype.hasOwnProperty.call(t,"status")?O.ValidatedOptions.error:null;return B().createElement("div",{className:"fact-value"},B().createElement(O.Form,null,B().createElement(O.FormGroup,{label:"Baseline title",isRequired:!0,fieldId:"baseline name",helperTextInvalid:Object.prototype.hasOwnProperty.call(t,"detail")?t.detail:null,validated:a,onKeyPress:this.checkKeyPress},B().createElement(O.TextInput,{value:e,type:"text",onChange:this.updateBaselineName,validated:a,"aria-label":"baseline name"}))))}},{key:"render",value:function(){var e=this.props,t=e.modalOpened,a=e.error;return B().createElement(O.Modal,{className:"drift",variant:O.ModalVariant.small,title:"Edit name",isOpen:t,onClose:this.cancelModal,actions:[B().createElement(O.Button,{key:"confirm",variant:"primary",ouiaId:"save",onClick:this.confirmModal},"Save"),B().createElement(O.Button,{key:"cancel",variant:"link",ouiaId:"cancel",onClick:this.cancelModal},"Cancel")]},a.status&&B().createElement(O.Alert,{variant:"danger",isInline:!0,title:"Status: "+a.status},B().createElement("p",null,a.detail)),this.renderModalBody())}}]),i}(k.Component);z.propTypes={baselineData:C().object,toggleEditNameModal:C().func,modalOpened:C().bool,patchBaseline:C().func,error:C().object};const G=(0,S.connect)(null,(function(e){return{patchBaseline:function(t,a){return e(V.E.patchBaseline(t,a))}}}))(z);var U=a(53847),X=a(31222),Y=a(86758),J=a(26475);var Q=function(e){m()(i,e);var t,a,n,o=(a=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=v()(a);if(n){var r=v()(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return b()(this,e)});function i(e){var t;return c()(this,i),(t=o.call(this,e)).retryBaselineFetch=function(){(0,t.props.clearErrorData)(),t.fetchBaselineId()},t.renderPageHeader=function(e,a){var n=t.state.modalOpened,r=t.props,o=r.baselineData,l=r.baselineDataLoading,i=r.inlineError;return l?B().createElement(w.PageHeader,null,B().createElement("div",null,B().createElement(w.Skeleton,{size:w.SkeletonSize.lg}))):void 0!==o?B().createElement(B().Fragment,null,B().createElement(G,{baselineData:o,modalOpened:n,toggleEditNameModal:t.toggleEditNameModal,error:i}),B().createElement(w.PageHeader,null,t.renderBreadcrumb(o,e),B().createElement("div",{id:"edit-baseline-title"},t.renderPageTitle(o,e,a)))):B().createElement(w.PageHeader,null,t.renderBreadcrumb(),B().createElement(w.PageHeaderTitle,{title:"Baseline"}))},t.onSelect=function(e,a){var n,r=t.props,o=r.editBaselineTableData,l=r.selectFact,i=[],c=Number(a.target.name);o.forEach((function(e){e[X.ki]===c?n=e:N.Z.isCategory(e)&&N.Z.baselineSubFacts(e).forEach((function(e){e[X.ki]===c&&(n=e)}))})),i=[n[0]],N.Z.isCategory(n)&&N.Z.baselineSubFacts(n).forEach((function(e){i.push(e[X.ki])})),l(i,e)},t.onBulkSelect=function(e){var a=t.props,n=a.editBaselineTableData,r=a.selectFact,o=[];n.forEach((function(e){o.push(e[X.ki]),N.Z.isCategory(e)&&N.Z.baselineSubFacts(e).forEach((function(e){o.push(e[X.ki])}))})),r(o,e)},t.renderCheckbox=function(e){var a;return N.Z.isCategory(e)?a="category-"+e[X.ki]:"string"==typeof e[X.fO]&&(a="fact-"+e[X.ki]),B().createElement(O.Checkbox,{"data-ouia-component-type":"PF4/Checkbox","data-ouia-component-id":"checkbox-"+e[X.Ov],isChecked:e.selected,onChange:t.onSelect,id:a,name:e[X.ki]})},t.state={modalOpened:!1,errorMessage:["The baseline cannot be displayed at this time. Please retry and if","the problem persists contact your system administrator.",""],loadingColumns:[{title:"Fact",transforms:[(0,R.cellWidth)(40)]},{title:"Value",transforms:[(0,R.cellWidth)(45)]},{title:"",transforms:[(0,R.cellWidth)(5)]}]},t.fetchBaselineId(),t.renderBreadcrumb=t.renderBreadcrumb.bind(p()(t)),t.goToBaselinesList=t.goToBaselinesList.bind(p()(t)),t.toggleEditNameModal=function(){var e=t.state.modalOpened,a=t.props.clearErrorData;t.setState({modalOpened:!e}),a()},t}return u()(i,[{key:"componentDidMount",value:(t=l()(r().mark((function e(){var t,a,n,o,l,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.props.match.params,e.next=3,window.insights.chrome.auth.getUser();case 3:return e.next=5,null===(t=window.insights)||void 0===t||null===(a=t.chrome)||void 0===a||null===(n=a.appAction)||void 0===n?void 0:n.call(a,"baseline-view");case 5:return e.next=7,null===(o=window.insights)||void 0===o||null===(l=o.chrome)||void 0===l?void 0:l.appObjectId(i.id);case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"componentDidUpdate",value:function(){this.props.baselineData&&(document.title=this.props.baselineData.display_name+" - Baselines - Drift | Red Hat Insights")}},{key:"fetchBaselineId",value:function(){var e=this.props,t=e.match.params;(0,e.fetchBaselineData)(t.id)}},{key:"goToBaselinesList",value:function(){var e=this.props,t=e.clearBaselineData,a=e.fetchBaselines,n=e.history;t("CHECKBOX"),a("CHECKBOX"),n.push("/baselines")}},{key:"renderBreadcrumb",value:function(e,t){var a=this;return B().createElement(O.Breadcrumb,{ouiaId:"edit-baseline-breadcrumb"},B().createElement(O.BreadcrumbItem,null,B().createElement("a",{onClick:function(){return a.goToBaselinesList()}},"Baselines")),e&&t?B().createElement(O.BreadcrumbHeading,null,e.display_name):null)}},{key:"renderPageTitle",value:function(e,t,a){var n=this;return t?a?B().createElement(B().Fragment,null,B().createElement("span",{className:"pf-c-title pf-m-2xl"},g()(e)?null:e.display_name),B().createElement("span",null,B().createElement(x.EditAltIcon,{className:"pointer not-active edit-icon-margin","data-ouia-component-id":"edit-baseline-name-button","data-ouia-component-type":"PF4/Button",onClick:function(){return n.toggleEditNameModal()}}))):B().createElement(B().Fragment,null,g()(e)?null:e.display_name):B().createElement(B().Fragment,null,"Baseline")}},{key:"renderHeaderRow",value:function(e){return B().createElement("tr",{key:"edit-baseline-table-header","data-ouia-component-type":"PF4/TableHeaderRow","data-ouia-component-id":"edit-baseline-table-header-row"},e?B().createElement("th",null):null,B().createElement("th",{className:"edit-baseline-header"},B().createElement("div",null,"Fact")),B().createElement("th",{className:"edit-baseline-header"},B().createElement("div",null,"Value")),B().createElement("th",null))}},{key:"renderLoadingRows",value:function(){var e=this.state.loadingColumns;return B().createElement(w.SkeletonTable,{columns:e,rowSize:8,onSelect:!0,canSelectAll:!1,isSelectable:!0})}},{key:"renderExpandableRowButton",value:function(e){var t=this;return this.props.expandedRows.includes(e)?B().createElement(x.AngleDownIcon,{className:"pointer active-blue","data-ouia-component-type":"PF4/Button","data-ouia-component-id":"expand-category-button-"+e,onClick:function(){return t.props.expandRow(e)}}):B().createElement(x.AngleRightIcon,{className:"pointer","data-ouia-component-type":"PF4/Button","data-ouia-component-id":"expand-category-button-"+e,onClick:function(){return t.props.expandRow(e)}})}},{key:"renderRowData",value:function(e,t){var a=this,n=this.props,r=n.expandedRows,o=n.baselineData,l=[],i=[],c=o.baseline_facts.find((function(t){return t.name===e[X.Ov]}));return t&&l.push(B().createElement("td",{className:r.includes(e[X.Ov])?"pf-c-table__check nested-fact":"pf-c-table__check"},this.renderCheckbox(e))),N.Z.isCategory(e)?(l.push(B().createElement("td",null,this.renderExpandableRowButton(e[X.Ov])," ",e[X.Ov])),l.push(B().createElement("td",null)),l.push(N.Z.renderKebab({factName:e[X.Ov],factData:c,isCategory:!0,hasWritePermissions:t})),i.push(B().createElement("tr",{"data-ouia-component-type":"PF4/TableRow","data-ouia-component-id":"edit-baseline-table-row-"+c.name,key:e[X.Ov]},l)),r.includes(e[X.Ov])&&N.Z.baselineSubFacts(e).forEach((function(e){l=[],t&&l.push(B().createElement("td",{className:"pf-c-table__check nested-fact"},a.renderCheckbox(e))),l.push(B().createElement("td",null,B().createElement("p",{className:"child-row"},e[X.Ov]))),l.push(B().createElement("td",null,e[X.fO])),l.push(N.Z.renderKebab({factName:e[X.Ov],factValue:e[X.fO],factData:c,isSubFact:!0,hasWritePermissions:t})),i.push(B().createElement("tr",{"data-ouia-component-type":"PF4/TableRow","data-ouia-component-id":"edit-baseline-table-row-"+e[X.Ov],category:c.name,key:e[X.Ov]},l))}))):(l.push(B().createElement("td",null,e[X.Ov])),l.push(B().createElement("td",null,e[X.fO])),l.push(N.Z.renderKebab({factName:e[X.Ov],factValue:e[X.fO],factData:c,hasWritePermissions:t})),i.push(B().createElement("tr",{"data-ouia-component-type":"PF4/TableRow","data-ouia-component-id":"edit-baseline-table-row-"+(null==c?void 0:c.name),key:e[X.Ov]},l))),i}},{key:"renderRows",value:function(e){var t=this.props.editBaselineTableData,a=[],n=[];if(0!==t.length)for(var r=0;r<t.length;r+=1)n=this.renderRowData(t[r],e),a.push(n);return a}},{key:"renderEmptyState",value:function(e){var t=this,a=this.props,n=a.editBaselineEmptyState,r=a.editBaselineError,o=this.state.errorMessage;return 200!==r.status&&void 0!==r.status?B().createElement(Y.Z,{icon:x.ExclamationCircleIcon,color:"#c9190b",title:"Baseline cannot be displayed",text:o,error:"Error "+r.status+": "+r.detail,button:B().createElement("a",{onClick:function(){return t.retryBaselineFetch()}},B().createElement(x.UndoIcon,{className:"reload-button"}),"Retry")}):B().createElement(Y.Z,{title:"No facts",text:["No facts or categories have been added to this baseline yet."],button:B().createElement(A,{hasWritePermissions:e,editBaselineEmptyState:n})})}},{key:"renderTable",value:function(e){return B().createElement("table",{className:"pf-c-table ins-c-table pf-m-grid-md ins-entity-table"},B().createElement("thead",null,this.renderHeaderRow(e)),B().createElement("tbody",{key:"edit-baseline-table"},this.renderRows(e)))}},{key:"render",value:function(){var e=this,t=this.props,a=t.baselineData,n=t.baselineDataLoading,r=t.editBaselineTableData,o=t.exportToCSV,l=t.factModalOpened,i=t.editBaselineEmptyState,c=t.editBaselineError,s=t.clearErrorData,u=N.Z.findSelected(r);return B().createElement(J.B.Consumer,null,(function(t){return B().createElement(B().Fragment,null,e.renderPageHeader(t.permissions.baselinesRead,t.permissions.baselinesWrite),B().createElement(w.Main,null,!1===t.permissions.baselinesRead?B().createElement(Y.Z,{icon:x.LockIcon,color:"#6a6e73",title:"You do not have access to view this Baseline",text:["Contact your organization administrator(s) for more information."]}):B().createElement(B().Fragment,null,l?B().createElement(q,null):B().createElement("div",null),B().createElement(H.Z,{error:!i&&c.status?c:{},onClose:s}),i?e.renderEmptyState(t.permissions.baselinesWrite):B().createElement(O.Card,{className:"pf-t-light pf-m-opaque-100"},B().createElement(O.CardBody,null,B().createElement(K,{selected:u,onBulkSelect:e.onBulkSelect,isDisabled:0===r.length||!t.permissions.baselinesWrite,totalFacts:N.Z.findFactCount(r),baselineData:a,exportToCSV:o,tableData:r,hasWritePermissions:t.permissions.baselinesWrite}),n?e.renderLoadingRows():e.renderTable(t.permissions.baselinesWrite))))))}))}}]),i}(k.Component);Q.propTypes={history:C().object,match:C().any,clearBaselineData:C().func,baselineData:C().object,baselineDataLoading:C().bool,fetchBaselineData:C().func,factModalOpened:C().bool,editBaselineTableData:C().array,expandRow:C().func,expandedRows:C().array,selectFact:C().func,clearErrorData:C().func,editBaselineError:C().object,inlineError:C().object,editBaselineEmptyState:C().bool,exportToCSV:C().func,hasWritePermissions:C().bool,fetchBaselines:C().func};const $=(0,F.withRouter)((0,S.connect)((function(e){return{baselineData:e.editBaselineState.baselineData,baselineDataLoading:e.editBaselineState.baselineDataLoading,factModalOpened:e.editBaselineState.factModalOpened,editBaselineTableData:e.editBaselineState.editBaselineTableData,expandedRows:e.editBaselineState.expandedRows,editBaselineError:e.editBaselineState.editBaselineError,editBaselineEmptyState:e.editBaselineState.editBaselineEmptyState,inlineError:e.editBaselineState.inlineError}}),(function(e){return{clearBaselineData:function(t){return e(U.w.clearBaselineData(t))},expandRow:function(t){return e(V.E.expandRow(t))},fetchBaselineData:function(t){return e(V.E.fetchBaselineData(t))},selectFact:function(t,a){return e(V.E.selectFact(t,a))},clearErrorData:function(){return e(V.E.clearErrorData())},exportToCSV:function(t,a){e(V.E.exportToCSV(t,a))},fetchBaselines:function(t,a){return e(U.w.fetchBaselines(t,a))}}}))(Q))}}]);
//# sourceMappingURL=190.fe5f8f4d900645ace686.js.map