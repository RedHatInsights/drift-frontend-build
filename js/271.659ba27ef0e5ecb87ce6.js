(self.webpackChunkdrift_frontend=self.webpackChunkdrift_frontend||[]).push([[271],{3271:(e,t,r)=>{"use strict";r.r(t),r.d(t,{DriftPage:()=>Pe,default:()=>Re});var n=r(87757),a=r.n(n),s=r(48926),o=r.n(s),i=r(34575),c=r.n(i),l=r(93913),u=r.n(l),d=r(2205),p=r.n(d),f=r(78585),m=r.n(f),h=r(29754),y=r.n(h),v=r(25558),S=r.n(v),g=r(45697),b=r.n(g),F=r(334),I=r(12167),E=r(3658),P=r(37020),R=r(58909),w=r(62193),C=r(481),k=r(9629),x=r(319),T=r.n(x),B=r(17563),D=r(59052);function H(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4?arguments[4]:void 0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],i=arguments.length>6?arguments[6]:void 0,c=arguments.length>7?arguments[7]:void 0,l=arguments.length>8?arguments[8]:void 0,u=arguments.length>9?arguments[9]:void 0,d=[].concat(T()(o),T()(i&&!o.includes(i)?[i]:[])),p=T()((null==c||null===(t=c.filter((function(e){return e.selected})))||void 0===t?void 0:t.map((function(e){var t=e.filter;return null==t?void 0:t.toLowerCase()})))||[]),f=[].concat(T()([D.aW,D.jo].includes(u)?["".concat(u===D.jo?"-":"","state")]:[]),T()([D.aW,D.jo].includes(l)?["".concat(l===D.jo?"-":"","fact")]:[])),m="?";e.push({search:m+B.stringify({system_ids:r,baseline_ids:n,hsp_ids:a,reference_id:s})}),m="&",r.length||n.length||a.length||s||(m=""),e.push({search:e.location.search+m+B.stringify({"filter[name]":d,"filter[state]":p,sort:f},{arrayFormat:"comma",encode:!1})})}var A=r(59713),N=r.n(A),O=r(63038),M=r.n(O),j=r(81506),L=r.n(j),_=r(42953),V=r(51248),W=r(74966),U=r(25391),Z=r(78219),K=r(67232);var G=function(e){p()(i,e);var t,r,n,s=(r=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y()(r);if(n){var a=y()(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return m()(this,e)});function i(e){var t;return c()(this,i),(t=s.call(this,e)).onSelect=function(e,r,n){var a=t.props,s=a.baselineTableData;(0,a.selectBaseline)(-1===n?s.map((function(e){return e[0]})):[s[n][0]],r,"COMPARISON")},t.onBulkSelect=function(e){var r=t.props,n=r.baselineTableData,a=r.selectBaseline,s=[];n.forEach((function(e){s.push(e[0])})),a(s,e,"COMPARISON")},t.confirmModal=t.confirmModal.bind(L()(t)),t.cancelSelection=t.cancelSelection.bind(L()(t)),t.changeActiveTab=t.changeActiveTab.bind(L()(t)),t.state={columns:[{title:"Name",transforms:[_.sortable]},{title:"Last updated",transforms:[_.sortable,(0,_.cellWidth)(20)]}]},t}return u()(i,[{key:"componentDidMount",value:(t=o()(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.insights.chrome.auth.getUser();case 2:this.props.updateColumns("display_name");case 3:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"confirmModal",value:function(){var e=this.props,t=e.confirmModal,r=e.entities,n=e.selectedBaselineIds,a=e.toggleAddSystemModal,s=e.selectedHSPIds,o=e.referenceId;t(r.selectedSystemIds,n,s,o),a()}},{key:"cancelSelection",value:function(){(0,this.props.toggleAddSystemModal)()}},{key:"changeActiveTab",value:function(e,t){(0,this.props.selectActiveTab)(t)}},{key:"render",value:function(){var e,t=this.props,r=t.activeTab,n=t.addSystemModalOpened,a=t.baselineTableData,s=t.globalFilterState,o=t.hasBaselinesReadPermissions,i=t.hasBaselinesWritePermissions,c=t.hasInventoryReadPermissions,l=t.historicalProfiles,u=t.loading,d=t.entities,p=t.selectedBaselineIds,f=t.selectedHSPIds,m=t.selectedSystemIds,h=t.setSelectedSystemIds,y=t.totalBaselines,v=this.state.columns;return S().createElement(S().Fragment,null,S().createElement(P.Modal,{className:"drift",width:"950px",title:"Add to comparison",ouiaId:"add-to-comparison-modal",isOpen:n,onClose:this.cancelSelection,actions:[S().createElement(P.Button,{key:"confirm",variant:"primary",onClick:this.confirmModal,isDisabled:0===(null==d||null===(e=d.selectedSystemIds)||void 0===e?void 0:e.length)&&0===p.length&&0===f.length,ouiaId:"add-to-comparison-submit-button"},"Submit"),S().createElement(P.Button,{key:"cancel",variant:"link",onClick:this.cancelSelection,ouiaId:"add-to-comparison-cancel-button"},"Cancel")]},S().createElement(U.Z,{globalFilterState:s}),S().createElement(P.Tabs,{activeKey:r,onSelect:this.changeActiveTab},S().createElement(P.Tab,{eventKey:0,title:"Systems",id:"systems-tab","data-ouia-component-id":"systems-tab-button"},S().createElement(V.Z,{selectedSystemIds:m,hasHistoricalDropdown:!0,historicalProfiles:l,hasMultiSelect:!0,hasInventoryReadPermissions:c,entities:d,selectVariant:"checkbox",onSystemSelect:h})),S().createElement(P.Tab,{eventKey:1,title:"Baselines",id:"baselines-tab","data-ouia-component-id":"baselines-tab-button"},S().createElement(W.Z,{tableId:"COMPARISON",hasMultiSelect:!0,onSelect:this.onSelect,tableData:a,loading:u,columns:v,onBulkSelect:this.onBulkSelect,selectedBaselineIds:p,totalBaselines:y,hasReadPermissions:o,hasWritePermissions:i,kebab:!1})))))}}]),i}(v.Component);G.propTypes={showModal:b().bool,addSystemModalOpened:b().bool,activeTab:b().number,confirmModal:b().func,cancelSelection:b().func,toggleAddSystemModal:b().func,selectActiveTab:b().func,entities:b().object,systems:b().array,selectedBaselineIds:b().array,baselines:b().array,selectedHSPIds:b().array,loading:b().bool,baselineTableData:b().array,selectBaseline:b().func,historicalProfiles:b().array,referenceId:b().string,totalBaselines:b().number,hasInventoryReadPermissions:b().bool,hasBaselinesReadPermissions:b().bool,hasBaselinesWritePermissions:b().bool,globalFilterState:b().object,selectedSystemIds:b().array,setSelectedSystemIds:b().func,selectHistoricProfiles:b().func,updateColumns:b().func};const Y=(0,I.connect)((function(e){return{addSystemModalOpened:e.addSystemModalState.addSystemModalOpened,systems:e.compareState.systems,activeTab:e.addSystemModalState.activeTab,entities:e.entities,selectedBaselineIds:e.baselinesTableState.comparisonTable.selectedBaselineIds,baselines:e.compareState.baselines,selectedHSPIds:e.historicProfilesState.selectedHSPIds,loading:e.baselinesTableState.comparisonTable.loading,baselineTableData:e.baselinesTableState.comparisonTable.baselineTableData,historicalProfiles:e.compareState.historicalProfiles,totalBaselines:e.baselinesTableState.comparisonTable.totalBaselines,globalFilterState:e.globalFilterState}}),(function(e){return{toggleAddSystemModal:function(){return e(Z.x.toggleAddSystemModal())},selectActiveTab:function(t){return e(Z.x.selectActiveTab(t))},selectBaseline:function(t,r,n){return e(w.w.selectBaseline(t,r,n))},selectHistoricProfiles:function(t){return e(k.h.selectHistoricProfiles(t))},setSelectedSystemIds:function(t){return e(Z.x.setSelectedSystemIds(t))},updateColumns:function(t){return e(K.Z.updateColumns(t))}}}))(G);var z=function(e){p()(a,e);var t,r,n=(t=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=y()(t);if(r){var a=y()(this).constructor;e=Reflect.construct(n,arguments,a)}else e=n.apply(this,arguments);return m()(this,e)});function a(e){return c()(this,a),n.call(this,e)}return u()(a,[{key:"icon",value:function(){return"SAME"===this.props.fact.state?S().createElement(R.CheckCircleIcon,{color:"#3E8635",height:"16px",width:"16px"}):"DIFFERENT"===this.props.fact.state?S().createElement(R.ExclamationCircleIcon,{color:"#C9190B",height:"16px",width:"16px"}):S().createElement(R.QuestionCircleIcon,{color:"#151515",height:"16px",width:"16px"})}},{key:"render",value:function(){var e=this.props,t=e.fact,r=e.stateSort;return S().createElement(P.Tooltip,{key:t.name+"-"+r,position:"top",content:S().createElement("div",null,t.tooltip)},this.icon())}}]),a}(v.Component);z.propTypes={fact:b().object,stateSort:b().string};const q=z;var Q=r(30381),J=r.n(Q),X=r(66262);var $=function(e){p()(a,e);var t,r,n=(t=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=y()(t);if(r){var a=y()(this).constructor;e=Reflect.construct(n,arguments,a)}else e=n.apply(this,arguments);return m()(this,e)});function a(e){var t;return c()(this,a),(t=n.call(this,e)).state={isReference:t.props.isReference},t}return u()(a,[{key:"renderIcon",value:function(){var e=this.props,t=e.updateReferenceId,r=e.item;return this.state.isReference?S().createElement(R.StarIcon,{className:"reference-selector pointer","data-ouia-component-type":"PF4/Button","data-ouia-component-id":"reference-selector-"+r.id,onClick:function(){return t()}}):S().createElement(R.OutlinedStarIcon,{className:"reference-selector pointer","data-ouia-component-type":"PF4/Button","data-ouia-component-id":"reference-selector-"+r.id,onClick:function(){return t(r.id)}})}},{key:"renderMessage",value:function(){var e=this.state.isReference,t=this.props.item,r=t.type;return"historical-system-profile"===t.type&&(r="historical system"),e?S().createElement("div",null,"This is the reference the other items are being compared against."):S().createElement("div",null,"Use this ",r," as a reference to compare.")}},{key:"render",value:function(){return S().createElement(P.Tooltip,{position:"top",content:this.renderMessage()},this.renderIcon())}}]),a}(v.Component);$.propTypes={isReference:b().bool,updateReferenceId:b().func,item:b().object};const ee=$;var te=function(e){p()(i,e);var t,r,n,s=(r=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y()(r);if(n){var a=y()(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return m()(this,e)});function i(e){var t;return c()(this,i),(t=s.call(this,e)).formatDate=function(e){return J().utc(e).format("DD MMM YYYY, HH:mm UTC")},t}return u()(i,[{key:"renderSortButton",value:function(e){return e===D.aW?S().createElement(R.LongArrowAltUpIcon,{className:"active-blue"}):e===D.jo?S().createElement(R.LongArrowAltDownIcon,{className:"active-blue"}):S().createElement(R.ArrowsAltVIcon,{className:"not-active"})}},{key:"toggleSort",value:(t=o()(a().mark((function e(t,r){var n,s,o,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,s=n.setHistory,o=n.toggleFactSort,i=n.toggleStateSort,"fact"!==t){e.next=6;break}return e.next=4,o(r);case 4:e.next=8;break;case 6:return e.next=8,i(r);case 8:s();case 9:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})},{key:"renderSystemHeaders",value:function(){var e=this,t=this.props,r=t.fetchCompare,n=t.masterList,a=t.referenceId,s=t.removeSystem,o=t.selectedBaselineIds,i=t.selectedHSPIds,c=t.selectHistoricProfiles,l=t.systemIds,u=t.updateReferenceId,d=[],p="";return n.forEach((function(t){"system"===t.type?p=S().createElement(P.Tooltip,{position:"top",content:S().createElement("div",null,"System")},S().createElement(R.ServerIcon,null)):"baseline"===t.type?p=S().createElement(P.Tooltip,{position:"top",content:S().createElement("div",null,"Baseline")},S().createElement(R.BlueprintIcon,null)):"historical-system-profile"===t.type&&(p=S().createElement(P.Tooltip,{position:"top",content:S().createElement("div",null,"Historical system")},S().createElement(R.ClockIcon,null))),d.push(S().createElement("th",{"header-id":t.id,key:t.id,className:t.id===a?"drift-header reference-header":"drift-header ".concat(t.type,"-header")},S().createElement("div",null,S().createElement("a",{onClick:function(){return s(t)},className:"remove-system-icon","data-ouia-component-type":"PF4/Button","data-ouia-component-id":"remove-system-button-"+t.id},S().createElement(R.TimesIcon,null))),S().createElement("div",{className:"comparison-header"},S().createElement("div",{className:"drift-header-icon"},p),S().createElement("div",{className:"system-name"},t.display_name),S().createElement("div",{className:"system-updated-and-reference"},S().createElement(ee,{updateReferenceId:u,item:t,isReference:t.id===a}),!1===t.system_profile_exists?S().createElement(P.Tooltip,{position:"top",content:S().createElement("div",null,"System profile does not exist. Please run insights-client on system to upload archive.")},S().createElement(R.ExclamationTriangleIcon,{color:"#f0ab00"})):"",t.last_updated?e.formatDate(t.last_updated):e.formatDate(t.updated),"system"===t.type||"historical-system-profile"===t.type?S().createElement(X.Z,{system:t,systemIds:l,referenceId:a,fetchCompare:r,hasCompareButton:!0,hasMultiSelect:!0,selectedHSPIds:i,selectHistoricProfiles:c,selectedBaselineIds:o}):null))))})),d}},{key:"renderHeaderRow",value:function(){var e=this,t=this.props,r=t.factSort,n=t.stateSort;return S().createElement("tr",{className:"sticky-column-header","data-ouia-component-type":"PF4/TableRow","data-ouia-component-id":"comparison-table-header-row"},S().createElement("th",{className:"fact-header sticky-column fixed-column-1 pointer",key:"fact-header",id:r,onClick:function(){return e.toggleSort("fact",r)},"data-ouia-component-type":"PF4/Button","data-ouia-component-id":"fact-sort-button"},S().createElement("div",{className:"active-blue"},"Fact ",this.renderSortButton(r))),S().createElement("th",{className:"state-header sticky-column fixed-column-2 pointer",key:"state-header",id:n||"disabled","data-ouia-component-type":"PF4/Button","data-ouia-component-id":"state-sort-button",onClick:function(){return e.toggleSort("state",n)}},""!==n?S().createElement("div",{className:"active-blue"},"State ",this.renderSortButton(n)):S().createElement("div",null,"State ",this.renderSortButton(n))),this.renderSystemHeaders())}},{key:"render",value:function(){return S().createElement(S().Fragment,null,this.renderHeaderRow())}}]),i}(v.Component);te.propTypes={factSort:b().string,fetchCompare:b().func,masterList:b().array,referenceId:b().string,removeSystem:b().func,stateSort:b().string,systemIds:b().array,toggleFactSort:b().func,toggleStateSort:b().func,updateReferenceId:b().func,setHistory:b().func,selectedHSPIds:b().array,selectHistoricProfiles:b().func,selectedBaselineIds:b().array};const re=te;function ne(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var ae=function(e){p()(f,e);var t,r,n,s,i,l,d=(i=f,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y()(i);if(l){var r=y()(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return m()(this,e)});function f(e){var t;return c()(this,f),(t=d.call(this,e)).shiftReferenceToFront=function(e){var r,n;return r=e.findIndex((function(e){return e.id===t.props.referenceId})),n=e.splice(r,1),e.unshift(n[0]),e},t.updateReferenceId=function(e){t.fetchCompare(t.systemIds,t.baselineIds,t.HSPIds,e)},t.findHSPReference=function(){var e=t.props.referenceId,r=e;return t.HSPIds.forEach((function(t){t===e&&(r=void 0)})),r},t.state={emptyStateMessage:["You currently have no system or baselines displayed. Add at least two","systems or baselines to compare their facts."]},t.masterList=[],t.setSystemIds(),t.setBaselineIds(),t.setHSPIds(),t.setReferenceId(),t.setFilters(),t.setSort(),t.fetchCompare=t.fetchCompare.bind(L()(t)),t.removeSystem=t.removeSystem.bind(L()(t)),t}return u()(f,[{key:"componentDidMount",value:(s=o()(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.insights.chrome.auth.getUser();case 2:(this.systemIds.length>0||this.baselineIds.length>0||this.HSPIds.length>0)&&this.fetchCompare(this.systemIds,this.baselineIds,this.HSPIds,this.props.referenceId);case 3:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"shouldComponentUpdate",value:(n=o()(a().mark((function e(t){var r,n,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.emptyState){e.next=3;break}return e.next=3,null===(r=window.insights)||void 0===r||null===(n=r.chrome)||void 0===n||null===(s=n.appAction)||void 0===s?void 0:s.call(n,"comparison-view");case 3:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})},{key:"formatEntities",value:function(e,t,r){var n,a=[],s={};if(0===e.length&&0===t.length&&0===r.length)return[];e=e.map((function(e){return e.type="system",e})),t=t.map((function(e){return e.type="baseline",e})),(r=r.map((function(e){return e.type="historical-system-profile",e}))).forEach((function(e){Object.prototype.hasOwnProperty.call(s,e.system_id)?s[e.system_id].push(e):s[e.system_id]=[e]})),a=e;for(var o=function(){var t=M()(c[i],2),r=t[0],n=t[1],s=e.find((function(e){return r===e.id})),o=void 0;void 0!==s?(o=a.indexOf(s),a=[].concat(T()(a.slice(0,o+1)),T()(n),T()(a.slice(o+1,a.length)))):a=a.concat(n)},i=0,c=Object.entries(s);i<c.length;i++)o();return n=t.concat(a),this.props.referenceId&&(n=this.shiftReferenceToFront(n)),n}},{key:"setSystemIds",value:function(){var e=new URLSearchParams(this.props.location.search);this.systemIds=e.getAll("system_ids"),this.systemIds.length?(this.systemIds=Array.isArray(this.systemIds)?this.systemIds:[this.systemIds],this.systemIds=this.systemIds.filter((function(e){return void 0!==e}))):this.systemIds=this.props.systems.map((function(e){return e.id}))}},{key:"setBaselineIds",value:function(){var e=new URLSearchParams(this.props.location.search);this.baselineIds=e.getAll("baseline_ids"),this.baselineIds.length?(this.baselineIds=Array.isArray(this.baselineIds)?this.baselineIds:[this.baselineIds],this.baselineIds=this.baselineIds.filter((function(e){return void 0!==e})),this.props.setSelectedBaselines(this.baselineIds,"COMPARISON")):this.baselineIds=this.props.baselines.map((function(e){return e.id}))}},{key:"setHSPIds",value:function(){var e=this.props,t=e.location,r=e.selectHistoricProfiles,n=new URLSearchParams(t.search);this.HSPIds=n.getAll("hsp_ids"),this.HSPIds.length?(this.HSPIds=Array.isArray(this.HSPIds)?this.HSPIds:[this.HSPIds],this.HSPIds=this.HSPIds.filter((function(e){return void 0!==e})),r(this.HSPIds)):this.HSPIds=this.props.historicalProfiles.map((function(e){return e.id}))}},{key:"setReferenceId",value:function(){var e=this.props,t=e.location,r=e.updateReferenceId,n=new URLSearchParams(t.search).get("reference_id");n&&r(null===n?void 0:n)}},{key:"setFilters",value:function(){var e,t,r=this.props,n=r.addStateFilter,a=r.handleFactFilter,s=r.location,o=r.stateFilters,i=new URLSearchParams(s.search);null===(e=i.get("filter[name]"))||void 0===e||e.split(",").forEach((function(e){a(e)}));var c=null===(t=i.get("filter[state]"))||void 0===t?void 0:t.split(",");(null==c?void 0:c.length)>0&&o.forEach((function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(r),!0).forEach((function(t){N()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ne(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e);null!=c&&c.includes(e.filter.toLowerCase())&&(t.selected=!1),n(t)}))}},{key:"setSort",value:function(){var e,t,r=this.props,n=r.location,a=r.toggleFactSort,s=r.toggleStateSort,o=null===(e=new URLSearchParams(n.search).get("sort"))||void 0===e?void 0:e.split(",");null==o||o.forEach((function(e){e.includes("fact")?"-"===e[0]?a(D.aW):a(D.jo):"-"===e[0]?s(D.aW):"state"===e&&s("")})),1===(null==o?void 0:o.length)&&null!==(t=o[0])&&void 0!==t&&t.includes("fact")&&s(D.jo)}},{key:"removeSystem",value:(r=o()(a().mark((function e(t){var r,n,s,o,i,c,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.props,n=r.historicalProfiles,s=r.isFirstReference,o=r.referenceId,i=r.selectHistoricProfiles,c=r.setIsFirstReference,"system"!==t.type){e.next=11;break}return this.systemIds=this.systemIds.filter((function(e){return e!==t.id})),e.next=5,this.findHSPReference();case 5:return l=e.sent,e.next=8,n.filter((function(e){return e.system_id!==t.id})).map((function(e){return e.id}));case 8:this.HSPIds=e.sent,e.next=12;break;case 11:"baseline"===t.type?this.baselineIds=this.baselineIds.filter((function(e){return e!==t.id})):"historical-system-profile"===t.type&&(this.HSPIds=this.HSPIds.filter((function(e){return e!==t.id})));case 12:t.id===l&&(l=void 0),i(this.HSPIds),this.systemIds.length||this.baselineIds.length||this.HSPIds.length||o||s||c(!0),this.fetchCompare(this.systemIds,this.baselineIds,this.HSPIds,l);case 16:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"fetchCompare",value:(t=o()(a().mark((function e(){var t,r,n,s,o,i,c,l,u,d,p,f,m,h=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.length>0&&void 0!==h[0]?h[0]:[],r=h.length>1?h[1]:void 0,n=h.length>2?h[2]:void 0,s=h.length>3?h[3]:void 0,o=this.props,i=o.clearComparison,c=o.fetchCompare,l=o.isFirstReference,u=o.setHistory,d=o.setIsFirstReference,p=o.setSelectedBaselines,f=o.updateReferenceId,this.systemIds=t,this.baselineIds=r,this.HSPIds=n,l?!s&&this.baselineIds.length?m=r[0]:s&&(m=s):m=s,p(this.baselineIds,"COMPARISON"),f(m),!(t.length||r.length||n.length||m)){e.next=18;break}return e.next=14,c(t,r,n,m);case 14:return e.next=16,d(!1);case 16:e.next=20;break;case 18:return e.next=20,i();case 20:u();case 21:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"renderRows",value:function(e){var t=this,r=[];return void 0!==e&&e.forEach((function(e){r.push(t.renderRow(e))})),r}},{key:"renderLoadingRows",value:function(){for(var e=[],t=[],r=0;r<3;r+=1)t.push(S().createElement("td",null,S().createElement(E.Skeleton,{size:E.SkeletonSize.md})));for(var n=0;n<10;n+=1)e.push(S().createElement("tr",null,t));return e}},{key:"findSystem",value:function(e){var t,r=this,n=[],a=void 0;return this.masterList.forEach((function(s){var o,i,c,l,u;t=["comparison-cell"],a=e.systems.find((function(e){return e.id===s.id})),r.props.referenceId?null!==(l=a)&&void 0!==l&&l.is_obfuscated?t.push("obfuscated"):"DIFFERENT"===a.state&&(t.push("highlight"),t.push("different-fact-cell")):null!==(u=a)&&void 0!==u&&u.is_obfuscated?t.push("obfuscated"):"DIFFERENT"===e.state&&t.push("highlight"),n.push(S().createElement("td",{className:t.join(" ")},null===(null===(o=a)||void 0===o?void 0:o.value)?"No Data":null===(i=a)||void 0===i?void 0:i.value,null!==(c=a)&&void 0!==c&&c.is_obfuscated?S().createElement("span",{style:{float:"right"}},S().createElement(P.Tooltip,{position:"top",content:S().createElement("div",null,"This data has been redacted from the insights-client upload.")},S().createElement(R.LockIcon,{color:"#737679"}))):""))})),n}},{key:"renderFact",value:function(e,t,r){var n=this.props.expandedRows;return S().createElement("td",{className:t},this.renderExpandableRowButton(n,e,r)," ",e)}},{key:"renderState",value:function(e,t){var r=this.props.stateSort;return S().createElement("td",{className:t},S().createElement(q,{fact:e,stateSort:r||null}))}},{key:"renderRow",value:function(e){var t=this,r=this.props,n=r.expandedRows,a=r.stateSort,s=[],o=[];return e.comparisons?(s.push(this.renderFact(e.name,n.includes(e.name)?"nested-fact sticky-column fixed-column-1":"sticky-column fixed-column-1")),s.push(this.renderState(e,"fact-state sticky-column fixed-column-2")),this.masterList.forEach((function(){s.push(S().createElement("td",{className:"comparison-cell"}))})),o.push(S().createElement("tr",{"data-ouia-component-type":"PF4/TableRow","data-ouia-component-id":"comparison-table-row-"+e.name},s)),n.includes(e.name)&&e.comparisons.forEach((function(r){s=t.renderRowChild(r),o.push(S().createElement("tr",{"data-ouia-component-type":"PF4/TableRow","data-ouia-component-id":"comparison-table-row-"+r.name,category:e.name,className:"DIFFERENT"===r.state?"unexpected-row":""},s)),r.multivalues&&n.includes(r.name)&&r.multivalues.forEach((function(e){s=t.renderRowChild(e);var n=e.systems.filter((function(e){return""!==e.value}))[0].value;o.push(S().createElement("tr",{className:"DIFFERENT"===e.state?"unexpected-row":"","data-ouia-component-type":"PF4/TableRow","data-ouia-component-id":"comparison-table-row-multivalue-"+r.name+"-"+n},s))}))}))):(s.push(S().createElement("td",{className:"sticky-column fixed-column-1"},e.name)),s.push(S().createElement("td",{className:"fact-state sticky-column fixed-column-2"},S().createElement(q,{fact:e,stateSort:a}))),s=s.concat(this.findSystem(e)),o.push(S().createElement("tr",{"data-ouia-component-type":"PF4/TableRow","data-ouia-component-id":"comparison-table-row-"+e.name,className:"DIFFERENT"===e.state?"unexpected-row":""},s))),o}},{key:"renderRowChild",value:function(e){var t=this.props.expandedRows,r=[];return e.multivalues?(r.push(this.renderFact(e.name,t.includes(e.name)?"nested-fact sticky-column fixed-column-1":"sticky-column fixed-column-1",!0)),r.push(this.renderState(e,"fact-state sticky-column fixed-column-2")),this.masterList.forEach((function(){r.push(S().createElement("td",{className:"comparison-cell"}))}))):(r.push(S().createElement("td",{className:"nested-fact sticky-column fixed-column-1"},S().createElement("p",{className:"child-row"},e.name))),r.push(S().createElement("td",{className:"fact-state sticky-column fixed-column-2"},S().createElement(q,{fact:e}))),r=r.concat(this.findSystem(e))),r}},{key:"renderExpandableRowButton",value:function(e,t,r){var n=this;return e.includes(t)?S().createElement(R.AngleDownIcon,{className:"carat-margin pointer active-blue"+(r?" child-row":null),"data-ouia-component-type":"PF4/Button","data-ouia-component-id":"expand-category-button-"+t,onClick:function(){return n.props.expandRow(t)}}):S().createElement(R.AngleRightIcon,{className:"carat-margin pointer"+(r?" child-row":null),"data-ouia-component-type":"PF4/Button","data-ouia-component-id":"expand-category-button-"+t,onClick:function(){return n.props.expandRow(t)}})}},{key:"renderTable",value:function(e,t){var r=this.props,n=r.factSort,a=r.referenceId,s=r.selectedBaselineIds,o=r.selectedHSPIds,i=r.selectHistoricProfiles,c=r.setHistory,l=r.stateSort,u=r.toggleFactSort,d=r.toggleStateSort;return S().createElement(S().Fragment,null,S().createElement("div",{className:"drift-table-wrapper"},S().createElement("table",{className:"pf-c-table pf-m-compact drift-table","data-ouia-component-type":"PF4/Table","data-ouia-component-id":"comparison-table"},S().createElement("thead",null,S().createElement(re,{factSort:n,fetchCompare:this.fetchCompare,masterList:this.masterList,referenceId:a,removeSystem:this.removeSystem,stateSort:l,systemIds:this.systemIds,toggleFactSort:u,toggleStateSort:d,updateReferenceId:this.updateReferenceId,setHistory:c,selectedHSPIds:o,selectHistoricProfiles:i,selectedBaselineIds:s})),S().createElement("tbody",null,t?this.renderLoadingRows():this.renderRows(e)))))}},{key:"render",value:function(){var e=this.props,t=e.emptyState,r=e.filteredCompareData,n=e.systems,a=e.baselines,s=e.hasBaselinesReadPermissions,o=e.hasBaselinesWritePermissions,i=e.hasInventoryReadPermissions,c=e.historicalProfiles,l=e.loading;return this.masterList=this.formatEntities(n,a,c),S().createElement(S().Fragment,null,S().createElement(Y,{selectedSystemIds:n.map((function(e){return e.id})),confirmModal:this.fetchCompare,referenceId:this.props.referenceId,hasInventoryReadPermissions:i,hasBaselinesReadPermissions:s,hasBaselinesWritePermissions:o}),t?null:this.renderTable(r,l))}}]),f}(v.Component);ae.propTypes={addSystemModalOpened:b().bool,location:b().object,history:b().object,fetchCompare:b().func,fullCompareData:b().array,filteredCompareData:b().array,systems:b().array,baselines:b().array,historicalProfiles:b().array,factSort:b().string,stateSort:b().string,loading:b().bool,toggleFactSort:b().func,toggleStateSort:b().func,expandRow:b().func,expandedRows:b().array,setSelectedBaselines:b().func,selectHistoricProfiles:b().func,emptyState:b().bool,updateReferenceId:b().func,referenceId:b().string,error:b().object,isFirstReference:b().bool,setIsFirstReference:b().func,clearComparison:b().func,hasInventoryReadPermissions:b().bool,hasBaselinesReadPermissions:b().bool,hasBaselinesWritePermissions:b().bool,stateFilters:b().array,addStateFilter:b().func,handleFactFilter:b().func,activeFactFilters:b().array,factFilter:b().string,setHistory:b().func,selectedHSPIds:b().array,selectedBaselineIds:b().array};const se=(0,F.withRouter)((0,I.connect)((function(e){return{addSystemModalOpened:e.addSystemModalState.addSystemModalOpened,fullCompareData:e.compareState.fullCompareData,filteredCompareData:e.compareState.filteredCompareData,loading:e.compareState.loading,expandedRows:e.compareState.expandedRows,emptyState:e.compareState.emptyState}}),(function(e){return{fetchCompare:function(t,r,n,a){return e(C.r.fetchCompare(t,r,n,a))},toggleFactSort:function(t){return e(C.r.toggleFactSort(t))},toggleStateSort:function(t){return e(C.r.toggleStateSort(t))},expandRow:function(t){return e(C.r.expandRow(t))},setSelectedBaselines:function(t,r){return e(w.w.setSelectedBaselines(t,r))},selectHistoricProfiles:function(t){return e(k.h.selectHistoricProfiles(t))}}}))(ae));var oe=r(82437),ie=r(72188);var ce=function(e){p()(a,e);var t,r,n=(t=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=y()(t);if(r){var a=y()(this).constructor;e=Reflect.construct(n,arguments,a)}else e=n.apply(this,arguments);return m()(this,e)});function a(e){return c()(this,a),n.call(this,e)}return u()(a,[{key:"render",value:function(){var e=this.props,t=e.loading,r=e.toggleAddSystemModal,n=e.isTable;return S().createElement(P.Button,{variant:"primary",onClick:r,isDisabled:!!t,ouiaId:n?"add-to-comparison":"add-to-comparison-empty"},n?"Add":"Add to comparison")}}]),a}(v.Component);ce.propTypes={toggleAddSystemModal:b().func,isTable:b().bool,loading:b().bool};const le=(0,I.connect)(null,(function(e){return{toggleAddSystemModal:function(){return e(Z.x.toggleAddSystemModal())}}}))(ce);var ue=r(3994);const de=function(){return{type:ue.Z.OPEN_FILTER_DROPDOWN}};var pe=function(e){p()(s,e);var t,r,n=(t=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=y()(t);if(r){var a=y()(this).constructor;e=Reflect.construct(n,arguments,a)}else e=n.apply(this,arguments);return m()(this,e)});function s(e){var t;return c()(this,s),(t=n.call(this,e)).addStateFilter=function(){var e=o()(a().mark((function e(r){var n,s,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.props,s=n.addStateFilter,o=n.setHistory,e.next=3,s(r);case 3:o();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.onToggle=t.onToggle.bind(L()(t)),t.createDropdownItem=t.createDropdownItem.bind(L()(t)),t}return u()(s,[{key:"onToggle",value:function(){this.props.toggleDropDown()}},{key:"createDropdownItem",value:function(e){var t=this;return S().createElement(P.DropdownItem,{"data-ouia-component-id":"state-filter-option-"+e.display},S().createElement(P.Checkbox,{id:e.display,"data-ouia-component-type":"PF4/Checkbox","data-ouia-component-id":"state-filter-option-checkbox-"+e.display,label:e.display,isChecked:e.selected,onChange:function(){return t.addStateFilter(e)}}))}},{key:"createDropdownArray",value:function(e){var t=[];return e.forEach(function(e){var r=this.createDropdownItem(e);t.push(r)}.bind(this)),t}},{key:"createSelectedViewsString",value:function(e){for(var t=[],r="",n=0;n<e.length;n++)e[n].selected&&t.push(e[n].display);for(var a=0;a<t.length;a++)r+=t[a],a+1<t.length&&(r+=", ");return r}},{key:"render",value:function(){var e,t,r=this.props.stateFilters;return e=this.createDropdownArray(r),t=this.createSelectedViewsString(r),S().createElement(S().Fragment,null,S().createElement(P.Dropdown,{ouiaId:"state-filter-dropdown",toggle:S().createElement(P.DropdownToggle,{onToggle:this.onToggle,ouiaId:"state-filter-dropdown-toggle"},"View: ",t),isOpen:this.props.filterDropdownOpened,dropdownItems:e}))}}]),s}(v.Component);pe.propTypes={toggleDropDown:b().func,filterDropdownOpened:b().bool,stateFilters:b().array,addStateFilter:b().func,setHistory:b().func};const fe=(0,I.connect)((function(e){return{filterDropdownOpened:e.filterDropdownOpened,stateFilters:e.compareState.stateFilters}}),(function(e){return{toggleDropDown:function(){return e(de())},addStateFilter:function(t){return e(C.r.addStateFilter(t))}}}))(pe);var me=r(23279),he=r.n(me);var ye=function(e){p()(i,e);var t,r,n,s=(r=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y()(r);if(n){var a=y()(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return m()(this,e)});function i(e){var t;return c()(this,i),(t=s.call(this,e)).updateFactFilter=function(e){t.setState({filter:e}),t.setFactFilter(e)},t.setFactFilter=he()(function(){var e=o()(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.filterByFact(t);case 2:this.props.setHistory();case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),250),t.checkKeyPress=function(e){var r=t.props.activeFactFilters,n=t.state.filter;"Enter"===e.key&&(e.preventDefault(),r.includes(n)||t.addToActiveFactFilters(n))},t.state={filter:t.props.factFilter},t.setFactFilter=t.setFactFilter.bind(L()(t)),t}return u()(i,[{key:"componentDidUpdate",value:function(e){""!==e.factFilter&&""===this.props.factFilter&&this.setState({filter:this.props.factFilter})}},{key:"addToActiveFactFilters",value:(t=o()(a().mark((function e(t){var r,n,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.props,n=r.handleFactFilter,s=r.setHistory,e.next=3,n(t);case 3:s();case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"render",value:function(){return S().createElement(S().Fragment,null,S().createElement(P.Form,null,S().createElement(P.FormGroup,{isRequired:!0,type:"text",fieldId:"filter",onKeyPress:this.checkKeyPress},S().createElement(P.TextInput,{value:this.state.filter,id:"filterByFact",placeholder:"Filter by fact",onChange:this.updateFactFilter,"aria-label":"filter by fact","data-ouia-component-type":"PF4/TextInput","data-ouia-component-id":"fact-filter-input-comparison"}))))}}]),i}(v.Component);ye.propTypes={filterByFact:b().func,factFilter:b().string,handleFactFilter:b().func,activeFactFilters:b().array,setHistory:b().func};const ve=ye;var Se=r(80169),ge=r(70325);var be=function(e){p()(i,e);var t,r,n,s=(r=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y()(r);if(n){var a=y()(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return m()(this,e)});function i(e){var t;return c()(this,i),(t=s.call(this,e)).setFactFilterChips=function(){var e=t.props,r=e.activeFactFilters,n=e.factFilter,a=T()(r);return n.length&&!r.includes(n)&&a.push(n),a},t.setStateChips=function(e){var t=[];return e.forEach((function(e){e.selected&&t.push(e.display)})),t},t.clearAllStateChips=o()(a().mark((function e(){var r,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.props,n=r.addStateFilter,r.stateFilters.forEach((function(e){e.selected=!0,n(e)}));case 2:case"end":return e.stop()}}),e)}))),t.removeChip=o()(a().mark((function e(){var r,n,s,i,c,l,u,d,p,f,m=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=m.length>0&&void 0!==m[0]?m[0]:"",n=m.length>1&&void 0!==m[1]?m[1]:"",s=t.props,i=s.activeFactFilters,c=s.addStateFilter,l=s.clearAllFactFilters,u=s.filterByFact,d=s.handleFactFilter,p=s.setHistory,f=s.stateFilters,!r){e.next=22;break}if("State"!==r){e.next=8;break}""===n?t.clearAllStateChips():f.forEach(function(){var e=o()(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.display!==n){e.next=3;break}return e.next=3,c(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=20;break;case 8:if(""!==n){e.next=13;break}return e.next=11,l();case 11:e.next=20;break;case 13:if(!i.includes(n)){e.next=18;break}return e.next=16,d(n);case 16:e.next=20;break;case 18:return e.next=20,u("");case 20:e.next=26;break;case 22:return e.next=24,t.clearAllStateChips();case 24:return e.next=26,t.clearAllFactChips();case 26:p();case 27:case"end":return e.stop()}}),e)}))),t.setIsEmpty=function(e){t.setState({isEmpty:e})},t.onToggle=function(){var e=t.state.dropdownOpen;t.setState({dropdownOpen:!e})},t.clearFilters=o()(a().mark((function e(){var r,n,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.props,n=r.clearComparisonFilters,s=r.setHistory,e.next=3,n();case 3:s();case 4:case"end":return e.stop()}}),e)}))),t.clearComparison=o()(a().mark((function e(){var r,n,s,o,i,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.props,n=r.clearComparison,s=r.clearSelectedBaselines,o=r.setHistory,i=r.setIsFirstReference,c=r.updateReferenceId,e.next=3,n();case 3:return e.next=5,s("COMPARISON");case 5:return e.next=7,i(!0);case 7:return e.next=9,c();case 9:o();case 10:case"end":return e.stop()}}),e)}))),t.state={actionKebabItems:[S().createElement(P.DropdownItem,{key:"remove-systems",component:"button","data-ouia-component-id":"clear-all-comparisons-dropdown-item",onClick:t.clearComparison},"Clear all comparisons")],dropdownItems:[S().createElement(P.DropdownItem,{key:"export-to-CSV",component:"button","data-ouia-component-id":"export-to-csv-dropdown-item-comparison",onClick:function(){return t.props.exportToCSV()}},"Export to CSV")],isEmpty:!0,dropdownOpen:!1},t}return u()(i,[{key:"clearAllFactChips",value:(t=o()(a().mark((function e(){var t,r,n,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,r=t.activeFactFilters,n=t.filterByFact,s=t.handleFactFilter,e.next=3,r.forEach((function(e){s(e)}));case 3:n("");case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this.props,t=e.activeFactFilters,r=e.factFilter,n=e.filterByFact,a=e.handleFactFilter,s=e.loading,o=e.page,i=e.perPage,c=e.setHistory,l=e.stateFilters,u=e.totalFacts,d=e.updatePagination,p=this.state,f=p.actionKebabItems,m=p.dropdownItems,h=p.dropdownOpen;return S().createElement(S().Fragment,null,S().createElement(P.Toolbar,{className:"drift-toolbar",clearAllFilters:this.removeChip},S().createElement(P.ToolbarContent,null,S().createElement(P.ToolbarGroup,{variant:"filter-group"},S().createElement(P.ToolbarFilter,{chips:this.setFactFilterChips(),deleteChip:this.removeChip,deleteChipGroup:this.removeChip,categoryName:"Fact name"},S().createElement(ve,{factFilter:r,activeFactFilters:t,handleFactFilter:a,filterByFact:n,setHistory:c})),S().createElement(P.ToolbarFilter,{chips:this.setStateChips(l),deleteChip:this.removeChip,deleteChipGroup:this.removeChip,categoryName:"State"},S().createElement(fe,{setHistory:c}))),S().createElement(P.ToolbarGroup,{variant:"button-group"},S().createElement(P.ToolbarItem,null,S().createElement(le,{loading:s}))),S().createElement(P.ToolbarGroup,{variant:"icon-button-group"},S().createElement(P.ToolbarItem,null,S().createElement(ge.Z,{dropdownItems:m,ouiaId:"export-dropdown-comparison",isOpen:h,onToggle:this.onToggle})),S().createElement(P.ToolbarItem,null,S().createElement(Se.Z,{ouiaId:"clear-comparison-dropdown",dropdownItems:f}))),S().createElement(P.ToolbarItem,{variant:"pagination",align:{default:"alignRight"}},S().createElement(ie.v,{page:o,perPage:i,total:u,isCompact:!0,updatePagination:d,widgetId:"drift-pagination-top",ouiaId:"comparison-pagination-top",variant:P.PaginationVariant.top})))))}}]),i}(v.Component);be.propTypes={loading:b().bool,history:b().object,page:b().number,perPage:b().number,totalFacts:b().number,updatePagination:b().func,clearComparisonFilters:b().func,clearComparison:b().func,exportToCSV:b().func,clearSelectedBaselines:b().func,setIsFirstReference:b().func,updateReferenceId:b().func,factFilter:b().string,filterByFact:b().func,stateFilters:b().array,addStateFilter:b().func,activeFactFilters:b().array,handleFactFilter:b().func,clearAllFactFilters:b().func,setHistory:b().func};const Fe=be;var Ie=r(46456),Ee=r(55275);var Pe=function(e){p()(i,e);var t,r,n,s=(r=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y()(r);if(n){var a=y()(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return m()(this,e)});function i(e){var t;return c()(this,i),(t=s.call(this,e)).setHistory=function(){var e=t.props,r=e.activeFactFilters,n=e.baselines,a=e.factFilter,s=e.factSort,o=e.historicalProfiles,i=e.history,c=e.referenceId,l=e.stateFilters,u=e.stateSort;H(i,e.systems.map((function(e){return e.id})),n.map((function(e){return e.id})),o.map((function(e){return e.id})),c,r,a,l,s,u)},t.setIsFirstReference=function(e){t.setState({isFirstReference:e})},t.onClose=function(){var e=t.props,r=e.revertCompareData,n=e.history,a=e.previousStateSystems;r(),H(n,a.map((function(e){return e.id})))},t.renderEmptyState=function(){var e=t.state.emptyStateMessage,r=t.props.error;return r.status?S().createElement(Ie.Z,{icon:R.ExclamationCircleIcon,color:"#c9190b",title:"Comparison cannot be displayed",text:e,error:"Error "+r.status+": "+r.detail,button:S().createElement(le,{isTable:!1})}):S().createElement(Ie.Z,{icon:R.PlusCircleIcon,color:"#6a6e73",title:"Add systems or baselines to compare",text:e,button:S().createElement(le,{isTable:!1})})},t.state={emptyStateMessage:["You currently have no system or baselines displayed. Add at least two","systems or baselines to compare their facts."],isFirstReference:!0},t}return u()(i,[{key:"componentDidMount",value:(t=o()(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.insights.chrome.auth.getUser();case 2:this.props.loadEntities();case 3:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.props,r=t.activeFactFilters,n=t.addStateFilter,a=t.baselines,s=t.clearAllFactFilters,o=t.clearComparison,i=t.clearComparisonFilters,c=t.clearSelectedBaselines,l=t.emptyState,u=t.error,d=t.exportToCSV,p=t.factFilter,f=t.factSort,m=t.filterByFact,h=t.handleFactFilter,y=t.historicalProfiles,v=t.history,g=t.loading,b=t.page,F=t.perPage,I=t.referenceId,w=t.selectedBaselineIds,C=t.selectedHSPIds,k=t.stateFilters,x=t.stateSort,T=t.systems,B=t.totalFacts,D=t.updatePagination,H=t.updateReferenceId,A=this.state.isFirstReference;return S().createElement(S().Fragment,null,S().createElement(E.PageHeader,null,S().createElement(E.PageHeaderTitle,{title:"Comparison"})),S().createElement(E.Main,null,S().createElement(Ee.B.Consumer,null,(function(t){return!1===t.permissions.compareRead?S().createElement(Ie.Z,{icon:R.LockIcon,color:"#6a6e73",title:"You do not have access to Drift comparison",text:["Contact your organization administrator(s) for more information."]}):S().createElement(S().Fragment,null,S().createElement(oe.Z,{error:u,onClose:e.onClose}),l&&!g?e.renderEmptyState():S().createElement("div",null),S().createElement(P.Card,{className:"pf-t-light pf-m-opaque-100"},S().createElement(P.CardBody,null,S().createElement("div",null,l?null:S().createElement(Fe,{loading:g,history:v,page:b,perPage:F,totalFacts:B,updatePagination:D,clearComparison:o,clearComparisonFilters:i,exportToCSV:d,updateReferenceId:H,setIsFirstReference:e.setIsFirstReference,clearSelectedBaselines:c,factFilter:p,filterByFact:m,stateFilters:k,addStateFilter:n,activeFactFilters:r,handleFactFilter:h,clearAllFactFilters:s,setHistory:e.setHistory}),S().createElement(se,{updateReferenceId:H,error:u,isFirstReference:A,setIsFirstReference:e.setIsFirstReference,clearComparison:o,hasBaselinesReadPermissions:t.permissions.baselinesRead,hasBaselinesWritePermissions:t.permissions.baselinesWrite,hasInventoryReadPermissions:t.permissions.inventoryRead,handleFactFilter:h,addStateFilter:n,stateFilters:k,activeFactFilters:r,factFilter:p,setHistory:e.setHistory,factSort:f,stateSort:x,referenceId:I,systems:T,baselines:a,historicalProfiles:y,selectedHSPIds:C,selectedBaselineIds:w}),l||g?null:S().createElement(P.Toolbar,{className:"drift-toolbar"},S().createElement(P.ToolbarGroup,{className:"pf-c-pagination"},S().createElement(P.ToolbarItem,null,S().createElement(ie.Z,{page:b,perPage:F,total:B,isCompact:!1,updatePagination:D,widgetId:"drift-pagination-bottom",ouiaId:"drift-pagination-bottom",variant:P.PaginationVariant.bottom}))))))))}))))}}]),i}(v.Component);Pe.propTypes={perPage:b().number,page:b().number,totalFacts:b().number,error:b().object,loading:b().bool,clearSelectedBaselines:b().func,emptyState:b().bool,updatePagination:b().func,updateReferenceId:b().func,clearComparison:b().func,clearComparisonFilters:b().func,history:b().object,location:b().object,selectHistoricProfiles:b().func,selectedHSPIds:b().array,revertCompareData:b().func,previousStateSystems:b().array,exportToCSV:b().func,factFilter:b().string,activeFactFilters:b().array,handleFactFilter:b().func,filterByFact:b().func,stateFilters:b().array,addStateFilter:b().func,clearAllFactFilters:b().func,factSort:b().string,stateSort:b().string,referenceId:b().number,systems:b().array,baselines:b().array,historicalProfiles:b().array,loadEntities:b().func,selectedBaselineIds:b().array};const Re=(0,F.withRouter)((0,I.connect)((function(e){return{page:e.compareState.page,perPage:e.compareState.perPage,totalFacts:e.compareState.totalFacts,error:e.compareState.error,loading:e.compareState.loading,emptyState:e.compareState.emptyState,selectedHSPIds:e.historicProfilesState.selectedHSPIds,previousStateSystems:e.compareState.previousStateSystems,factFilter:e.compareState.factFilter,stateFilters:e.compareState.stateFilters,activeFactFilters:e.compareState.activeFactFilters,factSort:e.compareState.factSort,stateSort:e.compareState.stateSort,referenceId:e.compareState.referenceId,systems:e.compareState.systems,baselines:e.compareState.baselines,historicalProfiles:e.compareState.historicalProfiles,selectedBaselineIds:e.baselinesTableState.comparisonTable.selectedBaselineIds}}),(function(e){return{clearSelectedBaselines:function(t){return e(w.w.clearSelectedBaselines(t))},updatePagination:function(t){return e(C.r.updatePagination(t))},updateReferenceId:function(t){return e(C.r.updateReferenceId(t))},clearComparison:function(){return e(C.r.clearComparison())},clearComparisonFilters:function(){return e(C.r.clearComparisonFilters())},selectHistoricProfiles:function(t){return e(k.h.selectHistoricProfiles(t))},revertCompareData:function(){return e(C.r.revertCompareData())},exportToCSV:function(){return e(C.r.exportToCSV())},filterByFact:function(t){return e(C.r.filterByFact(t))},addStateFilter:function(t){return e(C.r.addStateFilter(t))},handleFactFilter:function(t){return e(C.r.handleFactFilter(t))},clearAllFactFilters:function(){return e(C.r.clearAllFactFilters())},loadEntities:function(){return e({type:"LOAD_ENTITIES"})}}}))(Pe))}}]);