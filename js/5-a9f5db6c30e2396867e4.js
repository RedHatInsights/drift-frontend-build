(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{740:function(e,t,r){"use strict";var a=r(775),n=r(134);function s(e,t){return t.encode?t.strict?a(e):encodeURIComponent(e):e}t.extract=function(e){return e.split("?")[1]||""},t.parse=function(e,t){var r=function(e){var t;switch(e.arrayFormat){case"index":return function(e,r,a){t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===a[e]&&(a[e]={}),a[e][t[1]]=r):a[e]=r};case"bracket":return function(e,r,a){t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==a[e]?a[e]=[].concat(a[e],r):a[e]=[r]:a[e]=r};default:return function(e,t,r){void 0!==r[e]?r[e]=[].concat(r[e],t):r[e]=t}}}(t=n({arrayFormat:"none"},t)),a=Object.create(null);return"string"!=typeof e?a:(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach((function(e){var t=e.replace(/\+/g," ").split("="),n=t.shift(),s=t.length>0?t.join("="):void 0;s=void 0===s?null:decodeURIComponent(s),r(decodeURIComponent(n),s,a)})),Object.keys(a).sort().reduce((function(e,t){var r=a[t];return Boolean(r)&&"object"==typeof r&&!Array.isArray(r)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"==typeof t?e(Object.keys(t)).sort((function(e,t){return Number(e)-Number(t)})).map((function(e){return t[e]})):t}(r):e[t]=r,e}),Object.create(null))):a},t.stringify=function(e,t){var r=function(e){switch(e.arrayFormat){case"index":return function(t,r,a){return null===r?[s(t,e),"[",a,"]"].join(""):[s(t,e),"[",s(a,e),"]=",s(r,e)].join("")};case"bracket":return function(t,r){return null===r?s(t,e):[s(t,e),"[]=",s(r,e)].join("")};default:return function(t,r){return null===r?s(t,e):[s(t,e),"=",s(r,e)].join("")}}}(t=n({encode:!0,strict:!0,arrayFormat:"none"},t));return e?Object.keys(e).sort().map((function(a){var n=e[a];if(void 0===n)return"";if(null===n)return s(a,t);if(Array.isArray(n)){var o=[];return n.slice().forEach((function(e){void 0!==e&&o.push(r(a,e,o.length))})),o.join("&")}return s(a,t)+"="+s(n,t)})).filter((function(e){return e.length>0})).join("&"):""}},775:function(e,t,r){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}},854:function(e,t,r){"use strict";r.r(t),r.d(t,"DriftPage",(function(){return ht}));var a=r(9),n=r.n(a),s=r(17),o=r.n(s),c=r(24),i=r.n(c),l=r(25),u=r.n(l),f=r(26),p=r.n(f),d=r(27),m=r.n(d),h=r(15),y=r.n(h),v=r(0),g=r.n(v),S=r(4),b=r.n(S),E=r(18),I=r(32),R=r(132),C=r(652),F=r(697),k=r(698),P=r(737),D=r(738),w=r(677),x=r(674),T=r(771),B=r(369);var H={toggleErrorAlert:function(){return{type:B.a.OPEN_ERROR_ALERT}}},N=r(200),M=r(676),O=r(213),A=r(740),j=r.n(A);function _(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],n=arguments.length>4?arguments[4]:void 0;e.push({search:"?"+j.a.stringify({system_ids:t,baseline_ids:r,hsp_ids:a,reference_id:n})})}var U=r(30),K=r.n(U),L=r(741),V=r.n(L),X=r(45),G=r.n(X),Y=r(185),$=r(13),z=r(765),J=r(755),q=r(757),W=r(767),Q=r(758),Z=r(763),ee=r(761),te=r(760),re=r(754),ae=r(732),ne=r(733),se=r(3),oe=r.n(se),ce=r(378),ie=r(97),le=r(773),ue=r(750),fe=r(401),pe=r(742),de=r(736),me=r(739);function he(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=y()(e);if(t){var n=y()(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return m()(this,r)}}var ye=function(e){p()(a,e);var t,r=he(a);function a(e){var t;return i()(this,a),(t=r.call(this,e)).onSelect=function(e,r,a){var n=t.props,s=n.baselineTableData;(0,n.selectBaseline)(-1===a?s.map((function(e){return e[0]})):[s[a][0]],r,"CHECKBOX")},t.onBulkSelect=function(e){var r=t.props,a=r.baselineTableData,n=r.selectBaseline,s=[];a.forEach((function(e){s.push(e[0])})),n(s,e,"CHECKBOX")},t.confirmModal=t.confirmModal.bind(G()(t)),t.cancelSelection=t.cancelSelection.bind(G()(t)),t.changeActiveTab=t.changeActiveTab.bind(G()(t)),t.state={columns:[{title:"Name",transforms:[fe.a]},{title:"Last updated",transforms:[fe.a]}]},t}return u()(a,[{key:"componentDidMount",value:(t=o()(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.insights.chrome.auth.getUser();case 2:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"confirmModal",value:function(){var e=this.props,t=e.confirmModal,r=e.entities,a=e.selectedBaselineIds,n=e.toggleModal,s=e.selectedHSPIds,o=e.referenceId;t(r.selectedSystemIds,a,s,o),n()}},{key:"cancelSelection",value:function(){this.props.toggleModal()}},{key:"selectedSystemIds",value:function(){var e=this.props.systems.map((function(e){return e.id}));return e||[]}},{key:"changeActiveTab",value:function(e,t){(0,this.props.selectActiveTab)(t)}},{key:"render",value:function(){var e=this.props,t=e.activeTab,r=e.addSystemModalOpened,a=e.baselineTableData,n=e.historicalProfiles,s=e.loading,o=e.entities,c=e.selectedBaselineIds,i=e.selectedHSPIds,l=e.page,u=e.perPage,f=e.totalBaselines,p=e.updatePagination,d=this.state.columns;return g.a.createElement(g.a.Fragment,null,g.a.createElement(ce.a,{width:"950px",title:"Add to comparison",isOpen:r,onClose:this.cancelSelection,actions:[g.a.createElement(ie.a,{key:"confirm",variant:"primary",onClick:this.confirmModal,isDisabled:o&&o.selectedSystemIds&&0===o.selectedSystemIds.length&&0===c.length&&0===i.length},"Submit")]},g.a.createElement(le.a,{activeKey:t,onSelect:this.changeActiveTab},g.a.createElement(ue.a,{eventKey:0,title:"Systems",id:"systems-tab"},g.a.createElement(pe.a,{selectedSystemIds:this.selectedSystemIds(),hasHistoricalDropdown:!0,historicalProfiles:n,hasMultiSelect:!0})),g.a.createElement(ue.a,{eventKey:1,title:"Baselines",id:"baselines-tab"},g.a.createElement(de.a,{tableId:"CHECKBOX",hasMultiSelect:!0,onSelect:this.onSelect,tableData:a,loading:s,columns:d,onBulkSelect:this.onBulkSelect,selectedBaselineIds:c,page:l,perPage:u,totalBaselines:f,updatePagination:p})))))}}]),a}(v.Component);ye.propTypes={showModal:b.a.bool,addSystemModalOpened:b.a.bool,activeTab:b.a.number,confirmModal:b.a.func,cancelSelection:b.a.func,toggleModal:b.a.func,selectActiveTab:b.a.func,entities:b.a.object,systems:b.a.array,selectedBaselineIds:b.a.array,baselines:b.a.array,selectedHSPIds:b.a.array,loading:b.a.bool,baselineTableData:b.a.array,selectBaseline:b.a.func,historicalProfiles:b.a.array,referenceId:b.a.string,page:b.a.number,perPage:b.a.number,totalBaselines:b.a.number,updatePagination:b.a.func};var ve=Object(I.connect)((function(e){return{addSystemModalOpened:e.addSystemModalState.addSystemModalOpened,systems:e.compareState.systems,activeTab:e.addSystemModalState.activeTab,entities:e.entities,selectedBaselineIds:e.baselinesTableState.checkboxTable.selectedBaselineIds,baselines:e.compareState.baselines,selectedHSPIds:e.historicProfilesState.selectedHSPIds,loading:e.baselinesTableState.checkboxTable.loading,baselineTableData:e.baselinesTableState.checkboxTable.baselineTableData,historicalProfiles:e.compareState.historicalProfiles,page:e.baselinesTableState.checkboxTable.page,perPage:e.baselinesTableState.checkboxTable.perPage,totalBaselines:e.baselinesTableState.checkboxTable.totalBaselines}}),(function(e){return{toggleModal:function(){return e(me.a.toggleAddSystemModal())},selectActiveTab:function(t){return e(me.a.selectActiveTab(t))},selectBaseline:function(t,r,a){return e(N.a.selectBaseline(t,r,a))},updatePagination:function(t,r){return e(N.a.updatePagination(t,r))}}}))(ye);function ge(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=y()(e);if(t){var n=y()(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return m()(this,r)}}var Se=function(e){p()(r,e);var t=ge(r);function r(e){return i()(this,r),t.call(this,e)}return u()(r,[{key:"render",value:function(){var e=this.props,t=e.loading,r=e.toggleAddSystemModal,a=e.isTable;return g.a.createElement(ie.a,{className:"add-system-button",variant:"primary",onClick:r,isDisabled:!!t},a?"Add":"Add to comparison")}}]),r}(v.Component);Se.propTypes={toggleAddSystemModal:b.a.func,isTable:b.a.bool,loading:b.a.bool};var be=Object(I.connect)(null,(function(e){return{toggleAddSystemModal:function(){return e(me.a.toggleAddSystemModal())}}}))(Se),Ee=r(756),Ie=r(657),Re=r(764);function Ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=y()(e);if(t){var n=y()(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return m()(this,r)}}var Fe=function(e){p()(r,e);var t=Ce(r);function r(e){return i()(this,r),t.call(this,e)}return u()(r,[{key:"icon",value:function(){return"SAME"===this.props.factState?g.a.createElement(Ee.a,{color:"#3E8635",height:"20px",width:"20px"}):"DIFFERENT"===this.props.factState?g.a.createElement(Ie.a,{color:"#C9190B",height:"20px",width:"20px"}):g.a.createElement(Re.a,{color:"#151515",height:"20px",width:"20px"})}},{key:"render",value:function(){return this.icon()}}]),r}(v.Component);Fe.propTypes={factState:b.a.string};var ke=Fe,Pe=r(28),De=r(409),we=r(205),xe=r(766),Te=r(762);function Be(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=y()(e);if(t){var n=y()(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return m()(this,r)}}var He=function(e){p()(r,e);var t=Be(r);function r(e){var a;return i()(this,r),(a=t.call(this,e)).state={isReference:a.props.isReference},a}return u()(r,[{key:"render",value:function(){var e=this.props,t=e.updateReferenceId,r=e.id;return this.state.isReference?g.a.createElement(xe.a,{className:"reference-selector pointer",onClick:function(){return t()}}):g.a.createElement(Te.a,{className:"reference-selector pointer",onClick:function(){return t(r)}})}}]),r}(v.Component);He.propTypes={isReference:b.a.bool,updateReferenceId:b.a.func,id:b.a.string};var Ne=He;function Me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=y()(e);if(t){var n=y()(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return m()(this,r)}}var Oe=function(e){p()(s,e);var t,r,a=Me(s);function s(e){var t;return i()(this,s),(t=a.call(this,e)).shiftReferenceToFront=function(e){var r,a;return r=e.findIndex((function(e){return e.id===t.props.referenceId})),a=e.splice(r,1),e.unshift(a[0]),e},t.updateReferenceId=function(e){t.fetchCompare(t.systemIds,t.baselineIds,t.HSPIds,e)},t.state={emptyStateMessage:["You currently have no system or baselines displayed. Add at least two","systems or baselines to compare their facts."]},t.masterList=[],t.setSystemIds(),t.setBaselineIds(),t.setHSPIds(),t.setReferenceId(),t.fetchCompare=t.fetchCompare.bind(G()(t)),t.removeSystem=t.removeSystem.bind(G()(t)),t.formatDate=t.formatDate.bind(G()(t)),t}return u()(s,[{key:"componentDidMount",value:(r=o()(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.insights.chrome.auth.getUser();case 2:t=this.props.fetchCompare,(this.systemIds.length>0||this.baselineIds.length>0||this.HSPIds.length>0)&&t(this.systemIds,this.baselineIds,this.HSPIds,this.props.referenceId);case 4:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"formatEntities",value:function(e,t,r){var a,n=[],s={};if(0===e.length&&0===t.length&&0===r.length)return[];e=e.map((function(e){return e.type="system",e})),t=t.map((function(e){return e.type="baseline",e})),(r=r.map((function(e){return e.type="historical-system-profile",e}))).forEach((function(e){s.hasOwnProperty(e.system_id)?s[e.system_id].push(e):s[e.system_id]=[e]})),n=e;for(var o=function(){var t=V()(i[c],2),r=t[0],a=t[1],s=e.find((function(e){return r===e.id})),o=void 0;void 0!==s?(o=n.indexOf(s),n=[].concat(K()(n.slice(0,o+1)),K()(a),K()(n.slice(o+1,n.length)))):n=n.concat(a)},c=0,i=Object.entries(s);c<i.length;c++)o();return a=t.concat(n),this.props.referenceId&&(a=this.shiftReferenceToFront(a)),a}},{key:"setSystemIds",value:function(){this.systemIds=j.a.parse(this.props.location.search).system_ids,this.systemIds=Array.isArray(this.systemIds)?this.systemIds:[this.systemIds],this.systemIds=this.systemIds.filter((function(e){return void 0!==e}))}},{key:"setBaselineIds",value:function(){this.baselineIds=j.a.parse(this.props.location.search).baseline_ids,this.baselineIds=Array.isArray(this.baselineIds)?this.baselineIds:[this.baselineIds],this.baselineIds=this.baselineIds.filter((function(e){return void 0!==e})),this.props.setSelectedBaselines(this.baselineIds,"CHECKBOX")}},{key:"setHSPIds",value:function(){var e=this.props.selectHistoricProfiles;this.HSPIds=j.a.parse(this.props.location.search).hsp_ids,this.HSPIds=Array.isArray(this.HSPIds)?this.HSPIds:[this.HSPIds],this.HSPIds=this.HSPIds.filter((function(e){return void 0!==e})),e(this.HSPIds)}},{key:"setReferenceId",value:function(){this.props.updateReferenceId(j.a.parse(this.props.location.search).reference_id)}},{key:"formatDate",value:function(e){return oe.a.utc(e).format("DD MMM YYYY, HH:mm UTC")}},{key:"removeSystem",value:(t=o()(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("system"===t.type?(this.systemIds=this.systemIds.filter((function(e){return e!==t.id})),this.HSPIds=this.props.historicalProfiles.filter((function(e){return e.system_id!==t.id})).map((function(e){return e.id}))):"baseline"===t.type?this.baselineIds=this.baselineIds.filter((function(e){return e!==t.id})):"historical-system-profile"===t.type&&(this.HSPIds=this.HSPIds.filter((function(e){return e!==t.id}))),t.id!==this.props.referenceId){e.next=4;break}return e.next=4,this.props.updateReferenceId();case 4:this.props.setSelectedHistoricProfiles(this.HSPIds),this.fetchCompare(this.systemIds,this.baselineIds,this.HSPIds,this.props.referenceId);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"fetchCompare",value:function(e,t,r,a){this.systemIds=e,this.baselineIds=t,this.HSPIds=r,_(this.props.history,e,t,r,a),this.props.setSelectedBaselines(this.baselineIds,"CHECKBOX"),this.props.updateReferenceId(a),this.props.fetchCompare(e,t,r,a)}},{key:"renderRows",value:function(e){var t=this,r=[];return void 0!==e&&e.forEach((function(e){r.push(t.renderRow(e))})),r}},{key:"renderLoadingRows",value:function(){for(var e=[],t=[],r=0;r<3;r+=1)t.push(g.a.createElement("td",null,g.a.createElement(R.Skeleton,{size:R.SkeletonSize.md})));for(var a=0;a<10;a+=1)e.push(g.a.createElement("tr",null,t));return e}},{key:"findSystem",value:function(e){var t,r=this,a=[],n=void 0;return this.masterList.forEach((function(s){t=["comparison-cell"],n=e.systems.find((function(e){return e.id===s.id})),r.props.referenceId?"DIFFERENT"===n.state&&(t.push("highlight"),t.push("different-fact-cell")):"DIFFERENT"===e.state&&t.push("highlight"),a.push(g.a.createElement("td",{className:t.join(" ")},null===n.value?"No Data":n.value))})),a}},{key:"renderRow",value:function(e){var t=this,r=[],a=[];return e.comparisons?(r.push(g.a.createElement("td",{className:this.props.expandedRows.includes(e.name)?"nested-fact sticky-column fixed-column-1":"sticky-column fixed-column-1"},this.renderExpandableRowButton(this.props.expandedRows,e.name)," ",e.name)),r.push(g.a.createElement("td",{className:"fact-state sticky-column fixed-column-2"},g.a.createElement(ke,{factState:e.state}))),this.masterList.forEach((function(){r.push(g.a.createElement("td",{className:"comparison-cell"}))})),a.push(g.a.createElement("tr",null,r)),this.props.expandedRows.includes(e.name)&&e.comparisons.forEach((function(e){r=t.renderRowChild(e),a.push(g.a.createElement("tr",{className:"DIFFERENT"===e.state?"unexpected-row":""},r))}))):(r.push(g.a.createElement("td",{className:"sticky-column fixed-column-1"},e.name)),r.push(g.a.createElement("td",{className:"fact-state sticky-column fixed-column-2"},g.a.createElement(ke,{factState:e.state}))),r=r.concat(this.findSystem(e)),a.push(g.a.createElement("tr",{className:"DIFFERENT"===e.state?"unexpected-row":""},r))),a}},{key:"renderRowChild",value:function(e){var t=[];return t.push(g.a.createElement("td",{className:"nested-fact sticky-column fixed-column-1"},g.a.createElement("p",{className:"child-row"},e.name))),t.push(g.a.createElement("td",{className:"fact-state sticky-column fixed-column-2"},g.a.createElement(ke,{factState:e.state}))),t=t.concat(this.findSystem(e))}},{key:"renderSystemHeaders",value:function(){var e=this,t=[],r="",a=this.props.referenceId,n=this.updateReferenceId;return this.masterList.forEach((function(s){"system"===s.type?r=g.a.createElement(z.a,null):"baseline"===s.type?r=g.a.createElement(J.a,null):"historical-system-profile"===s.type&&(r=g.a.createElement(q.a,null)),t.push(g.a.createElement("th",{"header-id":s.id,key:s.id,className:s.id===a?"drift-header reference-header":"drift-header ".concat(s.type,"-header")},g.a.createElement("div",null,g.a.createElement("a",{onClick:function(){return e.removeSystem(s)},className:"remove-system-icon"},g.a.createElement(W.a,null))),g.a.createElement("div",{className:"comparison-header"},g.a.createElement("div",{className:"drift-header-icon"},r),g.a.createElement("div",{className:"system-name"},s.display_name),g.a.createElement("div",{className:"system-updated-and-reference"},g.a.createElement(Ne,{updateReferenceId:n,id:s.id,isReference:s.id===a}),!1===s.system_profile_exists?g.a.createElement(Y.a,{position:"top",content:g.a.createElement("div",null,"System profile does not exist. Please run insights-client on system to upload archive.")},g.a.createElement(Q.a,{color:"#f0ab00"})):"",s.last_updated?e.formatDate(s.last_updated):e.formatDate(s.updated),"system"===s.type||"historical-system-profile"===s.type?g.a.createElement(De.a,{system:s,systemIds:e.systemIds,referenceId:a,fetchCompare:e.fetchCompare,dropdownDirection:$.c.down,hasCompareButton:!0,hasMultiSelect:!0}):null))))})),t}},{key:"renderSortButton",value:function(e){return e===Pe.a?g.a.createElement(ee.a,{className:"active-blue"}):e===Pe.c?g.a.createElement(te.a,{className:"active-blue"}):g.a.createElement(re.a,{className:"not-active"})}},{key:"toggleSort",value:function(e,t){"fact"===e?this.props.toggleFactSort(t):this.props.toggleStateSort(t)}},{key:"renderHeaderRow",value:function(){var e=this,t=this.props.stateSort;return g.a.createElement("tr",{className:"sticky-column-header"},g.a.createElement("th",{className:"fact-header sticky-column fixed-column-1 pointer",key:"fact-header",onClick:function(){return e.toggleSort("fact",e.props.factSort)}},g.a.createElement("div",{className:"active-blue"},"Fact ",this.renderSortButton(this.props.factSort))),g.a.createElement("th",{className:"state-header sticky-column fixed-column-2 pointer",key:"state-header",onClick:function(){return e.toggleSort("state",e.props.stateSort)}},""!==t?g.a.createElement("div",{className:"active-blue"},"State ",this.renderSortButton(this.props.stateSort)):g.a.createElement("div",null,"State ",this.renderSortButton(this.props.stateSort))),this.renderSystemHeaders())}},{key:"renderExpandableRowButton",value:function(e,t){var r=this;return e.includes(t)?g.a.createElement(ae.a,{className:"carat-margin pointer active-blue",onClick:function(){return r.props.expandRow(t)}}):g.a.createElement(ne.a,{className:"carat-margin pointer",onClick:function(){return r.props.expandRow(t)}})}},{key:"renderTable",value:function(e,t){return g.a.createElement(g.a.Fragment,null,g.a.createElement("div",{className:"drift-table-wrapper"},g.a.createElement("table",{className:"pf-c-table pf-m-compact drift-table"},g.a.createElement("thead",null,this.renderHeaderRow()),g.a.createElement("tbody",null,t?this.renderLoadingRows():this.renderRows(e)))))}},{key:"render",value:function(){var e=this.props,t=e.emptyState,r=e.filteredCompareData,a=e.systems,n=e.baselines,s=e.historicalProfiles,o=e.loading,c=this.state.emptyStateMessage;return this.masterList=this.formatEntities(a,n,s),g.a.createElement(g.a.Fragment,null,g.a.createElement(ve,{selectedSystemIds:a.map((function(e){return e.id})),confirmModal:this.fetchCompare,referenceId:this.props.referenceId}),t&&!o?g.a.createElement(we.a,{icon:Z.a,title:"Add systems or baselines to compare",text:c,button:g.a.createElement(be,{isTable:!1})}):this.renderTable(r,o))}}]),s}(v.Component);Oe.propTypes={addSystemModalOpened:b.a.bool,location:b.a.object,history:b.a.object,fetchCompare:b.a.func,fullCompareData:b.a.array,filteredCompareData:b.a.array,systems:b.a.array,baselines:b.a.array,historicalProfiles:b.a.array,factSort:b.a.string,stateSort:b.a.string,loading:b.a.bool,toggleFactSort:b.a.func,toggleStateSort:b.a.func,expandRow:b.a.func,expandedRows:b.a.array,setSelectedBaselines:b.a.func,setSelectedHistoricProfiles:b.a.func,selectHistoricProfiles:b.a.func,emptyState:b.a.bool,updateReferenceId:b.a.func,referenceId:b.a.string};var Ae=Object(E.o)(Object(I.connect)((function(e){return{addSystemModalOpened:e.addSystemModalState.addSystemModalOpened,fullCompareData:e.compareState.fullCompareData,filteredCompareData:e.compareState.filteredCompareData,loading:e.compareState.loading,systems:e.compareState.systems,baselines:e.compareState.baselines,historicalProfiles:e.compareState.historicalProfiles,factSort:e.compareState.factSort,stateSort:e.compareState.stateSort,expandedRows:e.compareState.expandedRows,emptyState:e.compareState.emptyState,referenceId:e.compareState.referenceId}}),(function(e){return{fetchCompare:function(t,r,a,n){return e(M.a.fetchCompare(t,r,a,n))},toggleFactSort:function(t){return e(M.a.toggleFactSort(t))},toggleStateSort:function(t){return e(M.a.toggleStateSort(t))},expandRow:function(t){return e(M.a.expandRow(t))},setSelectedBaselines:function(t,r){return e(N.a.setSelectedBaselines(t,r))},selectHistoricProfiles:function(t){return e(O.a.selectHistoricProfiles(t))},setSelectedHistoricProfiles:function(t){return e(O.a.setSelectedHistoricProfiles(t))}}}))(Oe)),je=r(655),_e=r(653),Ue=r(662),Ke=r(370);var Le={toggleFilterDropDown:function(){return{type:Ke.a.OPEN_FILTER_DROPDOWN}}};function Ve(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=y()(e);if(t){var n=y()(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return m()(this,r)}}var Xe=function(e){p()(r,e);var t=Ve(r);function r(e){var a;return i()(this,r),(a=t.call(this,e)).onToggle=a.onToggle.bind(G()(a)),a.createDropdownItem=a.createDropdownItem.bind(G()(a)),a}return u()(r,[{key:"onToggle",value:function(){this.props.toggleDropDown()}},{key:"createDropdownItem",value:function(e){var t=this;return g.a.createElement(je.a,{className:"state-filter-checkbox",id:e.display,label:e.display,isChecked:e.selected,onChange:function(){return t.props.addStateFilter(e)}})}},{key:"createDropdownArray",value:function(e){var t=[];return e.forEach(function(e){var r=this.createDropdownItem(e);t.push(r)}.bind(this)),t}},{key:"createSelectedViewsString",value:function(e){for(var t=[],r="",a=0;a<e.length;a++)e[a].selected&&t.push(e[a].display);for(var n=0;n<t.length;n++)r+=t[n],n+1<t.length&&(r+=", ");return r}},{key:"render",value:function(){var e,t,r=this.props.stateFilters;return e=this.createDropdownArray(r),t=this.createSelectedViewsString(r),g.a.createElement(g.a.Fragment,null,g.a.createElement(_e.a,{className:"state-filter-dropdown",onSelect:this.onToggle,toggle:g.a.createElement(Ue.a,{onToggle:this.onToggle},"View: ",t),isOpen:this.props.filterDropdownOpened,dropdownItems:e}))}}]),r}(v.Component);Xe.propTypes={toggleDropDown:b.a.func,filterDropdownOpened:b.a.bool,stateFilters:b.a.array,addStateFilter:b.a.func};var Ge=Object(I.connect)((function(e){return{filterDropdownOpened:e.filterDropdownOpened,stateFilters:e.compareState.stateFilters}}),(function(e){return{toggleDropDown:function(){return e(Le.toggleFilterDropDown())},addStateFilter:function(t){return e(M.a.addStateFilter(t))}}}))(Xe),Ye=r(768),$e=r.n(Ye),ze=r(700);function Je(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=y()(e);if(t){var n=y()(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return m()(this,r)}}var qe=function(e){p()(r,e);var t=Je(r);function r(e){var a;return i()(this,r),(a=t.call(this,e)).updateFactFilter=function(e){a.setState({filter:e}),a.setFactFilter(e)},a.setFactFilter=$e()((function(e){this.props.changeFactFilter(e)}),250),a.state={filter:a.props.factFilter},a.setFactFilter=a.setFactFilter.bind(G()(a)),a}return u()(r,[{key:"componentDidUpdate",value:function(e){""!==e.factFilter&&""===this.props.factFilter&&this.setState({filter:this.props.factFilter})}},{key:"render",value:function(){return g.a.createElement(g.a.Fragment,null,g.a.createElement(ze.a,{value:this.state.filter,id:"filterByFact",placeholder:"Filter by fact",onChange:this.updateFactFilter,"aria-label":"filter by fact"}))}}]),r}(v.Component);qe.propTypes={changeFactFilter:b.a.func,factFilter:b.a.string};var We=Object(I.connect)((function(e){return{factFilter:e.compareState.factFilter}}),(function(e){return{changeFactFilter:function(t){return e(M.a.filterByFact(t))}}}))(qe),Qe=r(770),Ze=r(772),et=r(744);function tt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=y()(e);if(t){var n=y()(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return m()(this,r)}}var rt=function(e){p()(r,e);var t=tt(r);function r(e){var a;return i()(this,r),(a=t.call(this,e)).confirmDriftModal=function(){var e=a.props,t=e.toggleModal,r=e.revertCompareData,n=e.history,s=e.previousStateSystems;t(),r(),_(n,s.map((function(e){return e.id})))},a.confirmBaselineModal=function(){var e=a.props,t=e.toggleModal,r=e.revertBaselineFetch,n=e.tableId;t(),r(n)},a}return u()(r,[{key:"render",value:function(){var e=this,t=this.props,r=t.errorAlertOpened,a=t.error,n=t.baselineError;return g.a.createElement(g.a.Fragment,null,r&&g.a.createElement(Ze.a,{variant:"danger",title:"Error",action:g.a.createElement(et.a,{onClose:function(){return a.status?e.confirmDriftModal():e.confirmBaselineModal()}})},"Status Code: ",a.status?a.status:n.status,g.a.createElement("br",null),a.detail?a.detail:n.detail))}}]),r}(v.Component);rt.propTypes={confirmModal:b.a.func,errorAlertOpened:b.a.bool,error:b.a.object,baselineError:b.a.object,toggleModal:b.a.func,history:b.a.object,fullCompareData:b.a.array,revertCompareData:b.a.func,previousStateSystems:b.a.array,revertBaselineFetch:b.a.func,tableId:b.a.string};var at=Object(E.o)(Object(I.connect)((function(e){return{fullCompareData:e.compareState.fullCompareData,previousStateSystems:e.compareState.previousStateSystems,errorAlertOpened:e.errorAlertOpened,error:e.compareState.error,baselineError:e.baselinesTableState.checkboxTable.baselineError}}),(function(e){return{toggleModal:function(){return e(H.toggleErrorAlert())},revertCompareData:function(){return e(M.a.revertCompareData())},revertBaselineFetch:function(t){return e(N.a.revertBaselineFetch(t))}}}))(rt)),nt=r(735),st=r(759);function ot(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=y()(e);if(t){var n=y()(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return m()(this,r)}}var ct=function(e){p()(r,e);var t=ot(r);function r(e){return i()(this,r),t.call(this,e)}return u()(r,[{key:"render",value:function(){var e=this.props.exportToCSV;return g.a.createElement(st.a,{className:"pointer not-active export-button-margin",onClick:e})}}]),r}(v.Component);ct.propTypes={exportToCSV:b.a.func};var it=Object(I.connect)(null,(function(e){return{exportToCSV:function(){return e(M.a.exportToCSV())}}}))(ct),lt=r(660),ut=r(222);function ft(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=y()(e);if(t){var n=y()(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return m()(this,r)}}var pt=function(e){p()(r,e);var t=ft(r);function r(e){var a;return i()(this,r),(a=t.call(this,e)).setStateChips=function(e){var t=[];return e.forEach((function(e){e.selected&&t.push(e.display)})),t},a.removeChip=function(e){var t=a.props,r=t.stateFilters,n=t.addStateFilter,s=t.filterByFact;insights.chrome.isBeta()?"Expected"===e||"Unexpected"===e||"Uncertain"===e?r.forEach((function(t){t.display===e&&n(t)})):s(""):"Same"===e||"Different"===e||"Incomplete data"===e?r.forEach((function(t){t.display===e&&n(t)})):s("")},a.checkChips=function(){var e=a.state.chipGroup,t=a.props.setIsEmpty,r=!0;e.forEach((function(e){e.chips.length>0&&(r=!1)})),t(r)},a.state={chipGroup:[{category:"State",chips:a.setStateChips(a.props.stateFilters)},{category:"Fact name",chips:""!==a.props.factFilter?[a.props.factFilter]:[]}]},a}return u()(r,[{key:"componentDidUpdate",value:function(e){var t,r=this.props,a=r.stateFilters,n=r.factFilter,s=this.state.chipGroup,o=s[0],c=s[1];if(e!==this.props){if(a!==e.stateFilters){var i=[];a.forEach((function(e){e.selected&&i.push(e.display)})),o={category:"State",chips:i}}n!==e.factFilter&&(c={category:"Fact name",chips:""!==n?[n]:[]}),t=[o,c],this.setState({chipGroup:t})}}},{key:"render",value:function(){var e=this,t=this.state.chipGroup,r=0;return this.checkChips(),t.map((function(t){return g.a.createElement(lt.a,{categoryName:t.category,key:t.category},t.chips.map((function(a){return g.a.createElement(ut.a,{key:t.category+r++,onClick:function(){return e.removeChip(a)}},a)})))}))}}]),r}(v.Component);pt.propTypes={factFilter:b.a.string,stateFilters:b.a.array,filterByFact:b.a.func,addStateFilter:b.a.func,setIsEmpty:b.a.func};var dt=Object(I.connect)((function(e){return{factFilter:e.compareState.factFilter,stateFilters:e.compareState.stateFilters}}),(function(e){return{filterByFact:function(t){return e(M.a.filterByFact(t))},addStateFilter:function(t){return e(M.a.addStateFilter(t))}}}))(pt);function mt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=y()(e);if(t){var n=y()(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return m()(this,r)}}var ht=function(e){p()(a,e);var t,r=mt(a);function a(e){var t;return i()(this,a),(t=r.call(this,e)).setIsEmpty=function(e){t.setState({isEmpty:e})},t.clearFilters=function(){(0,t.props.clearComparisonFilters)()},t.clearComparison=function(){var e=t.props,r=e.history,a=e.clearComparison,n=e.clearSelectedBaselines,s=e.selectHistoricProfiles,o=e.selectedHSPIds,c=e.updateReferenceId;a(),n("CHECKBOX"),s(o),c(),_(r,[])},t.state={actionKebabItems:[g.a.createElement(C.a,{key:"remove-systems",component:"button",onClick:t.clearComparison},"Clear all comparisons")],isEmpty:!0},t.props.clearSelectedBaselines("CHECKBOX"),t}return u()(a,[{key:"componentDidMount",value:(t=o()(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.insights.chrome.auth.getUser();case 2:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.props,r=t.loading,a=t.emptyState,n=t.updatePagination,s=t.updateReferenceId,o=t.page,c=t.perPage,i=t.totalFacts,l=this.state,u=l.actionKebabItems,f=l.isEmpty;return this.props.error.detail&&this.props.toggleErrorAlert(),g.a.createElement(g.a.Fragment,null,g.a.createElement(R.PageHeader,null,g.a.createElement(R.PageHeaderTitle,{title:"Comparison"})),g.a.createElement(R.Main,null,g.a.createElement(at,null),g.a.createElement(F.a,{className:"pf-t-light pf-m-opaque-100"},g.a.createElement(k.a,null,g.a.createElement("div",null,a?null:g.a.createElement(g.a.Fragment,null,g.a.createElement(P.a,{className:"drift-toolbar"},g.a.createElement(D.a,null,g.a.createElement(w.a,{variant:"filter-group"},g.a.createElement(x.a,null,g.a.createElement(We,null)),g.a.createElement(x.a,null,g.a.createElement(Ge,null))),g.a.createElement(w.a,{variant:"button-group"},g.a.createElement(x.a,null,g.a.createElement(be,{loading:r}))),g.a.createElement(w.a,{variant:"icon-button-group"},g.a.createElement(x.a,null,g.a.createElement(it,null)),g.a.createElement(x.a,null,g.a.createElement(Qe.a,{dropdownItems:u}))),g.a.createElement(x.a,{variant:"pagination",align:{default:"alignRight"}},g.a.createElement(nt.b,{page:o,perPage:c,total:i,isCompact:!0,updatePagination:n,widgetId:"drift-pagination-top",variant:T.b.top})))),g.a.createElement(P.a,{className:"drift-toolbar"},g.a.createElement(D.a,null,g.a.createElement(w.a,null,g.a.createElement(x.a,null,g.a.createElement(dt,{setIsEmpty:this.setIsEmpty})),f?null:g.a.createElement(x.a,null,g.a.createElement("a",{onClick:function(){return e.clearFilters()}},"Clear filters")))))),g.a.createElement(Ae,{updateReferenceId:s}),a||r?null:g.a.createElement(P.a,{className:"drift-toolbar"},g.a.createElement(w.a,{className:"pf-c-pagination"},g.a.createElement(x.a,null,g.a.createElement(nt.b,{page:o,perPage:c,total:i,isCompact:!1,updatePagination:n,widgetId:"drift-pagination-bottom",variant:T.b.bottom})))))))))}}]),a}(v.Component);ht.propTypes={perPage:b.a.number,page:b.a.number,totalFacts:b.a.number,error:b.a.object,loading:b.a.bool,toggleErrorAlert:b.a.func,clearSelectedBaselines:b.a.func,emptyState:b.a.bool,updatePagination:b.a.func,updateReferenceId:b.a.func,clearComparison:b.a.func,clearComparisonFilters:b.a.func,history:b.a.object,selectHistoricProfiles:b.a.func,selectedHSPIds:b.a.array};t.default=Object(E.o)(Object(I.connect)((function(e){return{page:e.compareState.page,perPage:e.compareState.perPage,totalFacts:e.compareState.totalFacts,error:e.compareState.error,loading:e.compareState.loading,emptyState:e.compareState.emptyState,selectedHSPIds:e.historicProfilesState.selectedHSPIds}}),(function(e){return{toggleErrorAlert:function(){return e(H.toggleErrorAlert())},clearSelectedBaselines:function(t){return e(N.a.clearSelectedBaselines(t))},updatePagination:function(t){return e(M.a.updatePagination(t))},updateReferenceId:function(t){return e(M.a.updateReferenceId(t))},clearComparison:function(){return e(M.a.clearComparison())},clearComparisonFilters:function(){return e(M.a.clearComparisonFilters())},selectHistoricProfiles:function(t){return e(O.a.selectHistoricProfiles(t))}}}))(ht))}}]);
//# sourceMappingURL=../sourcemaps/5.js.map