(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{407:function(e,t,a){
/** @license MIT License (c) copyright 2010-2014 original author or authors */
var n=a(606);t.find=function(e,t,a,o){if("string"!=typeof t)return;if(""===t)return{target:e,key:void 0};if(t===r)return{target:e,key:""};var i,c=e,l=void 0!==o;return n(t,(function(t){if(null==e)return c=null,!1;i=Array.isArray(e)?l?function(e,t,a,n){var r=t;if(r<0)throw new Error("array index out of bounds "+r);if(void 0!==n&&"function"==typeof e&&(r=e(t,a,n))<0)throw new Error("could not find patch context "+n);return r}(a,h(t),e,o):"-"===t?t:h(t):t,c=e,e=e[i]})),null===c?void 0:{target:c,key:i}},t.join=function(e){return e.join(r)},t.absolute=function(e){return e[0]===r?e:r+e},t.parse=function(e){var t=[];return n(e,t.push.bind(t)),t},t.contains=function(e,t){return 0===t.indexOf(e)&&t[e.length]===r},t.encodeSegment=function(e){return e.replace(u,s).replace(o,i)},t.decodeSegment=function(e){return e.replace(c,r).replace(f,l)},t.parseArrayIndex=h,t.isValidArrayIndex=d;var r="/",o=/\//g,i="~1",c=/~1/g,l="~",u=/~/g,s="~0",f=/~0/g;var p=/^(0|[1-9]\d*)$/;function d(e){return p.test(e)}function h(e){if(d(e))return+e;throw new SyntaxError("invalid array index "+e)}},408:function(e,t){function a(e){Error.call(this),this.name=this.constructor.name,this.message=e,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}e.exports=a,a.prototype=Object.create(Error.prototype),a.prototype.constructor=a},473:function(e,t){
/** @license MIT License (c) copyright 2010-2014 original author or authors */
t.cons=function(e,t){var a=t.length,n=new Array(a+1);n[0]=e;for(var r=0;r<a;++r)n[r+1]=t[r];return n},t.tail=function(e){for(var t=e.length-1,a=new Array(t),n=0;n<t;++n)a[n]=e[n+1];return a},t.map=function(e,t){for(var a=new Array(t.length),n=0;n<t.length;++n)a[n]=e(t[n]);return a}},474:function(e,t,a){var n=a(407),r=a(475),o=a(607),i=a(608),c=a(473),l=a(476),u=a(408),s=a(477),f=n.find,p=n.parseArrayIndex;function d(e,t){var a=e.target;if(Array.isArray(a))if("-"===e.key)a.push(t);else{if(e.key>a.length)throw new u("target of add outside of array bounds");a.splice(e.key,0,t)}else{if(!b(a))throw new u("target of add must be an object or array "+e.key);a[e.key]=t}}function h(e,t){if(e.path===t.path&&"remove"===t.op)throw new TypeError("Can't commute add,remove -> remove,add for same path");return i(e,t)}function m(e){var t,a=e.target;if(Array.isArray(a))return(t=a.splice(p(e.key),1))[0];if(b(a))return t=a[e.key],delete a[e.key],t;throw new u("target of remove must be an object or array")}function v(e){return void 0===e||null==e.target&&void 0!==e.key}function y(e){return void 0!==e.key&&void 0===e.target[e.key]}function b(e){return null!==e&&"object"==typeof e}t.test={apply:function(e,t,a){var n,r,i=f(e,t.path,a.findContext,t.context),c=i.target;Array.isArray(c)?(n=p(i.key),r=c[n]):r=void 0===i.key?i.target:i.target[i.key];if(!o(r,t.value))throw new l("test failed "+JSON.stringify(t));return e},inverse:function(e,t){return e.push(t),1},commute:function(e,t){if(e.path===t.path&&"remove"===t.op)throw new TypeError("Can't commute test,remove -> remove,test for same path");if("test"===t.op||"replace"===t.op)return[t,e];return i(e,t)}},t.add={apply:function(e,t,a){var n=f(e,t.path,a.findContext,t.context);if(v(n))throw new u("path does not exist "+t.path);if(void 0===t.value)throw new u("missing value");var o=r(t.value);if(void 0===n.key)return o;return d(n,o),e},inverse:function(e,t){var a=t.context;void 0!==a&&(a={before:a.before,after:c.cons(t.value,a.after)});return e.push({op:"test",path:t.path,value:t.value,context:a}),e.push({op:"remove",path:t.path,context:a}),1},commute:h},t.remove={apply:function(e,t,a){var n=f(e,t.path,a.findContext,t.context);if(v(n)||void 0===n.target[n.key])throw new u("path does not exist "+t.path);return m(n),e},inverse:function(e,t,a,n){var r=n[a-1];if(void 0===r||"test"!==r.op||r.path!==t.path)throw new s("cannot invert remove w/o test");var o=r.context;void 0!==o&&(o={before:o.before,after:c.tail(o.after)});return e.push({op:"add",path:r.path,value:r.value,context:o}),2},commute:function(e,t){if(e.path===t.path&&"remove"===t.op)return[t,e];return i(e,t)}},t.replace={apply:function(e,t,a){var n=f(e,t.path,a.findContext,t.context);if(v(n)||y(n))throw new u("path does not exist "+t.path);if(void 0===t.value)throw new u("missing value");var o=r(t.value);if(void 0===n.key)return o;var i=n.target;Array.isArray(i)?i[p(n.key)]=o:i[n.key]=o;return e},inverse:function(e,t,a,n){var r=n[a-1];if(void 0===r||"test"!==r.op||r.path!==t.path)throw new s("cannot invert replace w/o test");var o=r.context;void 0!==o&&(o={before:o.before,after:c.cons(r.value,c.tail(o.after))});return e.push({op:"test",path:r.path,value:t.value}),e.push({op:"replace",path:r.path,value:r.value}),2},commute:function(e,t){if(e.path===t.path&&"remove"===t.op)throw new TypeError("Can't commute replace,remove -> remove,replace for same path");if("test"===t.op||"replace"===t.op)return[t,e];return i(e,t)}},t.move={apply:function(e,t,a){if(n.contains(t.path,t.from))throw new u("move.from cannot be ancestor of move.path");var r=f(e,t.path,a.findContext,t.context),o=f(e,t.from,a.findContext,t.fromContext);return d(r,m(o)),e},inverse:function(e,t){return e.push({op:"move",path:t.from,context:t.fromContext,from:t.path,fromContext:t.context}),1},commute:function(e,t){if(e.path===t.path&&"remove"===t.op)throw new TypeError("Can't commute move,remove -> move,replace for same path");return i(e,t)}},t.copy={apply:function(e,t,a){var n=f(e,t.path,a.findContext,t.context),o=f(e,t.from,a.findContext,t.fromContext);if(v(o)||y(o))throw new u("copy.from must exist");var i,c=o.target;i=Array.isArray(c)?c[p(o.key)]:c[o.key];return d(n,r(i)),e},inverse:function(e,t){throw new s("cannot invert "+t.op)},commute:h}},475:function(e,t){function a(e){return null==e||"object"!=typeof e?e:Array.isArray(e)?function(e){for(var t=e.length,n=new Array(t),r=0;r<t;++r)n[r]=a(e[r]);return n}(e):function(e){for(var t,n=Object.keys(e),r={},o=0,i=n.length;o<i;++o)t=n[o],r[t]=a(e[t]);return r}(e)}
/** @license MIT License (c) copyright 2010-2014 original author or authors */
e.exports=a},476:function(e,t){function a(e){Error.call(this),this.name=this.constructor.name,this.message=e,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}e.exports=a,a.prototype=Object.create(Error.prototype),a.prototype.constructor=a},477:function(e,t){function a(e){Error.call(this),this.name=this.constructor.name,this.message=e,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}e.exports=a,a.prototype=Object.create(Error.prototype),a.prototype.constructor=a},603:function(e,t,a){
/** @license MIT License (c) copyright 2010-2014 original author or authors */
var n=a(604),r=a(473),o=a(605),i=a(609),c=a(407).encodeSegment;t.diff=function(e,t,a){return s(e,t,"",function(e,t){return"object"==typeof e?{patch:t,hash:f(d,e.hash,u),makeContext:f(d,e.makeContext,p),invertible:!(!1===e.invertible)}:{patch:t,hash:f(d,e,u),makeContext:p,invertible:!0}}(a,[])).patch},t.patch=o.apply,t.patchInPlace=o.applyInPlace,t.inverse=i,t.clone=o.clone,t.InvalidPatchOperationError=a(408),t.TestFailedError=a(476),t.PatchNotInvertibleError=a(477);var l=o.isValidObject,u=o.defaultHash;function s(e,t,a,o){return Array.isArray(e)&&Array.isArray(t)?function(e,t,a,o){var i=r.map(o.hash,e),c=r.map(o.hash,t),l=n.compare(i,c);return function(e,t,a,r,o){var i=0;return n.reduce((function(r,o,c,l){var u,f,p=r.patch,d=a+"/"+(l+i);return o===n.REMOVE?(u=p[p.length-1],f=r.makeContext(l,e),r.invertible&&p.push({op:"test",path:d,value:e[l],context:f}),void 0!==u&&"add"===u.op&&u.path===d?(u.op="replace",u.context=f):p.push({op:"remove",path:d,context:f}),i-=1):o===n.ADD?(p.push({op:"add",path:d,value:t[c],context:r.makeContext(l,e)}),i+=1):s(e[l],t[c],d,r),r}),r,o)}(e,t,a,o,l)}(e,t,a,o):l(e)&&l(t)?function(e,t,a,n){var r,o,i=Object.keys(t),l=n.patch;for(r=i.length-1;r>=0;--r){o=i[r];var u=a+"/"+c(o);void 0!==e[o]?s(e[o],t[o],u,n):l.push({op:"add",path:u,value:t[o]})}for(i=Object.keys(e),r=i.length-1;r>=0;--r)if(o=i[r],void 0===t[o]){var f=a+"/"+c(o);n.invertible&&l.push({op:"test",path:f,value:e[o]}),l.push({op:"remove",path:f})}return n}(e,t,a,o):function(e,t,a,n){e!==t&&(n.invertible&&n.patch.push({op:"test",path:a,value:e}),n.patch.push({op:"replace",path:a,value:t}));return n}(e,t,a,o)}function f(e,t,a){return e(t)?t:a}function p(){}function d(e){return"function"==typeof e}},604:function(e,t){var a,n,r;function o(e,t,o,i,c,l){return t[c+i]===o[l+i]?{value:e[l+1][c+1].value,type:r}:e[l][c+1].value<e[l+1][c].value?{value:e[l][c+1].value+1,type:a}:{value:e[l+1][c].value+1,type:n}}
/** @license MIT License (c) copyright 2010-2014 original author or authors */
t.compare=function(e,t){for(var i=e.length,c=t.length,l=function(e,t){var a=0,n=Math.min(e.length,t.length);for(;a<n&&e[a]===t[a];)++a;return a}(e,t),u=l<i&&l<c?function(e,t){var a=e.length-1,n=t.length-1,r=Math.min(a,n),o=0;for(;o<r&&e[a-o]===t[n-o];)++o;return o}(e,t):0,s=u+l-1,f=function(e,t){var o,i,c,l=[];for(c=l[t]=[],i=0;i<e;++i)c[i]={value:e-i,type:a};for(o=0;o<t;++o)l[o]=[],l[o][e]={value:t-o,type:n};return l[t][e]={value:0,type:r},l}(i-=s,c-=s),p=i-1;p>=0;--p)for(var d=c-1;d>=0;--d)f[d][p]=o(f,e,t,l,p,d);return{prefix:l,matrix:f,suffix:u}},t.reduce=function(e,t,o){var i,c,l,u,s=o.matrix,f=o.prefix;for(i=0;i<f;++i)t=e(t,r,i,i);l=i,f=s.length,i=0,c=0;for(;i<f;)switch(u=s[i][c].type,t=e(t,u,i+l,c+l),u){case r:++i,++c;break;case a:++c;break;case n:++i}for(i+=l,c+=l,f=o.suffix,l=0;l<f;++l)t=e(t,r,i+l,c+l);return t},t.REMOVE=a=-1,t.ADD=n=1,t.EQUAL=r=0},605:function(e,t,a){
/** @license MIT License (c) copyright 2010-2014 original author or authors */
var n=a(474),r=a(475),o=a(408);t.apply=function(e,t,a){return c(e,r(t),a)},t.applyInPlace=c,t.clone=r,t.isValidObject=l,t.defaultHash=function(e){return l(e)||function(e){return"[object Array]"===Object.prototype.toString.call(e)}(e)?JSON.stringify(e):e};var i={};function c(e,t,a){if(a||(a=i),!Array.isArray(e))return t;for(var r,c,l=0;l<e.length;++l){if(c=e[l],void 0===(r=n[c.op]))throw new o("invalid op "+JSON.stringify(c));t=r.apply(t,c,a)}return t}function l(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}},606:function(e,t){
/** @license MIT License (c) copyright 2010-2014 original author or authors */
e.exports=function(e,t){var i,c,l,u;i=e.charAt(0)===n?1:0,c="",a.lastIndex=i;for(;l=a.exec(e);)if(u=l[0],c+=e.slice(i,a.lastIndex-u.length),i=a.lastIndex,u===n){if(!1===t(c))return e;c=""}else c+=u===o?n:r;return c+=e.slice(i),t(c),e};var a=/\/|~1|~0/g,n="/",r="~",o="~1"},607:function(e,t){function a(e,t){return e===t||(Array.isArray(e)&&Array.isArray(t)?function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!a(e[n],t[n]))return!1;return!0}(e,t):"object"==typeof e&&"object"==typeof t&&function(e,t){if(null===e&&null!==t||null!==e&&null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var o,i=0;i<n.length;++i)if(!((o=n[i])in t&&a(e[o],t[o])))return!1;return!0}(e,t))}e.exports=a},608:function(e,t,a){var n=a(407);function r(e,t,a,n,r){var o=t.length-1,i=+t[o],c=+n[o],l=n.slice();return i>c?l:("add"===e.op||"copy"===e.op?l[o]=Math.max(0,c-r):"remove"===e.op&&(l[o]=Math.max(0,c+r)),l)}function o(e){return"remove"===e.op?{op:e.op,path:e.path}:"copy"===e.op||"move"===e.op?{op:e.op,path:e.path,from:e.from}:{op:e.op,path:e.path,value:e.value}}e.exports=function(e,t){var a=n.parse(e.path),i=n.parse(t.path),c=function(e,t){var a=e.length,n=t.length;if(0===a||0===n||a<2&&n<2)return[];var r=a===n?a-1:Math.min(a,n),o=0;for(;o<r&&e[o]===t[o];)++o;return e.slice(0,o)}(a,i),l=function(e,t,a){return n.isValidArrayIndex(e[a])&&n.isValidArrayIndex(t[a])}(a,i,c.length),u=o(e),s=o(t);return 0!==c.length||l?l?function(e,t,a,o){if(t.length===o.length)return function(e,t,a,r){var o,i=t.length-1,c=+t[i],l=+r[i];c<l?"add"===e.op||"copy"===e.op?((o=r.slice())[i]=Math.max(0,l-1),a.path=n.absolute(n.join(o))):"remove"===e.op&&((o=r.slice())[i]=l+1,a.path=n.absolute(n.join(o))):"add"===a.op||"copy"===a.op?((o=t.slice())[i]=c+1,e.path=n.absolute(n.join(o))):c>l&&"remove"===a.op&&((o=t.slice())[i]=Math.max(0,c-1),e.path=n.absolute(n.join(o)));return[a,e]}(e,t,a,o);t.length>o.length?(t=r(a,o,e,t,-1),e.path=n.absolute(n.join(t))):(o=r(e,t,a,o,1),a.path=n.absolute(n.join(o)));return[a,e]}(u,a,s,i):function(e,t,a,n){if(e.path===a.path)throw new TypeError("cannot commute "+e.op+","+a.op+" with identical object paths");return[a,e]}(u,0,s):[s,u]}},609:function(e,t,a){var n=a(474);function r(e,t,a,r){var o=n[t.op];return void 0!==o&&"function"==typeof o.inverse?o.inverse(e,t,a,r):1}e.exports=function(e){var t,a,n=[];for(t=e.length-1;t>=0;t-=a)a=r(n,e[t],t,e);return n}},613:function(e,t,a){"use strict";a.r(t);var n=a(25),r=a.n(n),o=a(17),i=a.n(o),c=a(18),l=a.n(c),u=a(19),s=a.n(u),f=a(20),p=a.n(f),d=a(183),h=a.n(d),m=a(21),v=a.n(m),y=a(1),b=a.n(y),g=a(3),E=a.n(g),k=a(12),F=a(22),x=a(249),w=a(431),C=a(432),N=a(433),D=a(434),M=a(379),A=a(296),S=a(386),B=a(454),O=a(456),T=a(455),j=a(416),V=a(31);var I={toggleFactModal:function(){return{type:V.a.TOGGLE_FACT_MODAL}},setFactData:function(e){return{type:V.a.SET_FACT_DATA,payload:e}}},R=function(e){function t(e){var a;return i()(this,t),(a=s()(this,p()(t).call(this,e))).handleAddFact=a.handleAddFact.bind(h()(a)),a}return v()(t,e),l()(t,[{key:"handleAddFact",value:function(){var e=this.props,t=e.setFactData,a=e.toggleFactModal;t({factName:"",factValue:"",fact:[]}),a()}},{key:"render",value:function(){return b.a.createElement(B.a,{className:"display-margin"},b.a.createElement(O.a,null,b.a.createElement(T.a,null,b.a.createElement(j.a,{variant:"primary",onClick:this.handleAddFact},"Add fact"))))}}]),t}(y.Component);R.propTypes={toggleFactModal:E.a.func,setFactData:E.a.func};var _=Object(F.connect)(null,(function(e){return{toggleFactModal:function(){return e(I.toggleFactModal())},setFactData:function(t){return e(I.setFactData(t))}}}))(R),L=a(435),P=a(444),H=a(445),K=a(437),J=a(446),q=a(245),z=a(603),G=a.n(z),U=a(423),Q=a(439),$=a(244),W=a(440),X=function(e){function t(e){var a;return i()(this,t),(a=s()(this,p()(t).call(this,e))).editFact=a.editFact.bind(h()(a)),a.deleteFact=a.deleteFact.bind(h()(a)),a.addFact=a.addFact.bind(h()(a)),a.state={isOpen:!1},a}return v()(t,e),l()(t,[{key:"onKebabToggle",value:function(e){this.setState({isOpen:e})}},{key:"editFact",value:function(){var e=this.props,t=e.toggleFactModal,a=e.setFactData,n=e.factName,r=e.factValue,o=e.fact,i=e.isCategory,c=e.isSubFact;t(),a({factName:n,factValue:r,fact:o,isCategory:i,isSubFact:c})}},{key:"deleteFact",value:function(){var e,t=this.props,a=t.baselineData,n=t.patchBaseline,r=t.factName,o=t.factValue,i=t.fact,c={name:r,value:o};if(i.values&&""!==o){var l=te.buildDeletedSubFact(c,i);e=te.makeDeleteFactPatch(l,a,i)}else e=te.makeDeleteFactPatch(c,a,[]);n(a.id,e)}},{key:"addFact",value:function(){var e=this.props,t=e.toggleFactModal,a=e.setFactData,n=e.fact,r=e.isCategory;t(),a({factName:"",factValue:"",fact:n,isSubFact:r})}},{key:"render",value:function(){var e=this,t=this.state.isOpen,a=this.props.isCategory,n=[];return!0===a&&n.push(b.a.createElement(U.a,{key:"add fact",component:"button",onClick:this.addFact},"Add sub fact")),n.push(b.a.createElement(U.a,{key:"edit",component:"button",onClick:this.editFact},a?"Edit category":"Edit fact"),b.a.createElement(U.a,{key:"delete",component:"button",onClick:this.deleteFact},a?"Delete category":"Delete fact")),b.a.createElement(Q.a,{position:$.d.right,style:{float:"right"},className:"baseline-fact-kebab",toggle:b.a.createElement(W.a,{onToggle:function(t){return e.onKebabToggle(t)}}),isOpen:t,dropdownItems:n,isPlain:!0})}}]),t}(y.Component);X.propTypes={factName:E.a.string,factValue:E.a.string,fact:E.a.object,isCategory:E.a.bool,isSubFact:E.a.bool,toggleFactModal:E.a.func,setFactData:E.a.func,baselineData:E.a.object,patchBaseline:E.a.func};var Y=Object(F.connect)((function(e){return{baselineData:e.baselinesTableState.baselineData}}),(function(e){return{toggleFactModal:function(){return e(I.toggleFactModal())},setFactData:function(t){return e(I.setFactData(t))},patchBaseline:function(t,a){return e(q.a.patchBaseline(t,a))}}}))(X);function Z(e,t,a){var n=[];return Array.isArray(a)&&0===a.length?t.baseline_facts.forEach((function(t){t.name!==e.name&&n.push(t)})):t.baseline_facts.forEach((function(e){e.name!==a.name&&n.push(e)})),n}function ee(e,t){return G.a.diff(t,e)}var te={renderKebab:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.factName,a=e.factValue,n=e.fact,r=e.isCategory,o=e.isSubFact;return b.a.createElement("td",null,b.a.createElement(Y,{factName:t,factValue:a,fact:n,isCategory:r,isSubFact:o}))},buildNewFactData:function(e,t,a,n){var r={},o=[];return n&&!Array.isArray(n)?(n.values.forEach((function(e){o.push(e)})),o.push({name:t,value:a}),r.name=n.name,r.values=o,r):(r.name=t,e?r.values=[]:r.value=a,r)},buildEditedFactData:function(e,t,a,n,r,o){var i={},c=[],l=t,u=n;if(e)i.name=a,o.values.forEach((function(e){c.push(e)})),i.values=c;else if(o.values&&""!==r){i.name=o.name;var s={name:a,value:r};o.values.forEach((function(e){e.name===l&&e.value===u||c.push(e)})),c.push(s),i.values=c}else i={name:a,value:r};return i},buildDeletedSubFact:function(e,t){var a=[];return t.values.forEach((function(t){t.name===e.name&&t.value===e.value||a.push(t)})),{name:t.name,values:a}},makeAddFactPatch:function(e,t,a){if(void 0===e||void 0===t)return{};var n=Z(e,t,a);n.push(e);var r=ee(n,t.baseline_facts);return{display_name:t.display_name,facts_patch:r}},makeDeleteFactPatch:function(e,t,a){if(void 0===e||void 0===t)return{};var n=Z(e,t,a);e.values&&n.push(e);var r=ee(n,t.baseline_facts);return{display_name:t.display_name,facts_patch:r}}},ae=function(e){function t(e){var a;return i()(this,t),(a=s()(this,p()(t).call(this,e))).cancelFact=a.cancelFact.bind(h()(a)),a.confirmModal=a.confirmModal.bind(h()(a)),a.renderCategoryCheckbox=a.renderCategoryCheckbox.bind(h()(a)),a.renderFactInput=a.renderFactInput.bind(h()(a)),a.renderValueInput=a.renderValueInput.bind(h()(a)),a.renderModalBody=a.renderModalBody.bind(h()(a)),a.patchFact=a.patchFact.bind(h()(a)),a.state={factName:a.props.factName,factValue:a.props.factValue,factData:a.props.factData,isCategory:a.props.isCategory},a.state.isAddFact=""===a.props.factName&&""===a.props.factValue,a.state.isEditFact=""!==a.props.factName&&""!==a.props.factValue,a.handleChange=function(e){a.setState({isCategory:e})},a.handleNewName=function(e){a.setState({factName:e})},a.handleNewValue=function(e){a.setState({factValue:e})},a}return v()(t,e),l()(t,[{key:"cancelFact",value:function(){(0,this.props.toggleFactModal)()}},{key:"confirmModal",value:function(){var e=this.props.toggleFactModal;this.state.isAddFact?this.addFact():this.editFact(),e()}},{key:"addFact",value:function(){var e=this.state,t=e.isCategory,a=e.factName,n=e.factValue,r=e.factData,o=te.buildNewFactData(t,a,n,r);this.patchFact(o,r)}},{key:"editFact",value:function(){var e=this.state,t=e.isCategory,a=e.factName,n=e.factValue,r=e.factData,o=te.buildEditedFactData(t,this.props.factName,a,this.props.factValue,n,r);this.patchFact(o,r)}},{key:"patchFact",value:function(e,t){var a=this.props,n=a.baselineData,r=a.patchBaseline,o=te.makeAddFactPatch(e,n,t);r(n.id,o)}},{key:"renderCategoryCheckbox",value:function(){var e=this.state,t=e.isCategory,a=e.isEditFact;return b.a.createElement(L.a,{"aria-label":"controlled checkbox example",label:"This is a category",id:"isCategory",name:"isCategory",onChange:this.handleChange,isChecked:t,isDisabled:t&&a})}},{key:"renderFactInput",value:function(){var e=this.state,t=e.factName,a=e.isCategory;return b.a.createElement("div",{className:"fact-value"},b.a.createElement(P.a,null,b.a.createElement(H.a,{label:a?"Category name":"Fact name",isRequired:!0,fieldId:"fact name"},b.a.createElement(K.a,{value:t,type:"text",placeholder:"Name",onChange:this.handleNewName,isValid:""!==t&&void 0!==t,"aria-label":"fact name"}))))}},{key:"renderValueInput",value:function(){var e=this.state.factValue;return b.a.createElement("div",{className:"fact-value"},b.a.createElement(P.a,null,b.a.createElement(H.a,{label:"Value",isRequired:!0,fieldId:"fact value"},b.a.createElement(K.a,{value:e,type:"text",placeholder:"Value",onChange:this.handleNewValue,isValid:""!==e&&void 0!==e,"aria-label":"value"}))))}},{key:"renderModalBody",value:function(){var e=this.props.isSubFact,t=this.state,a=t.isAddFact,n=t.isCategory;return b.a.createElement(b.a.Fragment,null,a&&!e||n?this.renderCategoryCheckbox():null,this.renderFactInput(),b.a.createElement("br",null),n?null:this.renderValueInput())}},{key:"title",value:function(){var e=this.props.isSubFact,t=this.state,a=t.isAddFact,n=t.isEditFact,r=t.isCategory,o="Add fact";return!0!==n||r||e?!0===a&&!0===r?o="Add category":!0===a&&!0===e?o="Add sub fact":!0===n&&!0===e?o="Edit sub fact":!0===r&&(o="Edit category"):o="Edit fact",o}},{key:"render",value:function(){var e=this.props.factModalOpened;return b.a.createElement(J.a,{className:"small-modal-body",title:this.title(),isOpen:e,onClose:this.cancelFact,width:"auto",isFooterLeftAligned:!0,actions:[b.a.createElement(j.a,{key:"confirm",variant:"primary",onClick:this.confirmModal},"Save"),b.a.createElement(j.a,{key:"cancel",variant:"secondary",onClick:this.cancelFact},"Cancel")]},this.renderModalBody())}}]),t}(y.Component);ae.propTypes={toggleFactModal:E.a.func,factModalOpened:E.a.bool,factName:E.a.string,factValue:E.a.string,factData:E.a.obj,isCategory:E.a.bool,isSubFact:E.a.bool,baselineData:E.a.obj,patchBaseline:E.a.func};var ne=Object(F.connect)((function(e){return{factModalOpened:e.factModalState.factModalOpened,factName:e.factModalState.factName,factValue:e.factModalState.factValue,factData:e.factModalState.factData,isCategory:e.factModalState.isCategory,isSubFact:e.factModalState.isSubFact,baselineData:e.baselinesTableState.baselineData}}),(function(e){return{toggleFactModal:function(){return e(I.toggleFactModal())},patchBaseline:function(t,a){return e(q.a.patchBaseline(t,a))}}}))(ae),re=a(171);var oe={toggleEditNameModal:function(){return{type:re.a.TOGGLE_EDIT_NAME_MODAL}}},ie=function(e){function t(e){var a;return i()(this,t),(a=s()(this,p()(t).call(this,e))).confirmModal=function(){var e=a.state.baselineName,t=a.props,n=t.baselineData,r=t.patchBaseline,o=t.toggleEditNameModal;r(n.id,{display_name:e,facts_patch:[]}),o()},a.cancelModal=function(){var e=a.props,t=e.toggleEditNameModal,n=e.baselineData;a.updateBaselineName(n.display_name),t()},a.state={baselineName:a.props.baselineData.display_name},a.updateBaselineName=function(e){a.setState({baselineName:e})},a}return v()(t,e),l()(t,[{key:"renderModalBody",value:function(){var e=this.state.baselineName;return b.a.createElement("div",{className:"fact-value"},b.a.createElement(P.a,null,b.a.createElement(H.a,{label:"Baseline title",isRequired:!0,fieldId:"baseline name"},b.a.createElement(K.a,{value:e,type:"text",onChange:this.updateBaselineName,isValid:""!==e,"aria-label":"baseline name"}))))}},{key:"render",value:function(){var e=this.props.editNameModalOpened;return b.a.createElement(J.a,{className:"pf-c-modal-box",title:"Edit title",isOpen:e,onClose:this.cancelModal,width:"auto",isFooterLeftAligned:!0,actions:[b.a.createElement(j.a,{key:"confirm",variant:"primary",onClick:this.confirmModal},"Save"),b.a.createElement(j.a,{key:"cancel",variant:"secondary",onClick:this.cancelModal},"Cancel")]},this.renderModalBody())}}]),t}(y.Component);ie.propTypes={baselineId:E.a.string,baselineName:E.a.string,baselineData:E.a.object,editNameModalOpened:E.a.bool,toggleEditNameModal:E.a.func,patchBaseline:E.a.func};var ce=Object(F.connect)((function(e){return{baselineData:e.baselinesTableState.baselineData,editNameModalOpened:e.editNameModalState.editNameModalOpened}}),(function(e){return{toggleEditNameModal:function(){return e(oe.toggleEditNameModal())},patchBaseline:function(t,a){return e(q.a.patchBaseline(t,a))}}}))(ie),le=function(e){function t(e){var a;return i()(this,t),(a=s()(this,p()(t).call(this,e))).fetchBaselineId(),a.renderBreadcrumb=a.renderBreadcrumb.bind(h()(a)),a.goToBaselinesList=a.goToBaselinesList.bind(h()(a)),a}return v()(t,e),l()(t,[{key:"componentDidMount",value:function(){return r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.a.awrap(window.insights.chrome.auth.getUser());case 2:case"end":return e.stop()}}))}},{key:"fetchBaselineId",value:function(){var e=this.props,t=e.match.params;(0,e.fetchBaselineData)(t.id)}},{key:"goToBaselinesList",value:function(){var e=this.props,t=e.history;(0,e.clearBaselineData)(),t.push("/baselines")}},{key:"renderBreadcrumb",value:function(){var e=this,t=this.props.baselineData;return b.a.createElement(w.a,null,b.a.createElement(C.a,null,b.a.createElement("a",{onClick:function(){return e.goToBaselinesList()}},"Baselines")),b.a.createElement(C.a,{isActive:!0},t.display_name))}},{key:"renderHeaderRow",value:function(){return b.a.createElement("tr",null,b.a.createElement("th",{className:"edit-baseline-header"},b.a.createElement("div",null,"Fact")),b.a.createElement("th",{className:"edit-baseline-header"},b.a.createElement("div",null,"Value")),b.a.createElement("th",null))}},{key:"renderLoadingRows",value:function(){for(var e=[],t=[],a=0;a<3;a+=1)t.push(b.a.createElement("td",null,b.a.createElement(x.Skeleton,{size:x.SkeletonSize.md})));for(var n=0;n<10;n+=1)e.push(b.a.createElement("tr",null,t));return e}},{key:"renderExpandableRowButton",value:function(e){var t=this;return this.props.expandedRows.includes(e)?b.a.createElement(M.b,{className:"pointer active-blue",onClick:function(){return t.props.expandRow(e)}}):b.a.createElement(A.b,{className:"pointer",onClick:function(){return t.props.expandRow(e)}})}},{key:"renderRowData",value:function(e){var t=this.props.expandedRows,a=[],n=[];return e.values?(a.push(b.a.createElement("td",{className:t.includes(e.name)?"nested-fact":""},this.renderExpandableRowButton(e.name)," ",e.name)),a.push(b.a.createElement("td",null)),a.push(te.renderKebab({factName:e.name,fact:e,isCategory:!0})),n.push(b.a.createElement("tr",null,a)),t.includes(e.name)&&e.values.forEach((function(t){(a=[]).push(b.a.createElement("td",{className:"nested-fact"},b.a.createElement("p",{className:"child-row"},t.name))),a.push(b.a.createElement("td",null,t.value)),a.push(te.renderKebab({factName:t.name,factValue:t.value,fact:e,isSubFact:!0})),n.push(b.a.createElement("tr",null,a))}))):(a.push(b.a.createElement("td",null,e.name)),a.push(b.a.createElement("td",null,e.value)),a.push(te.renderKebab({factName:e.name,factValue:e.value,fact:e})),n.push(b.a.createElement("tr",null,a))),n}},{key:"renderRows",value:function(){var e=this.props.baselineData.baseline_facts,t=[],a=[];if(void 0!==e)for(var n=0;n<e.length;n+=1)a=this.renderRowData(e[n]),t.push(a);return t}},{key:"renderTable",value:function(){var e=this.props.baselineData;return b.a.createElement("table",{className:"pf-c-table ins-c-table pf-m-compact ins-entity-table drift-table"},b.a.createElement("thead",null,this.renderHeaderRow()),b.a.createElement("tbody",null,void 0!==e?this.renderRows():this.renderLoadingRows()))}},{key:"render",value:function(){var e=this.props,t=e.baselineData,a=e.factModalOpened,n=e.toggleEditNameModal;return b.a.createElement(b.a.Fragment,null,void 0!==t?b.a.createElement(b.a.Fragment,null,b.a.createElement(ce,null),b.a.createElement(x.PageHeader,null,this.renderBreadcrumb(),b.a.createElement(x.PageHeaderTitle,{title:t.display_name}),b.a.createElement(S.b,{className:"pointer not-active edit-icon-margin",onClick:function(){return n()}}))):b.a.createElement(x.PageHeader,null,b.a.createElement("div",null,b.a.createElement(x.Skeleton,{size:x.SkeletonSize.lg}))),b.a.createElement(x.Main,null,b.a.createElement(N.a,{className:"pf-t-light pf-m-opaque-100"},b.a.createElement(D.a,null,a?b.a.createElement(ne,null):null,b.a.createElement(_,null),this.renderTable()))))}}]),t}(y.Component);le.propTypes={history:E.a.object,match:E.a.any,clearBaselineData:E.a.func,baselineData:E.a.object,baselineDataLoading:E.a.bool,patchBaseline:E.a.func,fetchBaselineData:E.a.func,factModalOpened:E.a.bool,editBaselineTableData:E.a.array,expandRow:E.a.func,expandedRows:E.a.array,toggleEditNameModal:E.a.func};t.default=Object(k.o)(Object(F.connect)((function(e){return{baselineData:e.baselinesTableState.baselineData,baselineDataLoading:e.baselinesTableState.baselineDataLoading,factModalOpened:e.factModalState.factModalOpened,editBaselineTableData:e.baselinesTableState.editBaselineTableData,expandedRows:e.baselinesTableState.expandedRows}}),(function(e){return{clearBaselineData:function(){return e(q.a.clearBaselineData())},patchBaseline:function(t,a){return e(q.a.patchBaseline(t,a))},expandRow:function(t){return e(q.a.expandRow(t))},fetchBaselineData:function(t){return e(q.a.fetchBaselineData(t))},toggleEditNameModal:function(){return e(oe.toggleEditNameModal())}}}))(le))}}]);
//# sourceMappingURL=../sourcemaps/4.js.map