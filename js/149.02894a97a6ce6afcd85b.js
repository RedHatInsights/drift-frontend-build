"use strict";(self.webpackChunkdrift=self.webpackChunkdrift||[]).push([[149],{51149:(e,t,n)=>{n.r(t),n.d(t,{DriftPage:()=>Ae,default:()=>Me});var r=n(87462),a=n(70885),s=n(15671),o=n(43144),i=n(79340),l=n(82963),c=n(61120),u=n(92950),d=n.n(u),p=n(45697),f=n.n(p),m=n(90958),h=n(92649),y=n(14938),S=n(52017),v=n(48270),g=n(56077),b=n(59386),F=n(83068),E=n(42982),I=n(17563),C=n(72971);function T(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4?arguments[4]:void 0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],l=arguments.length>6?arguments[6]:void 0,c=arguments.length>7?arguments[7]:void 0,u=arguments.length>8?arguments[8]:void 0,d=arguments.length>9?arguments[9]:void 0,p=arguments.length>10?arguments[10]:void 0,f=[].concat((0,E.Z)(i),(0,E.Z)(l&&!i.includes(l)?[l]:[])),m=(null==u||null===(t=u.filter((function(e){return e.selected})))||void 0===t?void 0:t.map((function(e){var t=e.filter;return null==t?void 0:t.toLowerCase()})))||[],h=(null==c||null===(n=c.filter((function(e){return e.selected})))||void 0===n?void 0:n.map((function(e){var t=e.filter;return null==t?void 0:t.toLowerCase()})))||[],y=[].concat((0,E.Z)([C.aW,C.jo].includes(p)?["".concat(p===C.jo?"-":"","state")]:[]),(0,E.Z)([C.aW,C.jo].includes(d)?["".concat(d===C.jo?"-":"","fact")]:[])),S="?",v=S+I.stringify({system_ids:r,baseline_ids:a,hsp_ids:s,reference_id:o});S="&",r.length||a.length||s.length||o||(S=""),e({search:v+S+I.stringify({"filter[name]":f,"filter[state]":m,"filter[show]":h,sort:y},{arrayFormat:"comma",encode:!1})})}var P=n(4942),k=n(15861),x=n(97326),R=n(64687),w=n.n(R),B=n(17855),Z=n(99655),H=n(34869),D=n(67412),O=n(86047),N=n(30381),A=n.n(N);var M=function(e){(0,i.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,c.Z)(t);if(n){var a=(0,c.Z)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,l.Z)(this,e)});function a(e){var t;return(0,s.Z)(this,a),(t=r.call(this,e)).handleChange=function(){var e=t.props,n=e.findType,r=e.id,a=e.type,s=t.state.isChecked;n(a,r),t.setState({isChecked:!s})},t.state={isChecked:!0},t}return(0,o.Z)(a,[{key:"render",value:function(){var e=this.state.isChecked;return d().createElement(d().Fragment,null,d().createElement(y.Checkbox,{isChecked:e,onChange:this.handleChange,"aria-label":"controlled checkbox example",id:"check-1",name:"check1"}))}}]),a}(u.Component);M.propTypes={type:f().string,findType:f().func,id:f().string};const L=M;var j=function(e){(0,i.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,c.Z)(t);if(n){var a=(0,c.Z)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,l.Z)(this,e)});function a(e){var t;return(0,s.Z)(this,a),(t=r.call(this,e)).buildRows=function(){var e=t.props,n=e.entities,r=e.findType,a=e.selectedBaselineContent,s=e.selectedHSPContent,o=e.selectedSystemContent,i=e.handleDeselect,l=[];return a.forEach((function(e){l.push(d().createElement("tr",null,d().createElement("td",null,d().createElement(L,{type:"baseline",findType:r,id:e.id,handleDeselect:i})),d().createElement("td",null,e.icon),d().createElement("td",{style:{"align-content":"left"}},e.name)))})),o.forEach((function(e){l.push(d().createElement("tr",null,d().createElement("td",null,d().createElement(L,{type:"system",findType:r,id:e.id,handleDeselect:i})),d().createElement("td",null,e.icon),d().createElement("td",{style:{"align-content":"left"}},e.name))),null==s||s.forEach((function(t){t.system_id===e.id&&l.push(d().createElement("tr",null,d().createElement("td",null,d().createElement(L,{type:"hsp",findType:r,id:t.id,handleDeselect:i})),d().createElement("td",null,t.icon),d().createElement("td",{style:{"align-content":"left"}},d().createElement("div",null,e.name),d().createElement("div",null,A().utc(t.captured_date).format("DD MMM YYYY, HH:mm UTC")))))}))})),null==s||s.forEach((function(e){var t;null!=n&&null!==(t=n.selectedSystemIds)&&void 0!==t&&t.includes(e.system_id)||l.push(d().createElement("tr",null,d().createElement("td",null,d().createElement(L,{type:"hsp",findType:r,id:e.id,handleDeselect:i})),d().createElement("td",null,e.icon),d().createElement("td",{style:{"align-content":"left"}},d().createElement("div",null,e.system_name),d().createElement("div",null,A().utc(e.captured_date).format("DD MMM YYYY, HH:mm UTC")))))})),l},t}return(0,o.Z)(a,[{key:"render",value:function(){return d().createElement(d().Fragment,null,d().createElement("table",{className:"pf-c-table"},d().createElement("tbody",null,this.buildRows())))}}]),a}(u.Component);j.propTypes={selectedBaselineContent:f().array,entities:f().object,selectedHSPContent:f().array,selectedSystemContent:f().array,findType:f().func,handleDeselect:f().func};const W=j;var _=n(42325),V=n(28889);var Y=function(e){(0,i.Z)(u,e);var t,n,r,a=(n=u,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(n);if(r){var a=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return(0,l.Z)(this,e)});function u(e){var t;return(0,s.Z)(this,u),(t=a.call(this,e)).toggleBasket=function(){var e=t.props.toggleBasketVisible;t.clearDeselected(),e()},t.applyChanges=(0,k.Z)(w().mark((function e(){var n,r,a,s,o,i,l,c,u,d,p,f;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.state,r=n.baselinesToDeselect,a=n.hspsToDeselect,s=n.systemsToDeselect,o=t.props,i=o.handleBaselineSelection,l=o.handleHSPSelection,c=o.selectBaseline,u=o.selectEntity,d=o.selectHistoricProfiles,p=o.selectedBaselineContent,f=o.selectedHSPContent,(0,o.toggleBasketVisible)(),!r.length){e.next=7;break}return e.next=6,c(r,!1,"COMPARISON");case 6:i(p.filter((function(e){return r.includes(e.id)})),!1);case 7:if(!a.length){e.next=11;break}return a.forEach(function(){var e=(0,k.Z)(w().mark((function e(t){return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(f.find((function(e){return e.id===t})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=11,d(f.filter((function(e){return!a.includes(e.id)})).map((function(e){return e.id})));case 11:s.forEach(function(){var e=(0,k.Z)(w().mark((function e(t){return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(t,!1);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.clearDeselected();case 13:case"end":return e.stop()}}),e)}))),t.findType=function(e,n){var r,a=t.state,s=a.systemsToDeselect,o=a.baselinesToDeselect,i=a.hspsToDeselect;"system"===e?(r=t.toggleSelected(s,n),t.setState({systemsToDeselect:r})):"baseline"===e?(r=t.toggleSelected(o,n),t.setState({baselinesToDeselect:r})):(r=t.toggleSelected(i,n),t.setState({hspsToDeselect:r}))},t.toggleSelected=function(e,n){var r=[];return e.includes(n)?r=t.removeId(n,e):(r=(0,E.Z)(e)).push(n),r},t.displayBodyContent=function(e){var n=t.props,r=n.entities,a=n.selectedSystemContent,s=n.selectedBaselineContent,o=n.selectedHSPContent;return e?d().createElement(_.Z,{title:"Nothing selected",text:["Select systems and baselines to compare."]}):d().createElement(W,{selectedBaselineContent:s,entities:r,selectedHSPContent:o,findType:t.findType,handleDeselect:t.handleDeselect,selectedSystemContent:a})},t.state={systemsToDeselect:[],baselinesToDeselect:[],hspsToDeselect:[]},t.clearDeselected=function(){t.setState({systemsToDeselect:[]}),t.setState({baselinesToDeselect:[]}),t.setState({hspsToDeselect:[]})},t}return(0,o.Z)(u,[{key:"componentDidMount",value:(t=(0,k.Z)(w().mark((function e(){return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:V.Z.setContent({systems:this.props.systems,baselines:this.props.baselines,historicalProfiles:this.props.historicalProfiles},this.props.handleSystemSelection,this.props.handleBaselineSelection,this.props.handleHSPSelection,this.props.selectedHSPContent);case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"removeId",value:function(e,t){var n=[];return t.forEach((function(t){e!==t&&n.push(t)})),n}},{key:"findSelected",value:function(){var e=this.props,t=e.selectedBaselineContent,n=e.selectedHSPContent,r=e.selectedSystemContent,a=0;return r.length?a+=r.length+t.length+n.length:a+=t.length+n.length,a}},{key:"render",value:function(){var e=this,t=this.props.isVisible,n=this.state,r=n.systemsToDeselect,a=n.baselinesToDeselect,s=n.hspsToDeselect;return d().createElement(d().Fragment,null,d().createElement("span",null,d().createElement(y.Popover,{id:"selected-basket",style:{minWidth:"500px"},isVisible:t,shouldClose:function(){return e.toggleBasket()},headerContent:d().createElement("div",null,"Selected items (",this.findSelected(),")"),footerContent:d().createElement(y.Button,{key:"confirm",variant:"primary",onClick:function(){return e.applyChanges()},ouiaId:"confirm-selected-basket-button",isDisabled:!r.length&&!a.length&&!s.length},"Apply changes"),position:y.PopoverPosition.bottom,bodyContent:d().createElement("div",{style:{maxHeight:"500px",overflowY:"auto"}},this.displayBodyContent(0===this.findSelected()))},d().createElement("a",{onClick:function(){return e.toggleBasket()}},"Selected (",this.findSelected(),")"))))}}]),u}(u.Component);Y.propTypes={baselines:f().array,entities:f().object,handleBaselineSelection:f().func,handleHSPSelection:f().func,handleSystemSelection:f().func,historicalProfiles:f().array,isVisible:f().bool,selectBaseline:f().func,selectedBaselineContent:f().array,selectedHSPContent:f().array,selectedSystemContent:f().array,selectEntity:f().func,selectHistoricProfiles:f().func,systems:f().array,toggleBasketVisible:f().func};const U=Y;var z=n(49198),G=n(69078),J=n(21205);var K=function(e){(0,i.Z)(u,e);var t,n,r,a=(n=u,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(n);if(r){var a=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return(0,l.Z)(this,e)});function u(e){var t;return(0,s.Z)(this,u),(t=a.call(this,e)).closePopover=function(){(0,t.props.disableSystemTable)(!1),t.setState({basketIsVisible:!1})},t.createContent=function(e,t,n,r){return{id:e,icon:d().createElement(z.Z,{content:t,body:n}),name:r}},t.toggleBasketVisible=function(){var e=t.state.basketIsVisible;(0,t.props.disableSystemTable)(!e),t.setState({basketIsVisible:!e})},t.onSelect=function(e,n,r){var a,s=t.props,o=s.baselineTableData,i=s.handleBaselineSelection,l=s.selectBaseline,c=[];-1===r?(a=o.map((function(e){return e[0]})),c=o.map(function(e){return this.createContent(e[0],"Baseline",d().createElement(S.BlueprintIcon,null),e[1])}.bind((0,x.Z)(t)))):(a=[o[r][0]],c.push(t.createContent(o[r][0],"Baseline",d().createElement(S.BlueprintIcon,null),o[r][1]))),l(a,n,"COMPARISON"),i(c,n)},t.bulkSelectBasket=function(e,n){(0,t.props.handleBaselineSelection)(e.map(function(e){return this.createContent(e[0],"Baseline",d().createElement(S.BlueprintIcon,null),e[1])}.bind((0,x.Z)(t))),n)},t.systemContentSelect=function(e){var n=t.props,r=n.entities,a=n.handleSystemSelection,s=n.selectedSystemContent,o=[];0===e.id?o=e.bulk?s:r.rows.map(function(e){return this.createContent(e.id,"System",d().createElement(S.ServerIcon,null),e.display_name)}.bind((0,x.Z)(t))):e.selected?r.rows.forEach((function(t){t.id===e.id&&o.push({id:t.id,name:t.display_name,icon:d().createElement(z.Z,{content:"System",body:d().createElement(S.ServerIcon,null)})})})):o=s.filter((function(t){return t.id===e.id})),a(o,e.selected)},t.confirmModal=t.confirmModal.bind((0,x.Z)(t)),t.cancelSelection=t.cancelSelection.bind((0,x.Z)(t)),t.changeActiveTab=t.changeActiveTab.bind((0,x.Z)(t)),t.state={systemColumns:t.buildSystemColumns(t.props.permissions),columns:[{title:"Name",transforms:[B.sortable]},{title:"Last updated",transforms:[B.sortable,(0,B.cellWidth)(20)]},{title:"Associated systems",transforms:[(0,B.cellWidth)(20)]}],basketIsVisible:!1,previousSelectedBaselineIds:[]},t.addSystemModal=d().createRef(),t}return(0,o.Z)(u,[{key:"componentDidMount",value:(t=(0,k.Z)(w().mark((function e(){var t=this;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.middlewareListener&&(window.entityListener=(0,Z.pD)(this.props.middlewareListener,{actionType:"SELECT_ENTITY",callback:function(e){var n=e.data;t.props.addSystemModalOpened&&t.systemContentSelect(n)}}));case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"buildSystemColumns",value:function(e){return[{key:"display_name",props:{width:20},title:"Name"},{key:"tags",props:{width:10,isStatic:!0},title:"Tags"},{key:"updated",props:{width:10},title:"Last seen"}].concat((0,E.Z)(e.hspRead?[{key:"historical_profiles",props:{width:10,isStatic:!0},title:"Historical profiles"}]:[]))}},{key:"componentDidUpdate",value:function(e){!e.addSystemModalOpened&&this.props.addSystemModalOpened&&this.setState({previousSelectedBaselineIds:this.props.selectedBaselineIds})}},{key:"confirmModal",value:function(){var e=this.props,t=e.confirmModal,n=e.entities,r=e.selectedBaselineIds,a=e.toggleAddSystemModal,s=e.selectedHSPIds,o=e.referenceId;t(n.selectedSystemIds,r,s,o),a()}},{key:"findNotInComparison",value:function(e,t){return 0===t.length?e:e.filter((function(e){return-1===t.findIndex((function(t){return e.id===t.id}))}))}},{key:"setSelectedContent",value:function(){var e=this.props,t=e.baselines,n=e.handleBaselineSelection,r=e.handleHSPSelection,a=e.handleSystemSelection,s=e.historicalProfiles,o=e.selectBaseline,i=e.selectedBaselineContent,l=e.selectedHSPContent,c=e.selectedSystemContent,u=e.selectHistoricProfiles,d=e.systems;a(this.findNotInComparison(c,d),!1);var p=this.findNotInComparison(i,t);n(p,!1),p.forEach((function(e){return o(e.id,!1,"COMPARISON")})),this.findNotInComparison(l,s).forEach((function(e){return r(e)})),u(s.map((function(e){return e.id})))}},{key:"cancelSelection",value:function(){var e=this.props,t=e.toggleAddSystemModal;(0,e.setSelectedBaselines)(this.state.previousSelectedBaselineIds,"COMPARISON"),this.setSelectedContent(),t()}},{key:"changeActiveTab",value:function(e,t){(0,this.props.selectActiveTab)(t)}},{key:"render",value:function(){var e,t=this.props,n=t.activeTab,r=t.addSystemModalOpened,a=t.baselines,s=t.baselineTableData,o=t.emptyState,i=t.globalFilterState,l=t.handleBaselineSelection,c=t.handleHSPSelection,u=t.handleSystemSelection,p=t.historicalProfiles,f=t.loading,m=t.entities,h=t.permissions,S=t.selectEntity,v=t.selectHistoricProfiles,g=t.selectedBaselineIds,b=t.selectedBaselineContent,F=t.selectedHSPContent,E=t.selectedHSPIds,I=t.selectBaseline,C=t.selectedSystemContent,T=t.selectedSystemIds,P=t.setSelectedSystemIds,k=t.systems,x=t.totalBaselines,R=t.baselineError,w=t.revertBaselineFetch,B=this.state,Z=B.columns,N=B.basketIsVisible,A=B.systemColumns;return d().createElement(d().Fragment,null,d().createElement(y.Modal,{className:"drift",ref:this.addSystemModal,onScroll:N?this.closePopover:null,style:{maxHeight:"600px"},width:"1200px",title:"Add to comparison",ouiaId:"add-to-comparison-modal",isOpen:r,onClose:this.cancelSelection,actions:[d().createElement(y.Button,{key:"confirm",variant:"primary",onClick:this.confirmModal,isDisabled:0===(null==m||null===(e=m.selectedSystemIds)||void 0===e?void 0:e.length)&&0===g.length&&0===E.length||N,ouiaId:"add-to-comparison-submit-button"},"Submit"),d().createElement(y.Button,{key:"cancel",variant:"link",onClick:this.cancelSelection,isDisabled:N,ouiaId:"add-to-comparison-cancel-button"},"Cancel")]},d().createElement(O.Z,{globalFilterState:i}),d().createElement(y.Toolbar,{style:{padding:"0px"}},d().createElement(y.ToolbarContent,null,d().createElement(y.ToolbarItem,{variant:"pagination"},d().createElement(U,{entities:m,handleSystemSelection:u,handleBaselineSelection:l,handleHSPSelection:c,isVisible:N,selectBaseline:I,selectedBaselineContent:b,selectedHSPContent:F,selectedSystemContent:C,selectEntity:S,selectHistoricProfiles:v,toggleBasketVisible:this.toggleBasketVisible,systems:k,baselines:a,historicalProfiles:p})))),d().createElement(y.Tabs,{activeKey:n,onSelect:this.changeActiveTab},d().createElement(y.Tab,{eventKey:0,title:"Systems",id:"systems-tab","data-ouia-component-id":"systems-tab-button"},d().createElement(H.Z,{selectedSystemIds:T,historicalProfiles:p,hasMultiSelect:!0,permissions:h,entities:m,selectVariant:"checkbox",onSystemSelect:P,systemColumns:A})),d().createElement(y.Tab,{eventKey:1,title:"Baselines",id:"baselines-tab","data-ouia-component-id":"baselines-tab-button"},d().createElement(D.Z,{tableId:"COMPARISON",hasMultiSelect:!0,onSelect:this.onSelect,tableData:s,loading:f,columns:Z,bulkSelectBasket:this.bulkSelectBasket,selectedBaselineIds:g,totalBaselines:x,permissions:h,kebab:!1,basketIsVisible:N,leftAlignToolbar:!0,hasSwitch:!1,emptyState:o,baselineError:R,revertBaselineFetch:w,selectBaseline:I})))))}}]),u}(u.Component);K.propTypes={showModal:f().bool,addSystemModalOpened:f().bool,activeTab:f().number,confirmModal:f().func,cancelSelection:f().func,toggleAddSystemModal:f().func,selectActiveTab:f().func,entities:f().object,systems:f().array,selectedBaselineIds:f().array,baselines:f().array,selectedHSPIds:f().array,loading:f().bool,baselineTableData:f().array,selectBaseline:f().func,historicalProfiles:f().array,referenceId:f().string,totalBaselines:f().number,permissions:f().object,globalFilterState:f().object,selectedSystemIds:f().array,setSelectedSystemIds:f().func,selectHistoricProfiles:f().func,selectedSystemContent:f().array,selectedBaselineContent:f().array,selectedHSPContent:f().array,handleSystemSelection:f().func,handleBaselineSelection:f().func,handleHSPSelection:f().func,selectEntity:f().func,disableSystemTable:f().func,setSelectedBaselines:f().func,updateReferenceId:f().func,emptyState:f().bool,baselineError:f().object,revertBaselineFetch:f().func,middlewareListener:f().object};const q=(0,m.connect)((function(e){return{addSystemModalOpened:e.addSystemModalState.addSystemModalOpened,systems:e.compareState.systems,activeTab:e.addSystemModalState.activeTab,entities:e.entities,selectedBaselineIds:e.baselinesTableState.comparisonTable.selectedBaselineIds,baselines:e.compareState.baselines,selectedHSPIds:e.historicProfilesState.selectedHSPIds,loading:e.baselinesTableState.comparisonTable.loading,baselineTableData:e.baselinesTableState.comparisonTable.baselineTableData,historicalProfiles:e.compareState.historicalProfiles,totalBaselines:e.baselinesTableState.comparisonTable.totalBaselines,globalFilterState:e.globalFilterState,selectedHSPContent:e.addSystemModalState.selectedHSPContent,selectedBaselineContent:e.addSystemModalState.selectedBaselineContent,selectedSystemContent:e.addSystemModalState.selectedSystemContent,emptyState:e.baselinesTableState.comparisonTable.emptyState,baselineError:e.baselinesTableState.comparisonTable.baselineError}}),(function(e){return{toggleAddSystemModal:function(){return e(g.x.toggleAddSystemModal())},selectActiveTab:function(t){return e(g.x.selectActiveTab(t))},handleSystemSelection:function(t,n){return e(g.x.handleSystemSelection(t,n))},handleBaselineSelection:function(t,n){return e(g.x.handleBaselineSelection(t,n))},handleHSPSelection:function(t){return e(g.x.handleHSPSelection(t))},selectBaseline:function(t,n,r){return e(v.w.selectBaseline(t,n,r))},selectHistoricProfiles:function(t){return e(F.h.selectHistoricProfiles(t))},selectEntity:function(t,n){return e({type:"SELECT_ENTITY",payload:{id:t,isSelected:n}})},setSelectedSystemIds:function(t){return e(g.x.setSelectedSystemIds(t))},disableSystemTable:function(t){return e(G.Z.disableSystemTable(t))},setSelectedBaselines:function(t,n){return e(v.w.setSelectedBaselines(t,n))},revertBaselineFetch:function(){return e(v.w.revertBaselineFetch("COMPARISON"))}}}))((function(e){return d().createElement(J.g.Consumer,null,(function(t){return d().createElement(K,(0,r.Z)({},e,{middlewareListener:null==t?void 0:t.middlewareListener}))}))}));var Q=n(23279),X=n.n(Q),$=n(61119);var ee=function(e){(0,i.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,c.Z)(t);if(n){var a=(0,c.Z)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,l.Z)(this,e)});function a(e){var t;return(0,s.Z)(this,a),(t=r.call(this,e)).state={isReference:t.props.isReference},t}return(0,o.Z)(a,[{key:"renderIcon",value:function(){var e=this.props,t=e.updateReferenceId,n=e.item;return this.state.isReference?d().createElement(S.StarIcon,{className:"reference-selector pointer","data-ouia-component-type":"PF4/Button","data-ouia-component-id":"reference-selector-"+n.id,onClick:function(){return t()}}):d().createElement(S.OutlinedStarIcon,{className:"reference-selector pointer","data-ouia-component-type":"PF4/Button","data-ouia-component-id":"reference-selector-"+n.id,onClick:function(){return t(n.id)}})}},{key:"renderMessage",value:function(){var e=this.state.isReference,t=this.props.item,n=t.type;return"historical-system-profile"===t.type&&(n="historical system"),e?d().createElement("div",null,"This is the reference the other items are being compared against."):d().createElement("div",null,"Use this ",n," as a reference to compare.")}},{key:"render",value:function(){return d().createElement(y.Tooltip,{position:"top",content:this.renderMessage()},this.renderIcon())}}]),a}(u.Component);ee.propTypes={isReference:f().bool,updateReferenceId:f().func,item:f().object};const te=ee;var ne=function(e){(0,i.Z)(u,e);var t,n,r,a=(n=u,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(n);if(r){var a=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return(0,l.Z)(this,e)});function u(e){var t;return(0,s.Z)(this,u),(t=a.call(this,e)).setColumnWidth=function(){var e;null!==(e=t.columnWidth)&&void 0!==e&&e.current&&(t.props.setColumnHeaderWidth(t.columnWidth.current.offsetWidth),t.setState({refState:t.columnWidth}))},t.formatDate=function(e){return A().utc(e).format("DD MMM YYYY, HH:mm UTC")},t.columnWidth=d().createRef(),t.state={refState:null},t}return(0,o.Z)(u,[{key:"componentDidMount",value:function(){this.setColumnWidth(),window.addEventListener("resize",X()(this.setColumnWidth,250))}},{key:"renderSortButton",value:function(e){return e===C.aW?d().createElement(S.LongArrowAltUpIcon,{className:"active-blue"}):e===C.jo?d().createElement(S.LongArrowAltDownIcon,{className:"active-blue"}):d().createElement(S.ArrowsAltVIcon,{className:"not-active"})}},{key:"toggleSort",value:(t=(0,k.Z)(w().mark((function e(t,n){var r,a,s,o;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.props,a=r.setHistory,s=r.toggleFactSort,o=r.toggleStateSort,"fact"!==t){e.next=6;break}return e.next=4,s(n);case 4:e.next=8;break;case 6:return e.next=8,o(n);case 8:a();case 9:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"renderLoadingSystems",value:function(){return[d().createElement("td",{key:"loading-systems-header"},d().createElement(h.Skeleton,{size:h.SkeletonSize.md}))]}},{key:"renderSystemHeaders",value:function(){var e,t=this,n=this.props,r=n.fetchCompare,a=n.masterList,s=n.permissions,o=n.referenceId,i=n.removeSystem,l=n.selectedBaselineIds,c=n.selectedHSPIds,u=n.selectHistoricProfiles,p=n.systemIds,f=n.updateReferenceId,m=[],h="";return a.forEach((function(e){"system"===e.type?h=d().createElement(y.Tooltip,{position:"top",content:d().createElement("div",null,"System")},d().createElement(S.ServerIcon,null)):"baseline"===e.type?h=d().createElement(y.Tooltip,{position:"top",content:d().createElement("div",null,"Baseline")},d().createElement(S.BlueprintIcon,null)):"historical-system-profile"===e.type&&(h=d().createElement(y.Tooltip,{position:"top",content:d().createElement("div",null,"Historical system")},d().createElement(S.ClockIcon,null))),m.push(d().createElement("th",{ref:t.columnWidth,"header-id":e.id,key:e.id,className:e.id===o?"drift-header right-border reference-header sticky-header":"drift-header right-border ".concat(e.type,"-header sticky-header")},d().createElement("div",null,d().createElement("a",{onClick:function(){return i(e)},className:"remove-system-icon","data-ouia-component-type":"PF4/Button","data-ouia-component-id":"remove-system-button-"+e.id},d().createElement(S.TimesIcon,null))),d().createElement("div",{className:"comparison-header"},d().createElement("div",null,d().createElement("span",{className:"drift-header-icon"},h),d().createElement("span",{className:"system-name"},e.display_name)),d().createElement("div",{className:"system-updated-and-reference"},d().createElement(te,{updateReferenceId:f,item:e,isReference:e.id===o}),!1===e.system_profile_exists?d().createElement(y.Tooltip,{position:"top",content:d().createElement("div",null,"System profile does not exist. Please run insights-client on system to upload archive.")},d().createElement(S.ExclamationTriangleIcon,{color:"#f0ab00"})):"",d().createElement("span",{className:"margin-right-4-px"},e.last_updated?t.formatDate(e.last_updated):t.formatDate(e.updated)),!s.hspRead||"system"!==e.type&&"historical-system-profile"!==e.type?null:d().createElement($.Z,{system:e,systemIds:p,systemName:e.display_name,referenceId:o,fetchCompare:r,hasCompareButton:!0,hasMultiSelect:!0,selectedHSPIds:c,selectHistoricProfiles:u,selectedBaselineIds:l})))))})),null===this.state.refState&&null!==(null===(e=this.columnWidth)||void 0===e?void 0:e.current)&&this.setColumnWidth(),m}},{key:"renderHeaderRow",value:function(){var e=this,t=this.props,n=t.factSort,r=t.masterList,a=t.stateSort;return d().createElement("tr",{className:"sticky-column-header","data-ouia-component-type":"PF4/TableRow","data-ouia-component-id":"comparison-table-header-row"},d().createElement("th",{className:"fact-header sticky-column fixed-column-1 pointer sticky-header",key:"fact-header",id:n,onClick:function(){return e.toggleSort("fact",n)},"data-ouia-component-type":"PF4/Button","data-ouia-component-id":"fact-sort-button"},d().createElement("div",{className:"active-blue"},"Fact ",this.renderSortButton(n))),d().createElement("th",{className:"state-header sticky-column fixed-column-2 pointer right-border sticky-header",key:"state-header",id:a||"disabled","data-ouia-component-type":"PF4/Button","data-ouia-component-id":"state-sort-button",onClick:function(){return e.toggleSort("state",a)}},""!==a?d().createElement("div",{className:"active-blue"},"State ",this.renderSortButton(a)):d().createElement("div",null,"State ",this.renderSortButton(a))),r.length?this.renderSystemHeaders():this.renderLoadingSystems())}},{key:"render",value:function(){return d().createElement(d().Fragment,null,this.renderHeaderRow())}}]),u}(u.Component);ne.propTypes={factSort:f().string,fetchCompare:f().func,hasHSPReadPermissions:f().bool,masterList:f().array,permissions:f().object,referenceId:f().string,removeSystem:f().func,stateSort:f().string,systemIds:f().array,toggleFactSort:f().func,toggleStateSort:f().func,updateReferenceId:f().func,setHistory:f().func,selectedHSPIds:f().array,selectHistoricProfiles:f().func,selectedBaselineIds:f().array,columnWidth:f().number,setColumnHeaderWidth:f().func.isRequired};const re=ne;var ae=function(e){(0,i.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,c.Z)(t);if(n){var a=(0,c.Z)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,l.Z)(this,e)});function a(e){return(0,s.Z)(this,a),r.call(this,e)}return(0,o.Z)(a,[{key:"icon",value:function(){return"SAME"===this.props.fact.state?d().createElement(S.CheckCircleIcon,{color:"#3E8635",height:"16px",width:"16px"}):"DIFFERENT"===this.props.fact.state?d().createElement(S.ExclamationCircleIcon,{color:"#C9190B",height:"16px",width:"16px"}):d().createElement(S.QuestionCircleIcon,{color:"#6A6E73",height:"16px",width:"16px"})}},{key:"render",value:function(){var e=this.props,t=e.fact,n=e.stateSort;return d().createElement(y.Tooltip,{key:t.name+"-"+n,position:"top",content:d().createElement("div",null,t.tooltip)},this.icon())}}]),a}(u.Component);ae.propTypes={fact:f().object,stateSort:f().string};const se=ae;function oe(e){var t=e.expandedRows,n=e.expandRow,r=e.factName,a=e.type;return d().createElement("td",{className:"fact"===a||"category"===a&&!t.includes(r)?"sticky-column fixed-column-1":"nested-fact sticky-column fixed-column-1"},function(){var e;if("category"===a||"multi fact"===a){var s=t.includes(r)?d().createElement(S.AngleDownIcon,{className:"carat-margin pointer active-blue"+("multi fact"===a?" child-row":null),"data-ouia-component-type":"PF4/Button","data-ouia-component-id":"expand-category-button-"+r,onClick:function(){return n(r)}}):d().createElement(S.AngleRightIcon,{className:"carat-margin pointer"+("multi fact"===a?" child-row":null),"data-ouia-component-type":"PF4/Button","data-ouia-component-id":"expand-category-button-"+r,onClick:function(){return n(r)}});e=d().createElement("span",null,s," ",r)}else e="sub fact"===a?d().createElement("p",{className:"child-row"},r):r;return e}())}oe.propTypes={expandedRows:f().array,expandRow:f().func,factName:f().string,type:f().string};const ie=oe;function le(e){var t,n=e.columnWidth,r=e.expandedRows,a=e.expandRow,s=e.fact,o=e.masterList,i=e.referenceId,l=e.stateSort,c=e.type,u=function(e,t){return e.find((function(e){return e.id===t}))},p=function(e){var t=["comparison-cell"];return null!=e&&e.is_obfuscated&&t.push("obfuscated"),i&&"DIFFERENT"===(null==e?void 0:e.state)?(t.push("highlight"),t.push("different-fact-cell")):i||"DIFFERENT"!==s.state||t.push("highlight"),t};return d().createElement("tr",{"data-ouia-component-type":"PF4/TableRow","data-ouia-component-id":"comparison-table-row-"+s.name,className:"DIFFERENT"===s.state||"INCOMPLETE_DATA_OBFUSCATED"===s.state?"unexpected-row":""},((t=[]).push(d().createElement(ie,{expandedRows:r,expandRow:a,factName:s.name,type:c})),t.push(d().createElement("td",{className:"fact-state sticky-column fixed-column-2"},d().createElement(se,{fact:s,stateSort:l||null}))),t=t.concat(function(){for(var e,t,r=[],a=0;a<o.length;a++){var i,l,c;s.systems&&(e=u(s.systems,o[a].id));var f=p(e);f.includes("comparison-cell")&&(t=n),r.push(d().createElement("td",{style:{width:t},className:f.join(" ")},null===(null===(i=e)||void 0===i?void 0:i.value)?"No Data":null===(l=e)||void 0===l?void 0:l.value,null!==(c=e)&&void 0!==c&&c.is_obfuscated?d().createElement("span",{style:{float:"right"}},d().createElement(y.Tooltip,{position:"top",content:d().createElement("div",null,"This data has been redacted from the insights-client upload.")},d().createElement(S.LockIcon,{color:"#737679"}))):""))}return r}())))}le.propTypes={columnWidth:f().number,expandedRows:f().array,expandRow:f().func,fact:f().object,masterList:f().array,referenceId:f().string,stateSort:f().string,type:f().string};const ce=le;var ue=n(55140);function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var pe=function(e){(0,i.Z)(y,e);var t,n,r,u,p,f,m=(p=y,f=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(p);if(f){var n=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,l.Z)(this,e)});function y(e){var t;return(0,s.Z)(this,y),(t=m.call(this,e)).setColumnHeaderWidth=function(e){t.setState({columnHeaderWidth:e})},t.shiftReferenceToFront=function(e){var n,r;return n=e.findIndex((function(e){return e.id===t.props.referenceId})),r=e.splice(n,1),e.unshift(r[0]),e},t.updateReferenceId=function(e){t.fetchCompare(t.systemIds,t.baselineIds,t.HSPIds,e)},t.findHSPReference=function(){var e=t.props.referenceId,n=e;return t.HSPIds.forEach((function(t){t===e&&(n=void 0)})),n},t.state={columnHeaderWidth:0},t.masterList=[],t.setSystemIds(),t.setBaselineIds(),t.setHSPIds(),t.setReferenceId(),t.setFilters(),t.setSort(),t.topScroller=d().createRef(),t.headerScroll=d().createRef(),t.bottomScroller=d().createRef(),t.doubleScroll=t.doubleScroll.bind((0,x.Z)(t)),t.fetchCompare=t.fetchCompare.bind((0,x.Z)(t)),t.removeSystem=t.removeSystem.bind((0,x.Z)(t)),t}return(0,o.Z)(y,[{key:"doubleScroll",value:function(){var e=this.topScroller.current,t=this.headerScroll.current,n=this.bottomScroller.current;e.onscroll=function(){t.scrollLeft=e.scrollLeft,n.scrollLeft=e.scrollLeft},n.onscroll=function(){e.scrollLeft=n.scrollLeft,t.scrollLeft=n.scrollLeft}}},{key:"componentDidMount",value:(u=(0,k.Z)(w().mark((function e(){return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.systemIds.length>0||this.baselineIds.length>0||this.HSPIds.length>0)){e.next=3;break}return e.next=3,this.fetchCompare(this.systemIds,this.baselineIds,this.HSPIds,this.props.referenceId);case 3:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"componentDidUpdate",value:(r=(0,k.Z)(w().mark((function e(t){var n;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.emptyState||!t.emptyState){e.next=4;break}return n=this.props.chrome,e.next=4,null==n?void 0:n.appAction("comparison-view");case 4:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"formatEntities",value:function(e,t,n){var r,s=[],o={};if(0===e.length&&0===t.length&&0===n.length)return[];e=e.map((function(e){return e.type="system",e})),t=t.map((function(e){return e.type="baseline",e})),(n=n.map((function(e){return e.type="historical-system-profile",e}))).forEach((function(e){Object.prototype.hasOwnProperty.call(o,e.system_id)?o[e.system_id].push(e):o[e.system_id]=[e]})),s=e;for(var i=function(){var t=(0,a.Z)(c[l],2),n=t[0],r=t[1],o=e.find((function(e){return n===e.id})),i=void 0;void 0!==o?(i=s.indexOf(o),s=[].concat((0,E.Z)(s.slice(0,i+1)),(0,E.Z)(r),(0,E.Z)(s.slice(i+1,s.length)))):s=s.concat(r)},l=0,c=Object.entries(o);l<c.length;l++)i();return r=t.concat(s),this.props.referenceId&&(r=this.shiftReferenceToFront(r)),r}},{key:"setSystemIds",value:function(){var e,t=this.props.searchParams;this.systemIds=t.getAll("system_ids"),null!==(e=this.systemIds)&&void 0!==e&&e.length?(this.systemIds=Array.isArray(this.systemIds)?this.systemIds:[this.systemIds],this.systemIds=this.systemIds.filter((function(e){return void 0!==e}))):this.systemIds=this.props.systems.map((function(e){return e.id}))}},{key:"setBaselineIds",value:function(){var e,t=this.props.searchParams;this.baselineIds=t.getAll("baseline_ids"),null!==(e=this.baselineIds)&&void 0!==e&&e.length?(this.baselineIds=Array.isArray(this.baselineIds)?this.baselineIds:[this.baselineIds],this.baselineIds=this.baselineIds.filter((function(e){return void 0!==e})),this.props.setSelectedBaselines(this.baselineIds,"COMPARISON")):this.baselineIds=this.props.baselines.map((function(e){return e.id}))}},{key:"setHSPIds",value:function(){var e,t=this.props,n=t.selectHistoricProfiles,r=t.searchParams;this.HSPIds=r.getAll("hsp_ids"),null!==(e=this.HSPIds)&&void 0!==e&&e.length?(this.HSPIds=Array.isArray(this.HSPIds)?this.HSPIds:[this.HSPIds],this.HSPIds=this.HSPIds.filter((function(e){return void 0!==e})),n(this.HSPIds)):this.HSPIds=this.props.historicalProfiles.map((function(e){return e.id}))}},{key:"setReferenceId",value:function(){var e=this.props,t=e.updateReferenceId,n=e.searchParams.get("reference_id");n&&t(null===n?void 0:n)}},{key:"addFilters",value:function(e,t,n,r){(null==e?void 0:e.length)>0&&t.forEach((function(t){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(Object(n),!0).forEach((function(t){(0,P.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t);null!=e&&e.includes(t.filter.toLowerCase())&&(a.selected=!1,"fact"===r&&n(a)),"state"===r&&n(a)}))}},{key:"setFilters",value:function(){var e,t,n,r=this.props,a=r.addStateFilter,s=r.factTypeFilters,o=r.handleFactFilter,i=r.stateFilters,l=r.toggleFactTypeFilter,c=r.searchParams;null===(e=c.get("filter[name]"))||void 0===e||e.split(",").forEach((function(e){o(e)}));var u=null===(t=c.get("filter[state]"))||void 0===t?void 0:t.split(","),d=null===(n=c.get("filter[show]"))||void 0===n?void 0:n.split(",");this.addFilters(u,i,a,"state"),this.addFilters(d,s,l,"fact")}},{key:"setSort",value:function(){var e,t,n=this.props,r=n.toggleFactSort,a=n.toggleStateSort,s=null===(e=n.searchParams.get("sort"))||void 0===e?void 0:e.split(",");null==s||s.forEach((function(e){e.includes("fact")?"-"===e[0]?r(C.aW):r(C.jo):"-"===e[0]?a(C.aW):"state"===e&&a("")})),1===(null==s?void 0:s.length)&&null!==(t=s[0])&&void 0!==t&&t.includes("fact")&&a(C.jo)}},{key:"removeSystem",value:(n=(0,k.Z)(w().mark((function e(t){var n,r,a,s,o,i,l,c,u,d,p;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,r=n.handleBaselineSelection,a=n.handleHSPSelection,s=n.handleSystemSelection,o=n.historicalProfiles,i=n.isFirstReference,l=n.referenceId,c=n.selectHistoricProfiles,u=n.setIsFirstReference,d=l,"system"!==t.type){e.next=15;break}return this.systemIds=this.systemIds.filter((function(e){return e!==t.id})),e.next=6,this.findHSPReference();case 6:return d=e.sent,s([t],!1),p=o.filter((function(e){return e.system_id===t.id})),e.next=11,o.filter((function(e){return e.system_id!==t.id})).map((function(e){return e.id}));case 11:this.HSPIds=e.sent,p.forEach((function(e){a(e)})),e.next=16;break;case 15:"baseline"===t.type?(this.baselineIds=this.baselineIds.filter((function(e){return e!==t.id})),r([t],!1)):"historical-system-profile"===t.type&&(this.HSPIds=this.HSPIds.filter((function(e){return e!==t.id})),a(t));case 16:t.id===d&&(d=void 0),c(this.HSPIds),this.systemIds.length||this.baselineIds.length||this.HSPIds.length||l||i||u(!0),this.fetchCompare(this.systemIds,this.baselineIds,this.HSPIds,d);case 20:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"fetchCompare",value:(t=(0,k.Z)(w().mark((function e(){var t,n,r,a,s,o,i,l,c,u,d,p,f,m=arguments;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=m.length>0&&void 0!==m[0]?m[0]:[],n=m.length>1?m[1]:void 0,r=m.length>2?m[2]:void 0,a=m.length>3?m[3]:void 0,s=this.props,o=s.clearComparison,i=s.fetchCompare,l=s.isFirstReference,c=s.setHistory,u=s.setIsFirstReference,d=s.setSelectedBaselines,p=s.updateReferenceId,this.systemIds=t,this.baselineIds=n,this.HSPIds=r,l?!a&&this.baselineIds.length?f=n[0]:a&&(f=a):f=a,t.includes(f)||n.includes(f)||r.includes(f)||(f=void 0),d(this.baselineIds,"COMPARISON"),p(f),!(t.length||n.length||r.length||f)){e.next=19;break}return e.next=15,i(t,n,r,f);case 15:return e.next=17,u(!1);case 17:e.next=21;break;case 19:return e.next=21,o();case 21:c();case 22:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"renderRows",value:function(e){var t=this,n=[];return void 0!==e&&e.forEach((function(e){n.push(t.renderRow(e))})),n}},{key:"renderLoadingRows",value:function(){var e=[],t=[];t.push(d().createElement("td",{className:"fact-loading-width"},d().createElement(h.Skeleton,{size:h.SkeletonSize.md}))),t.push(d().createElement("td",{className:"state-loading-width"},d().createElement(h.Skeleton,{size:h.SkeletonSize.md}))),t.push(d().createElement("td",null,d().createElement(h.Skeleton,{size:h.SkeletonSize.md})));for(var n=0;n<10;n+=1)e.push(d().createElement("tr",null,t));return e}},{key:"renderRow",value:function(e){var t=this,n=this.props,r=n.expandedRows,a=n.expandRow,s=n.referenceId,o=n.stateSort,i=this.state.columnHeaderWidth,l=[];return e.comparisons?(l.push(d().createElement(ce,{expandedRows:r,expandRow:a,fact:e,masterList:this.masterList,referenceId:s,stateSort:o,type:"category",columnWidth:i})),r.includes(e.name)&&e.comparisons.forEach((function(e){e.multivalues?(l.push(d().createElement(ce,{expandedRows:r,expandRow:a,fact:e,masterList:t.masterList,referenceId:s,stateSort:o,type:"multi fact",columnWidth:i})),r.includes(e.name)&&e.multivalues.forEach((function(e){l.push(d().createElement(ce,{expandedRows:r,fact:e,masterList:t.masterList,referenceId:s,stateSort:o,type:"multi value",columnWidth:i}))}))):l.push(d().createElement(ce,{expandedRows:r,fact:e,masterList:t.masterList,referenceId:s,stateSort:o,type:"sub fact",columnWidth:i}))}))):l.push(d().createElement(ce,{expandedRows:r,fact:e,masterList:this.masterList,referenceId:s,stateSort:o,type:"fact",columnWidth:i})),l}},{key:"renderTable",value:function(e,t){var n=this.props,r=n.factSort,a=n.permissions,s=n.referenceId,o=n.selectedBaselineIds,i=n.selectedHSPIds,l=n.selectHistoricProfiles,c=n.setHistory,u=n.stateSort,p=n.toggleFactSort,f=n.toggleStateSort,m="";return this.bottomScroller.current&&(m=this.bottomScroller.current.scrollWidth),d().createElement(d().Fragment,null,d().createElement("div",{className:"sticky-table-header"},d().createElement("div",{className:"second-scroll-wrapper",onScroll:this.doubleScroll,ref:this.topScroller},d().createElement("div",{className:"second-scroll",style:{width:m}})),d().createElement("div",{className:"drift-table-wrapper",onScroll:this.doubleScroll,ref:this.headerScroll},d().createElement("table",{className:"pf-c-table pf-m-compact drift-table","data-ouia-component-type":"PF4/Table","data-ouia-component-id":"comparison-table"},d().createElement("thead",null,d().createElement(re,{factSort:r,fetchCompare:this.fetchCompare,permissions:a,masterList:this.masterList,referenceId:s,removeSystem:this.removeSystem,stateSort:u,systemIds:this.systemIds,toggleFactSort:p,toggleStateSort:f,updateReferenceId:this.updateReferenceId,setHistory:c,selectedHSPIds:i,selectHistoricProfiles:l,selectedBaselineIds:o,setColumnHeaderWidth:this.setColumnHeaderWidth}))))),d().createElement("div",{className:"drift-table-wrapper table-body-scroll",onScroll:this.doubleScroll,ref:this.bottomScroller},d().createElement("table",{className:"pf-c-table pf-m-compact drift-table","data-ouia-component-type":"PF4/Table","data-ouia-component-id":"comparison-table"},d().createElement("tbody",null,t?this.renderLoadingRows():this.renderRows(e)))))}},{key:"render",value:function(){var e=this.props,t=e.emptyState,n=e.filteredCompareData,r=e.systems,a=e.baselines,s=e.historicalProfiles,o=e.loading,i=e.permissions,l=e.updateReferenceId;return this.masterList=this.formatEntities(r,a,s),d().createElement(d().Fragment,null,d().createElement(q,{selectedSystemIds:r.map((function(e){return e.id})),confirmModal:this.fetchCompare,referenceId:this.props.referenceId,permissions:i,updateReferenceId:l}),t?null:this.renderTable(n,o))}}]),y}(u.Component);pe.propTypes={addSystemModalOpened:f().bool,history:f().object,fetchCompare:f().func,fullCompareData:f().array,filteredCompareData:f().array,systems:f().array,baselines:f().array,historicalProfiles:f().array,factSort:f().string,stateSort:f().string,loading:f().bool,toggleFactSort:f().func,toggleStateSort:f().func,expandRow:f().func,expandedRows:f().array,setSelectedBaselines:f().func,selectHistoricProfiles:f().func,emptyState:f().bool,updateReferenceId:f().func,referenceId:f().string,error:f().object,isFirstReference:f().bool,setIsFirstReference:f().func,clearComparison:f().func,permissions:f().object,stateFilters:f().array,addStateFilter:f().func,handleFactFilter:f().func,activeFactFilters:f().array,factFilter:f().string,setHistory:f().func,selectedHSPIds:f().array,selectedBaselineIds:f().array,handleBaselineSelection:f().func,handleHSPSelection:f().func,handleSystemSelection:f().func,hasHSPReadPermissions:f().bool,factTypeFilters:f().array,toggleFactTypeFilters:f().func,chrome:f().object,searchParams:f().object};const fe=(0,m.connect)((function(e){return{addSystemModalOpened:e.addSystemModalState.addSystemModalOpened,fullCompareData:e.compareState.fullCompareData,filteredCompareData:e.compareState.filteredCompareData,loading:e.compareState.loading,expandedRows:e.compareState.expandedRows,emptyState:e.compareState.emptyState}}),(function(e){return{fetchCompare:function(t,n,r,a){return e(b.r.fetchCompare(t,n,r,a))},toggleFactSort:function(t){return e(b.r.toggleFactSort(t))},toggleStateSort:function(t){return e(b.r.toggleStateSort(t))},expandRow:function(t){return e(b.r.expandRow(t))},setSelectedBaselines:function(t,n){return e(v.w.setSelectedBaselines(t,n))},selectHistoricProfiles:function(t){return e(F.h.selectHistoricProfiles(t))}}}))((function(e){var t=(0,ue.Z)();return d().createElement(pe,(0,r.Z)({},e,{chrome:t}))}));var me=n(23419),he=n(93187);var ye=function(e){(0,i.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,c.Z)(t);if(n){var a=(0,c.Z)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,l.Z)(this,e)});function a(e){return(0,s.Z)(this,a),r.call(this,e)}return(0,o.Z)(a,[{key:"render",value:function(){var e=this.props,t=e.loading,n=e.toggleAddSystemModal,r=e.isToolbar;return d().createElement(y.Button,{variant:"primary",onClick:n,isDisabled:!!t,ouiaId:r?"add-to-comparison":"add-to-comparison-empty"},r?"Add to comparison":"Add systems or baselines")}}]),a}(u.Component);ye.propTypes={toggleAddSystemModal:f().func,isToolbar:f().bool,loading:f().bool};const Se=(0,m.connect)(null,(function(e){return{toggleAddSystemModal:function(){return e(g.x.toggleAddSystemModal())}}}))(ye);var ve=n(43895),ge=n(74381);function be(e){var t=e.filterType,n=e.toggleFilterType,r=(0,u.useState)(!1),s=(0,a.Z)(r,2),o=s[0],i=s[1],l=function(e){n(e),i(!o)},c=[d().createElement(y.DropdownItem,{"data-ouia-component-id":"fact-name-filter",key:"fact-name",onClick:function(){return l("Fact name")}},"Fact name"),d().createElement(y.DropdownItem,{"data-ouia-component-id":"fact-type-filter",key:"fact-type",onClick:function(){return l("Fact type")}},"Fact type"),d().createElement(y.DropdownItem,{"data-ouia-component-id":"state-filter",key:"state",onClick:function(){return l("State")}},"State")];return d().createElement(y.Dropdown,{ouiaId:"drift-filter-dropdown",className:"comparison-filter-dropdown-width",toggle:d().createElement(y.DropdownToggle,{onToggle:i,ouiaId:"drift-filter-toggle",icon:d().createElement(S.FilterIcon,null)},t),isOpen:o,dropdownItems:c})}be.propTypes={filterType:f().string,toggleFilterType:f().func};const Fe=be;var Ee=function(e){(0,i.Z)(u,e);var t,n,r,a=(n=u,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(n);if(r){var a=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return(0,l.Z)(this,e)});function u(e){var t;return(0,s.Z)(this,u),(t=a.call(this,e)).updateFactFilter=function(e){t.setState({filter:e}),t.setFactFilter(e)},t.setFactFilter=X()(function(){var e=(0,k.Z)(w().mark((function e(t){return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.filterByFact(t);case 2:this.props.setHistory();case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),250),t.checkKeyPress=function(e){var n=t.props.activeFactFilters,r=t.state.filter;"Enter"===e.key&&(e.preventDefault(),n.includes(r)||t.addToActiveFactFilters(r))},t.state={filter:t.props.factFilter},t.setFactFilter=t.setFactFilter.bind((0,x.Z)(t)),t}return(0,o.Z)(u,[{key:"componentDidUpdate",value:function(e){""!==e.factFilter&&""===this.props.factFilter&&this.setState({filter:this.props.factFilter})}},{key:"addToActiveFactFilters",value:(t=(0,k.Z)(w().mark((function e(t){var n,r,a;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props,r=n.handleFactFilter,a=n.setHistory,e.next=3,r(t);case 3:a();case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"render",value:function(){return d().createElement(d().Fragment,null,d().createElement(y.Form,null,d().createElement(y.FormGroup,{isRequired:!0,type:"text",fieldId:"filter",onKeyPress:this.checkKeyPress},d().createElement(y.TextInput,{value:this.state.filter,id:"filterByFact",placeholder:"Filter by fact",onChange:this.updateFactFilter,"aria-label":"filter by fact","data-ouia-component-type":"PF4/TextInput","data-ouia-component-id":"fact-filter-input-comparison"}))))}}]),u}(u.Component);Ee.propTypes={filterByFact:f().func,factFilter:f().string,handleFactFilter:f().func,activeFactFilters:f().array,setHistory:f().func};const Ie=Ee;var Ce=n(18211);const Te=function(){return{type:Ce.Z.OPEN_FILTER_DROPDOWN}};var Pe=function(e){(0,i.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,c.Z)(t);if(n){var a=(0,c.Z)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,l.Z)(this,e)});function a(e){var t;return(0,s.Z)(this,a),(t=r.call(this,e)).addFilter=function(){var e=(0,k.Z)(w().mark((function e(n){var r,a,s;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.props,a=r.filterFunction,s=r.setHistory,e.next=3,a(n);case 3:s();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.onToggle=t.onToggle.bind((0,x.Z)(t)),t.createDropdownItem=t.createDropdownItem.bind((0,x.Z)(t)),t}return(0,o.Z)(a,[{key:"onToggle",value:function(){this.props.toggleDropDown()}},{key:"createDropdownItem",value:function(e,t){var n=this;return d().createElement(y.DropdownItem,{"data-ouia-component-id":"".concat(t,"-filter-option-").concat(e.display)},d().createElement(y.Checkbox,{id:e.display,"data-ouia-component-type":"PF4/Checkbox","data-ouia-component-id":"".concat(t,"-filter-option-checkbox-").concat(e.display),label:e.display,isChecked:e.selected,onChange:function(){return n.addFilter(e)}}))}},{key:"createDropdownArray",value:function(e,t){var n=[];return e.forEach(function(e){var r=this.createDropdownItem(e,t);n.push(r)}.bind(this)),n}},{key:"render",value:function(){var e,t=this.props,n=t.filters,r=t.type,a=r.split(" ").join("-").toLowerCase();return e=this.createDropdownArray(n,r),d().createElement(d().Fragment,null,d().createElement(y.Dropdown,{ouiaId:a,toggle:d().createElement(y.DropdownToggle,{onToggle:this.onToggle,ouiaId:"".concat(a,"-toggle")},"State"===r?"Filter by ".concat(r.toLowerCase()):"Show"),isOpen:this.props.filterDropdownOpened,dropdownItems:e}))}}]),a}(u.Component);Pe.propTypes={toggleDropDown:f().func,factTypeFilters:f().array,filterDropdownOpened:f().bool,filters:f().array,filterFunction:f().func,setHistory:f().func,type:f().string};const ke=(0,m.connect)((function(e){return{filterDropdownOpened:e.filterDropdownOpened}}),(function(e){return{toggleDropDown:function(){return e(Te())}}}))(Pe);function xe(e){var t,n,r=e.activeFactFilters,a=e.addStateFilter,s=e.factFilter,o=e.factTypeFilters,i=e.filterByFact,l=e.filterType,c=e.handleFactFilter,u=e.removeChip,p=e.setHistory,f=e.stateFilters,m=e.toggleFactTypeFilter,h=function(e){var t=[];return e.forEach((function(e){e.selected&&"All facts"!==e.display&&t.push(e.display)})),t};return d().createElement(d().Fragment,null,(t=l,d().createElement(d().Fragment,null,d().createElement(y.ToolbarFilter,{chips:(n=(0,E.Z)(r),s.length&&!r.includes(s)&&n.push(s),n),deleteChip:u,deleteChipGroup:u,categoryName:"Fact name"},"Fact name"===t?d().createElement(Ie,{factFilter:s,activeFactFilters:r,handleFactFilter:c,filterByFact:i,setHistory:p}):null),d().createElement(y.ToolbarFilter,{className:"comparison-filter-input-dropdown-width",chips:h(o),deleteChip:u,categoryName:"Fact type"},"Fact type"===t?d().createElement(ke,{filterFunction:m,filters:o,setHistory:p,type:t}):null),d().createElement(y.ToolbarFilter,{className:"comparison-filter-input-dropdown-width",chips:h(f),deleteChip:u,deleteChipGroup:u,categoryName:"State"},"State"===t?d().createElement(ke,{filterFunction:a,filters:f,setHistory:p,type:t}):null))))}xe.propTypes={activeFactFilters:f().array,addStateFilter:f().func,factFilter:f().string,factTypeFilters:f().array,filterByFact:f().func,filterType:f().string,handleFactFilter:f().func,removeChip:f().func,setHistory:f().func,stateFilters:f().array,toggleFactTypeFilter:f().func};const Re=xe;function we(e){var t=e.activeFactFilters,n=e.addStateFilter,r=e.factFilter,s=e.factTypeFilters,o=e.filterByFact,i=e.handleFactFilter,l=e.removeChip,c=e.setHistory,p=e.stateFilters,f=e.toggleFactTypeFilter,m=(0,u.useState)("Fact name"),h=(0,a.Z)(m,2),S=h[0],v=h[1];return d().createElement(y.ToolbarGroup,{variant:"filter-group"},d().createElement(Fe,{filterType:S,toggleFilterType:v}),d().createElement(Re,{activeFactFilters:t,addStateFilter:n,factFilter:r,factTypeFilters:s,filterByFact:o,filterType:S,handleFactFilter:i,removeChip:l,setHistory:c,stateFilters:p,toggleFactTypeFilter:f}))}we.propTypes={activeFactFilters:f().array,addStateFilter:f().func,clearAllFactFilters:f().func,clearAllStateChips:f().func,factFilter:f().string,factTypeFilters:f().array,filterByFact:f().func,handleFactFilter:f().func,removeChip:f().func,setHistory:f().func,stateFilters:f().array,toggleFactTypeFilter:f().func};const Be=we;var Ze=function(e){(0,i.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,c.Z)(t);if(n){var a=(0,c.Z)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,l.Z)(this,e)});function a(e){var t;return(0,s.Z)(this,a),(t=r.call(this,e)).prepareExport=function(e){var n=t.props.store;(0,C.Ro)(n),e()},t.clearAllStateChips=(0,k.Z)(w().mark((function e(){var n,r;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.props,r=n.addStateFilter,n.stateFilters.forEach((function(e){e.selected=!0,r(e)}));case 2:case"end":return e.stop()}}),e)}))),t.resetFilters=(0,k.Z)(w().mark((function e(){var n,r,a;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.props,r=n.resetComparisonFilters,a=n.setHistory,e.next=3,r();case 3:a();case 4:case"end":return e.stop()}}),e)}))),t.onToggle=function(){var e=t.state.dropdownOpen;t.setState({dropdownOpen:!e})},t.clearFilters=(0,k.Z)(w().mark((function e(){var n,r,a;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.props,r=n.clearComparisonFilters,a=n.setHistory,e.next=3,r();case 3:a();case 4:case"end":return e.stop()}}),e)}))),t.clearComparison=(0,k.Z)(w().mark((function e(){var n,r,a,s,o,i,l;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.props,r=n.clearAllSelections,a=n.clearComparison,s=n.clearSelectedBaselines,o=n.setHistory,i=n.setIsFirstReference,l=n.updateReferenceId,e.next=3,a();case 3:return e.next=5,s("COMPARISON");case 5:return e.next=7,i(!0);case 7:return e.next=9,l();case 9:return e.next=11,r();case 11:o();case 12:case"end":return e.stop()}}),e)}))),t.removeChip=(0,k.Z)(w().mark((function e(){var n,r,a,s,o,i,l,c,u,d,p,f,m=arguments;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=m.length>0&&void 0!==m[0]?m[0]:"",r=m.length>1&&void 0!==m[1]?m[1]:"",a=t.props,s=a.activeFactFilters,o=a.addStateFilter,i=a.clearAllFactFilters,l=a.factTypeFilters,c=a.filterByFact,u=a.handleFactFilter,d=a.setHistory,p=a.stateFilters,f=a.toggleFactTypeFilter,"State"!==n){e.next=7;break}""===r?t.clearAllStateChips():p.forEach(function(){var e=(0,k.Z)(w().mark((function e(t){return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.display!==r){e.next=3;break}return e.next=3,o(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=23;break;case 7:if("Fact type"!==n){e.next=11;break}f(l[1]),e.next=23;break;case 11:if(""!==r){e.next=16;break}return e.next=14,i();case 14:e.next=23;break;case 16:if(!s.includes(r)){e.next=21;break}return e.next=19,u(r);case 19:e.next=23;break;case 21:return e.next=23,c("");case 23:d();case 24:case"end":return e.stop()}}),e)}))),t.state={actionKebabItems:[d().createElement(y.DropdownItem,{key:"remove-systems",component:"button","data-ouia-component-id":"clear-all-comparisons-dropdown-item",onClick:t.clearComparison},"Clear all comparisons")],dropdownItems:[d().createElement(y.DropdownItem,{key:"export-to-CSV",component:"button","data-ouia-component-id":"export-to-csv-dropdown-item-comparison",onClick:function(){return t.prepareExport(t.props.exportToCSV)}},"Export to CSV"),d().createElement(y.DropdownItem,{key:"export-to-JSON",component:"button","data-ouia-component-id":"export-to-json-dropdown-item-comparison",onClick:function(){return t.prepareExport(t.props.exportToJSON)}},"Export to JSON")],isEmpty:!0,dropdownOpen:!1},t}return(0,o.Z)(a,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.exportStatus,r=t.resetExportStatus,a=t.store;"success"===n&&"success"!==e.exportStatus&&((0,C.Np)(a),r()),"failure"===n&&"failure"!==e.exportStatus&&((0,C.WD)(a),r())}},{key:"render",value:function(){var e=this.props,t=e.activeFactFilters,n=e.addStateFilter,r=e.factFilter,a=e.factTypeFilters,s=e.filterByFact,o=e.handleFactFilter,i=e.loading,l=e.page,c=e.perPage,u=e.setHistory,p=e.stateFilters,f=e.toggleFactTypeFilter,m=e.totalFacts,h=e.updatePagination,S=this.state,v=S.actionKebabItems,g=S.dropdownItems,b=S.dropdownOpen;return d().createElement(d().Fragment,null,d().createElement(y.Toolbar,{className:"drift-toolbar",clearAllFilters:this.resetFilters,clearFiltersButtonText:"Reset filters"},d().createElement(y.ToolbarContent,null,d().createElement(Be,{activeFactFilters:t,addStateFilter:n,factFilter:r,factTypeFilters:a,filterByFact:s,handleFactFilter:o,removeChip:this.removeChip,setHistory:u,stateFilters:p,toggleFactTypeFilter:f}),d().createElement(y.ToolbarGroup,{variant:"button-group"},d().createElement(y.ToolbarItem,null,d().createElement(Se,{loading:i,isToolbar:!0}))),d().createElement(y.ToolbarGroup,{variant:"icon-button-group"},d().createElement(y.ToolbarItem,null,d().createElement(ge.Z,{dropdownItems:g,ouiaId:"export-dropdown-comparison",isOpen:b,onToggle:this.onToggle})),d().createElement(y.ToolbarItem,null,d().createElement(ve.Z,{ouiaId:"clear-comparison-dropdown",dropdownItems:v}))),d().createElement(y.ToolbarItem,{variant:"pagination",align:{default:"alignRight"}},d().createElement(he.v,{page:l,perPage:c,total:m,isCompact:!0,updatePagination:h,widgetId:"drift-pagination-top",ouiaId:"comparison-pagination-top",variant:y.PaginationVariant.top})))))}}]),a}(u.Component);Ze.propTypes={loading:f().bool,page:f().number,perPage:f().number,totalFacts:f().number,updatePagination:f().func,clearComparisonFilters:f().func,clearComparison:f().func,exportStatus:f().string,exportToCSV:f().func,exportToJSON:f().func,clearSelectedBaselines:f().func,setIsFirstReference:f().func,updateReferenceId:f().func,factFilter:f().string,factTypeFilters:f().array,filterByFact:f().func,stateFilters:f().array,addStateFilter:f().func,toggleFactTypeFilter:f().func,activeFactFilters:f().array,handleFactFilter:f().func,clearAllFactFilters:f().func,setHistory:f().func,resetComparisonFilters:f().func,clearAllSelections:f().func,resetExportStatus:f().func,store:f().object};const He=Ze;var De=n(43946),Oe=n(62012),Ne=n(98773);var Ae=function(e){(0,i.Z)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,c.Z)(t);if(n){var a=(0,c.Z)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,l.Z)(this,e)});function a(e){var t;return(0,s.Z)(this,a),(t=r.call(this,e)).setHistory=function(){var e=t.props,n=e.activeFactFilters,r=e.baselines,a=e.factFilter,s=e.factSort,o=e.factTypeFilters,i=e.historicalProfiles,l=e.referenceId,c=e.stateFilters,u=e.stateSort,d=e.systems;T(e.navigate,d.map((function(e){return e.id})),r.map((function(e){return e.id})),i.map((function(e){return e.id})),l,n,a,o,c,s,u)},t.setIsFirstReference=function(e){t.setState({isFirstReference:e})},t.onClose=function(){var e=t.props,n=e.revertCompareData,r=e.previousStateSystems,a=e.navigate;n(),T(a,r.map((function(e){return e.id})))},t.renderEmptyState=function(){var e=t.props.error;return e.status?d().createElement(_.Z,{icon:S.ExclamationCircleIcon,color:"#c9190b",title:"Comparison cannot be displayed",text:C.LG,error:"Error "+e.status+": "+e.detail,button:d().createElement(Se,null)}):d().createElement(_.Z,{icon:S.PlusCircleIcon,color:"#6a6e73",title:C.Cl,text:C.LG,button:d().createElement(Se,null)})},t.state={isFirstReference:!0},t}return(0,o.Z)(a,[{key:"componentDidMount",value:function(){document.title=this.props.title}},{key:"componentDidUpdate",value:function(e){""!==e.searchParams&&""===this.props.searchParams&&this.setHistory()}},{key:"render",value:function(){var e=this,t=this.props,n=t.activeFactFilters,r=t.addStateFilter,a=t.baselines,s=t.clearAllFactFilters,o=t.clearAllSelections,i=t.clearComparison,l=t.clearComparisonFilters,c=t.clearSelectedBaselines,u=t.emptyState,p=t.error,f=t.exportToCSV,m=t.exportToJSON,v=t.exportStatus,g=t.factFilter,b=t.factSort,F=t.factTypeFilters,E=t.filterByFact,I=t.handleFactFilter,C=t.historicalProfiles,T=t.handleBaselineSelection,P=t.handleHSPSelection,k=t.handleSystemSelection,x=t.loading,R=t.page,w=t.perPage,B=t.referenceId,Z=t.resetComparisonFilters,H=t.resetExportStatus,D=t.selectedBaselineIds,O=t.selectedHSPIds,N=t.stateFilters,A=t.stateSort,M=t.systems,L=t.toggleFactTypeFilter,j=t.totalFacts,W=t.updatePagination,V=t.updateReferenceId,Y=t.searchParams,U=this.state.isFirstReference;return d().createElement(J.g.Consumer,null,(function(t){return d().createElement(d().Fragment,null,d().createElement(h.PageHeader,null,d().createElement(h.PageHeaderTitle,{title:"Comparison"})),d().createElement(h.Main,{store:null==t?void 0:t.registry.getStore()},d().createElement(De.B.Consumer,null,(function(h){return!1===h.permissions.compareRead?d().createElement(_.Z,{icon:S.LockIcon,color:"#6a6e73",title:"You do not have access to Drift comparison",text:["Contact your organization administrator(s) for more information."]}):d().createElement(d().Fragment,null,d().createElement(me.Z,{error:p,onClose:e.onClose}),u&&!x?e.renderEmptyState():d().createElement("div",null),d().createElement(y.Card,{className:"pf-t-light pf-m-opaque-100"},d().createElement(y.CardBody,null,u?null:d().createElement(He,{loading:x,history,page:R,perPage:w,totalFacts:j,updatePagination:W,clearComparison:i,clearComparisonFilters:l,exportToCSV:f,exportToJSON:m,updateReferenceId:V,setIsFirstReference:e.setIsFirstReference,clearSelectedBaselines:c,factFilter:g,factTypeFilters:F,filterByFact:E,stateFilters:N,addStateFilter:r,toggleFactTypeFilter:L,activeFactFilters:n,handleFactFilter:I,clearAllFactFilters:s,setHistory:e.setHistory,resetComparisonFilters:Z,clearAllSelections:o,exportStatus:v,resetExportStatus:H,store:null==t?void 0:t.registry.getStore()}),d().createElement(fe,{updateReferenceId:V,error:p,isFirstReference:U,setIsFirstReference:e.setIsFirstReference,clearComparison:i,handleBaselineSelection:T,handleHSPSelection:P,handleSystemSelection:k,permissions:h.permissions,handleFactFilter:I,addStateFilter:r,stateFilters:N,activeFactFilters:n,factFilter:g,setHistory:e.setHistory,factSort:b,stateSort:A,referenceId:B,systems:M,baselines:a,historicalProfiles:C,selectedHSPIds:O,selectedBaselineIds:D,factTypeFilters:F,toggleFactTypeFilter:L,searchParams:Y}),u||x?null:d().createElement(y.Toolbar,{className:"drift-toolbar"},d().createElement(y.ToolbarGroup,{className:"pf-c-pagination"},d().createElement(y.ToolbarItem,null,d().createElement(he.Z,{page:R,perPage:w,total:j,isCompact:!1,updatePagination:W,widgetId:"drift-pagination-bottom",ouiaId:"drift-pagination-bottom",variant:y.PaginationVariant.bottom})))))))}))))}))}}]),a}(u.Component);Ae.propTypes={perPage:f().number,page:f().number,totalFacts:f().number,error:f().object,loading:f().bool,clearSelectedBaselines:f().func,emptyState:f().bool,updatePagination:f().func,updateReferenceId:f().func,clearComparison:f().func,clearComparisonFilters:f().func,selectHistoricProfiles:f().func,selectedHSPIds:f().array,revertCompareData:f().func,previousStateSystems:f().array,exportToCSV:f().func,exportToJSON:f().func,factFilter:f().string,factTypeFilters:f().array,activeFactFilters:f().array,handleFactFilter:f().func,filterByFact:f().func,stateFilters:f().array,addStateFilter:f().func,toggleFactTypeFilter:f().func,clearAllFactFilters:f().func,factSort:f().string,stateSort:f().string,referenceId:f().string,systems:f().array,baselines:f().array,historicalProfiles:f().array,loadEntities:f().func,selectedBaselineIds:f().array,handleBaselineSelection:f().func,handleHSPSelection:f().func,handleSystemSelection:f().func,resetComparisonFilters:f().func,clearAllSelections:f().func,exportStatus:f().string,resetExportStatus:f().func,searchParams:f().object,navigate:f().func,title:f().string};const Me=(0,m.connect)((function(e){return{page:e.compareState.page,perPage:e.compareState.perPage,totalFacts:e.compareState.totalFacts,error:e.compareState.error,loading:e.compareState.loading,emptyState:e.compareState.emptyState,selectedHSPIds:e.historicProfilesState.selectedHSPIds,previousStateSystems:e.compareState.previousStateSystems,factFilter:e.compareState.factFilter,factTypeFilters:e.compareState.factTypeFilters,stateFilters:e.compareState.stateFilters,activeFactFilters:e.compareState.activeFactFilters,factSort:e.compareState.factSort,stateSort:e.compareState.stateSort,referenceId:e.compareState.referenceId,systems:e.compareState.systems,baselines:e.compareState.baselines,historicalProfiles:e.compareState.historicalProfiles,selectedBaselineIds:e.baselinesTableState.comparisonTable.selectedBaselineIds,exportStatus:e.compareState.exportStatus}}),(function(e){return{clearSelectedBaselines:function(t){return e(v.w.clearSelectedBaselines(t))},updatePagination:function(t){return e(b.r.updatePagination(t))},updateReferenceId:function(t){return e(b.r.updateReferenceId(t))},clearComparison:function(){return e(b.r.clearComparison())},clearComparisonFilters:function(){return e(b.r.clearComparisonFilters())},selectHistoricProfiles:function(t){return e(F.h.selectHistoricProfiles(t))},revertCompareData:function(){return e(b.r.revertCompareData())},exportToCSV:function(){return e(b.r.exportToCSV())},exportToJSON:function(){return e(b.r.exportToJSON())},filterByFact:function(t){return e(b.r.filterByFact(t))},addStateFilter:function(t){return e(b.r.addStateFilter(t))},toggleFactTypeFilter:function(t){return e(b.r.toggleFactTypeFilter(t))},handleFactFilter:function(t){return e(b.r.handleFactFilter(t))},clearAllFactFilters:function(){return e(b.r.clearAllFactFilters())},loadEntities:function(){return e({type:"LOAD_ENTITIES"})},handleSystemSelection:function(t,n){return e(g.x.handleSystemSelection(t,n))},handleBaselineSelection:function(t,n){return e(g.x.handleBaselineSelection(t,n))},handleHSPSelection:function(t){return e(g.x.handleHSPSelection(t))},resetComparisonFilters:function(){return e(b.r.resetComparisonFilters())},clearAllSelections:function(){return e(g.x.clearAllSelections())},resetExportStatus:function(){return e(b.r.resetExportStatus())}}}))((function(e){var t=(0,Oe.useSearchParams)(),n=(0,a.Z)(t,1)[0],s=(0,Ne.Z)();return d().createElement(Ae,(0,r.Z)({},e,{searchParams:n,navigate:s}))}))},23419:(e,t,n)=>{n.d(t,{Z:()=>h});var r=n(15671),a=n(43144),s=n(79340),o=n(82963),i=n(61120),l=n(92950),c=n.n(l),u=n(45697),d=n.n(u),p=n(90958),f=n(1447);var m=function(e){(0,s.Z)(u,e);var t,n,l=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,i.Z)(t);if(n){var a=(0,i.Z)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,o.Z)(this,e)});function u(e){var t;return(0,r.Z)(this,u),(t=l.call(this,e)).closeToast=function(e){var n=t.props.onClose;e?n(e):n()},t}return(0,a.Z)(u,[{key:"render",value:function(){var e=this.props,t=e.addNotification,n=e.error,r=e.tableId;return c().createElement(c().Fragment,null,n.status?t({variant:"danger",title:"Error",description:n.detail,dismissable:!0}):null,n.status?this.closeToast(r):null)}}]),u}(l.Component);m.propTypes={error:d().object,tableId:d().string,onClose:d().func,addNotification:d().func};const h=(0,p.connect)(null,(function(e){return{addNotification:function(t){return e((0,f.addNotification)(t))}}}))(m)}}]);
//# sourceMappingURL=../sourcemaps/149.1a3edfacd6cbcc21bae42309610f3bc3.js.map