(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{614:function(e,a,t){"use strict";t.r(a);var n=t(7),l=t.n(n),r=t(28),i=t.n(r),c=t(29),s=t.n(c),o=t(30),d=t.n(o),u=t(31),p=t.n(u),m=t(37),f=t.n(m),h=t(32),b=t.n(h),v=t(1),y=t.n(v),g=t(0),E=t.n(g),B=t(20),N=t(33),k=t(329),F=t(475),w=t(476),M=t(477),C=t(478),D=t(430),S=t(431),x=t(441),V=t(497),O=t(499),R=t(498),T=t(466),I=t(41),A=function(e){function a(e){var t;return i()(this,a),(t=d()(this,p()(a).call(this,e))).handleAddFact=t.handleAddFact.bind(f()(t)),t}return b()(a,e),s()(a,[{key:"handleAddFact",value:function(){var e=this.props,a=e.setFactData,t=e.toggleFactModal;a({factName:"",factValue:"",fact:[]}),t()}},{key:"render",value:function(){return y.a.createElement(V.a,{className:"display-margin"},y.a.createElement(O.a,null,y.a.createElement(R.a,null,y.a.createElement(T.a,{variant:"primary",onClick:this.handleAddFact},"Add fact"))))}}]),a}(v.Component);A.propTypes={toggleFactModal:E.a.func,setFactData:E.a.func};var P=Object(N.connect)(null,(function(e){return{toggleFactModal:function(){return e(I.a.toggleFactModal())},setFactData:function(a){return e(I.a.setFactData(a))}}}))(A),j=t(479),L=t(487),_=t(488),H=t(481),q=t(489),z=t(42),K=function(e){function a(e){var t;return i()(this,a),(t=d()(this,p()(a).call(this,e))).cancelFact=t.cancelFact.bind(f()(t)),t.confirmModal=t.confirmModal.bind(f()(t)),t.renderCategoryCheckbox=t.renderCategoryCheckbox.bind(f()(t)),t.renderFactInput=t.renderFactInput.bind(f()(t)),t.renderValueInput=t.renderValueInput.bind(f()(t)),t.renderModalBody=t.renderModalBody.bind(f()(t)),t.state={factName:t.props.factName,factValue:t.props.factValue,factData:t.props.factData,isCategory:t.props.isCategory},t.state.isAddFact=""===t.props.factName&&""===t.props.factValue,t.state.isEditFact=""!==t.props.factName&&""!==t.props.factValue,t.handleChange=function(e){t.setState({isCategory:e})},t.handleNewName=function(e){t.setState({factName:e})},t.handleNewValue=function(e){t.setState({factValue:e})},t}return b()(a,e),s()(a,[{key:"cancelFact",value:function(){(0,this.props.toggleFactModal)()}},{key:"confirmModal",value:function(){var e,a,t,n,r,i;return l.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.props,a=e.toggleFactModal,t=e.baselineData,n=e.patchBaseline,r=this.state.isAddFact,i="",c.prev=3,i=r?this.addFact(t):this.editFact(t),c.next=7,l.a.awrap(n(t.id,i));case 7:a(),c.next=12;break;case 10:c.prev=10,c.t0=c.catch(3);case 12:case"end":return c.stop()}}),null,this,[[3,10]])}},{key:"addFact",value:function(e){var a=this.state,t=a.isCategory,n=a.factName,l=a.factValue,r=a.factData,i=z.a.buildNewFactData(t,n,l,r);return z.a.makeAddFactPatch(i,e)}},{key:"editFact",value:function(e){var a=this.state,t=a.isCategory,n=a.factName,l=a.factValue,r=a.factData,i=z.a.buildEditedFactData(t,this.props.factName,n,this.props.factValue,l,r);return z.a.makeEditFactPatch(i,e,r)}},{key:"renderCategoryCheckbox",value:function(){var e=this.state,a=e.isCategory,t=e.isEditFact;return y.a.createElement(j.a,{"aria-label":"controlled checkbox example",label:"This is a category",id:"isCategory",name:"isCategory",onChange:this.handleChange,isChecked:a,isDisabled:a&&t})}},{key:"renderFactInput",value:function(){var e=this.props.error,a=this.state,t=a.factName,n=a.isCategory;return y.a.createElement("div",{className:"fact-value"},y.a.createElement(L.a,null,y.a.createElement(_.a,{label:n?"Category name":"Fact name",isRequired:!0,helperTextInvalid:e.hasOwnProperty("detail")?e.detail:null,isValid:!e.hasOwnProperty("status"),fieldId:"fact name"},y.a.createElement(H.a,{value:t,type:"text",placeholder:"Name",onChange:this.handleNewName,isValid:!e.hasOwnProperty("status"),"aria-label":"fact name"}))))}},{key:"renderValueInput",value:function(){var e=this.props.error,a=this.state.factValue;return y.a.createElement("div",{className:"fact-value"},y.a.createElement(L.a,null,y.a.createElement(_.a,{label:"Value",isRequired:!0,helperTextInvalid:e.hasOwnProperty("detail")?e.detail:null,isValid:!e.hasOwnProperty("status"),fieldId:"fact value"},y.a.createElement(H.a,{value:a,type:"text",placeholder:"Value",onChange:this.handleNewValue,isValid:!e.hasOwnProperty("status"),"aria-label":"value"}))))}},{key:"renderModalBody",value:function(){var e=this.props.isSubFact,a=this.state,t=a.isAddFact,n=a.isCategory;return y.a.createElement(y.a.Fragment,null,t&&!e||n?this.renderCategoryCheckbox():null,this.renderFactInput(),y.a.createElement("br",null),n?null:this.renderValueInput())}},{key:"title",value:function(){var e=this.props.isSubFact,a=this.state,t=a.isAddFact,n=a.isEditFact,l=a.isCategory,r="Add fact";return!0!==n||l||e?!0===t&&!0===l?r="Add category":!0===t&&!0===e?r="Add sub fact":!0===n&&!0===e?r="Edit sub fact":!0===l&&(r="Edit category"):r="Edit fact",r}},{key:"render",value:function(){var e=this.props.factModalOpened;return y.a.createElement(q.a,{className:"small-modal-body",title:this.title(),isOpen:e,onClose:this.cancelFact,width:"auto",isFooterLeftAligned:!0,actions:[y.a.createElement(T.a,{key:"confirm",variant:"primary",onClick:this.confirmModal},"Save"),y.a.createElement(T.a,{key:"cancel",variant:"secondary",onClick:this.cancelFact},"Cancel")]},this.renderModalBody())}}]),a}(v.Component);K.propTypes={toggleFactModal:E.a.func,factModalOpened:E.a.bool,factName:E.a.string,factValue:E.a.string,factData:E.a.obj,isCategory:E.a.bool,isSubFact:E.a.bool,baselineData:E.a.obj,patchBaseline:E.a.func,error:E.a.obj};var J=Object(N.connect)((function(e){return{factModalOpened:e.editBaselineState.factModalOpened,factName:e.editBaselineState.factName,factValue:e.editBaselineState.factValue,factData:e.editBaselineState.factData,isCategory:e.editBaselineState.isCategory,isSubFact:e.editBaselineState.isSubFact,baselineData:e.editBaselineState.baselineData,error:e.editBaselineState.error}}),(function(e){return{toggleFactModal:function(){return e(I.a.toggleFactModal())},patchBaseline:function(a,t){return e(I.a.patchBaseline(a,t))}}}))(K),U=function(e){function a(e){var t;return i()(this,a),(t=d()(this,p()(a).call(this,e))).cancelModal=function(){var e=t.props,a=e.toggleEditNameModal,n=e.baselineData;t.updateBaselineName(n.display_name),a()},t.state={baselineName:t.props.baselineData.display_name},t.updateBaselineName=function(e){t.setState({baselineName:e})},t.confirmModal=t.confirmModal.bind(f()(t)),t}return b()(a,e),s()(a,[{key:"confirmModal",value:function(){var e,a,t,n,r;return l.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return e=this.state.baselineName,a=this.props,t=a.baselineData,n=a.patchBaseline,r=a.toggleEditNameModal,i.prev=2,i.next=5,l.a.awrap(n(t.id,{display_name:e,facts_patch:[]}));case 5:r(),i.next=10;break;case 8:i.prev=8,i.t0=i.catch(2);case 10:case"end":return i.stop()}}),null,this,[[2,8]])}},{key:"renderModalBody",value:function(){var e=this.state.baselineName,a=this.props.error;return y.a.createElement("div",{className:"fact-value"},y.a.createElement(L.a,null,y.a.createElement(_.a,{label:"Baseline title",isRequired:!0,fieldId:"baseline name",helperTextInvalid:a.hasOwnProperty("detail")?a.detail:null,isValid:!a.hasOwnProperty("status")},y.a.createElement(H.a,{value:e,type:"text",onChange:this.updateBaselineName,isValid:!a.hasOwnProperty("status"),"aria-label":"baseline name"}))))}},{key:"render",value:function(){var e=this.props.editNameModalOpened;return y.a.createElement(q.a,{className:"pf-c-modal-box",title:"Edit title",isOpen:e,onClose:this.cancelModal,width:"auto",isFooterLeftAligned:!0,actions:[y.a.createElement(T.a,{key:"confirm",variant:"primary",onClick:this.confirmModal},"Save"),y.a.createElement(T.a,{key:"cancel",variant:"secondary",onClick:this.cancelModal},"Cancel")]},this.renderModalBody())}}]),a}(v.Component);U.propTypes={baselineId:E.a.string,baselineName:E.a.string,baselineData:E.a.object,editNameModalOpened:E.a.bool,toggleEditNameModal:E.a.func,patchBaseline:E.a.func,error:E.a.obj};var G=Object(N.connect)((function(e){return{baselineData:e.editBaselineState.baselineData,editNameModalOpened:e.editBaselineState.editNameModalOpened,error:e.editBaselineState.error}}),(function(e){return{toggleEditNameModal:function(){return e(I.a.toggleEditNameModal())},patchBaseline:function(a,t){return e(I.a.patchBaseline(a,t))}}}))(U),Q=t(327),W=function(e){function a(e){var t;return i()(this,a),(t=d()(this,p()(a).call(this,e))).fetchBaselineId(),t.renderBreadcrumb=t.renderBreadcrumb.bind(f()(t)),t.goToBaselinesList=t.goToBaselinesList.bind(f()(t)),t}return b()(a,e),s()(a,[{key:"componentDidMount",value:function(){return l.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.awrap(window.insights.chrome.auth.getUser());case 2:case"end":return e.stop()}}))}},{key:"fetchBaselineId",value:function(){var e=this.props,a=e.match.params;(0,e.fetchBaselineData)(a.id)}},{key:"goToBaselinesList",value:function(){var e=this.props,a=e.history;(0,e.clearBaselineData)(),a.push("/baselines")}},{key:"renderBreadcrumb",value:function(){var e=this,a=this.props.baselineData;return y.a.createElement(F.a,null,y.a.createElement(w.a,null,y.a.createElement("a",{onClick:function(){return e.goToBaselinesList()}},"Baselines")),y.a.createElement(w.a,{isActive:!0},a.display_name))}},{key:"renderHeaderRow",value:function(){return y.a.createElement("tr",null,y.a.createElement("th",{className:"edit-baseline-header"},y.a.createElement("div",null,"Fact")),y.a.createElement("th",{className:"edit-baseline-header"},y.a.createElement("div",null,"Value")),y.a.createElement("th",null))}},{key:"renderLoadingRows",value:function(){for(var e=[],a=[],t=0;t<3;t+=1)a.push(y.a.createElement("td",null,y.a.createElement(k.Skeleton,{size:k.SkeletonSize.md})));for(var n=0;n<10;n+=1)e.push(y.a.createElement("tr",null,a));return e}},{key:"renderExpandableRowButton",value:function(e){var a=this;return this.props.expandedRows.includes(e)?y.a.createElement(D.b,{className:"pointer active-blue",onClick:function(){return a.props.expandRow(e)}}):y.a.createElement(S.b,{className:"pointer",onClick:function(){return a.props.expandRow(e)}})}},{key:"renderRowData",value:function(e){var a=this.props.expandedRows,t=[],n=[];return e.values?(t.push(y.a.createElement("td",{className:a.includes(e.name)?"nested-fact":""},this.renderExpandableRowButton(e.name)," ",e.name)),t.push(y.a.createElement("td",null)),t.push(z.a.renderKebab({factName:e.name,fact:e,isCategory:!0})),n.push(y.a.createElement("tr",null,t)),a.includes(e.name)&&e.values.forEach((function(a){(t=[]).push(y.a.createElement("td",{className:"nested-fact"},y.a.createElement("p",{className:"child-row"},a.name))),t.push(y.a.createElement("td",null,a.value)),t.push(z.a.renderKebab({factName:a.name,factValue:a.value,fact:e,isSubFact:!0})),n.push(y.a.createElement("tr",null,t))}))):(t.push(y.a.createElement("td",null,e.name)),t.push(y.a.createElement("td",null,e.value)),t.push(z.a.renderKebab({factName:e.name,factValue:e.value,fact:e})),n.push(y.a.createElement("tr",null,t))),n}},{key:"renderRows",value:function(){var e=this.props.baselineData.baseline_facts,a=[],t=[];if(void 0!==e)for(var n=0;n<e.length;n+=1)t=this.renderRowData(e[n]),a.push(t);return a}},{key:"renderTable",value:function(){var e=this.props.baselineData;return y.a.createElement("table",{className:"pf-c-table ins-c-table pf-m-compact ins-entity-table drift-table"},y.a.createElement("thead",null,this.renderHeaderRow()),y.a.createElement("tbody",null,void 0!==e?this.renderRows():this.renderLoadingRows()))}},{key:"render",value:function(){var e=this.props,a=e.baselineData,t=e.factModalOpened,n=e.toggleEditNameModal;return y.a.createElement(y.a.Fragment,null,void 0!==a?y.a.createElement(y.a.Fragment,null,y.a.createElement(G,null),y.a.createElement(k.PageHeader,null,this.renderBreadcrumb(),y.a.createElement(k.PageHeaderTitle,{title:a.display_name}),y.a.createElement(x.b,{className:"pointer not-active edit-icon-margin",onClick:function(){return n()}}))):y.a.createElement(k.PageHeader,null,y.a.createElement("div",null,y.a.createElement(k.Skeleton,{size:k.SkeletonSize.lg}))),y.a.createElement(k.Main,null,y.a.createElement(M.a,{className:"pf-t-light pf-m-opaque-100"},y.a.createElement(C.a,null,t?y.a.createElement(J,null):null,y.a.createElement(P,null),this.renderTable()))))}}]),a}(v.Component);W.propTypes={history:E.a.object,match:E.a.any,clearBaselineData:E.a.func,baselineData:E.a.object,baselineDataLoading:E.a.bool,patchBaseline:E.a.func,fetchBaselineData:E.a.func,factModalOpened:E.a.bool,editBaselineTableData:E.a.array,expandRow:E.a.func,expandedRows:E.a.array,toggleEditNameModal:E.a.func};a.default=Object(B.o)(Object(N.connect)((function(e){return{baselineData:e.editBaselineState.baselineData,baselineDataLoading:e.editBaselineState.baselineDataLoading,factModalOpened:e.editBaselineState.factModalOpened,editBaselineTableData:e.editBaselineState.editBaselineTableData,expandedRows:e.editBaselineState.expandedRows}}),(function(e){return{clearBaselineData:function(){return e(Q.a.clearBaselineData())},patchBaseline:function(a,t){return e(I.a.patchBaseline(a,t))},expandRow:function(a){return e(I.a.expandRow(a))},fetchBaselineData:function(a){return e(I.a.fetchBaselineData(a))},toggleEditNameModal:function(){return e(I.a.toggleEditNameModal())}}}))(W))}}]);
//# sourceMappingURL=../sourcemaps/6.js.map