(self.webpackChunkdrift=self.webpackChunkdrift||[]).push([[253],{2270:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(49634),a=n(20881),i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},i.apply(this,arguments)};const o=function(e,t){var n=(0,r.useNavigate)(),o=(0,a.A)();return function(r,a){return n(function(e,t,n,r){var a=("object"==typeof n?n.pathname:n)||"",o=/^\//.test(a),l=r?"/preview":"",s=t||e.getApp(),c=o?[l,e.getBundle(),s,a.replace(/^\//,"")].join("/"):a;return"object"==typeof n?i(i({},n),{pathname:c}):c}(o,e,r,a||t))}}},40941:(e,t,n)=>{"use strict";n.d(t,{A:()=>k});var r=n(74848),a=n(32995),i=n.n(a),o=n(5556),l=n.n(o),s=n(4665),c=n(61225),u=n(13054);const f=function(e){var t=e.component,n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(e,["component"]);return(0,a.useEffect)((function(){console.error("Unable to load inventory component. Failed to load ".concat(t,"."),n)}),[]),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{children:"Unable to load inventory component"}),(0,r.jsxs)("h2",{children:["Failed to load ",t]}),(0,r.jsx)("code",{children:"More info can be found in browser console output."})]})};var p=n(46942),d=n.n(p),b=n(49634),m=n(20881),h=function(){return h=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},h.apply(this,arguments)},y=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},v=function(e){var t=e.Component,n=y(e,["Component"]),a=b.useHistory();return(0,r.jsx)(t,h({history:a},n))},S=function(e){var t=e.Component,n=y(e,["Component"]),a=(0,m.A)().chromeHistory;return(0,r.jsx)(t,h({history:a},n))};const E=i().forwardRef((function(e,t){var n=e.Component,i=y(e,["Component"]),o=(0,a.useMemo)((function(){return"function"==typeof b.useHistory?v:S}),[n,i]);return(0,r.jsx)(o,h({innerRef:t,Component:n},i))}));var g=function(){return g=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},g.apply(this,arguments)},B=function(e){var t=(0,c.useStore)(),n=e.component;return(0,r.jsx)(n,g({className:d()(e.className,"inventory")},{children:(0,r.jsx)(a.Suspense,g({fallback:e.fallback},{children:(0,r.jsx)(s.ScalprumComponent,g({history:e.history,store:t,appName:"inventory",module:"./InventoryTable",scope:"inventory",ErrorComponent:(0,r.jsx)(f,g({component:"InventoryDetailHead"},e)),ref:e.innerRef},e))}))}))};B.propTypes={fallback:l().node,innerRef:l().object,component:l().string,className:l().string,history:l().object};var x=i().forwardRef((function(e,t){return(0,r.jsx)(B,g({innerRef:t},e))}));x.propTypes={fallback:l().node,component:l().string,className:l().string},x.defaultProps={fallback:(0,r.jsx)(u.Bullseye,g({className:"pf-u-p-lg"},{children:(0,r.jsx)(u.Spinner,{size:"xl"})})),component:"section"};const k=i().forwardRef((function(e,t){return(0,r.jsx)(E,g({innerRef:t,Component:x},e))}))},39229:(e,t,n)=>{"use strict";n.r(t),n.d(t,{BaselinesPage:()=>K,default:()=>z});var r=n(58168),a=n(10467),i=n(23029),o=n(92901),l=n(50388),s=n(53954),c=n(15361),u=n(64467),f=n(54756),p=n.n(f),d=n(32995),b=n.n(d),m=n(5556),h=n.n(m),y=n(61225),v=n(95397),S=n(94798),E=n(92162),g=n(84244),B=n(80296),x=n(13054),k=n(50117),C=n(91950),T=n(8456),w=n(19631),A=n(91294),O=n(99249),I=n(2270),j=function(e){var t=e.middlewareListener,n=e.permissions,r=(0,y.useDispatch)(),i=(0,I.A)(),o=(0,d.useState)(""),l=(0,B.A)(o,2),s=l[0],c=l[1],u=(0,d.useState)(!0),f=(0,B.A)(u,2),m=f[0],h=f[1],v=(0,d.useState)(!1),S=(0,B.A)(v,2),j=S[0],P=S[1],D=(0,d.useState)(!1),H=(0,B.A)(D,2),N=H[0],_=H[1],R=[{title:"Name",transforms:[E.sortable,(0,E.cellWidth)(60)]},{title:"Last updated",transforms:[E.sortable,(0,E.cellWidth)(20)]},{title:"Associated systems",transforms:[(0,E.cellWidth)(20)]}],F=(0,y.useSelector)((function(e){return e.createBaselineModalState.createBaselineModalOpened})),L=(0,y.useSelector)((function(e){return e.createBaselineModalState.baselineData})),M=(0,y.useSelector)((function(e){return e.entities})),W=(0,y.useSelector)((function(e){return e.baselinesTableState.radioTable.selectedBaselineIds})),K=(0,y.useSelector)((function(e){return e.createBaselineModalState.createBaselineError})),z=(0,y.useSelector)((function(e){return e.baselinesTableState.radioTable.loading})),G=(0,y.useSelector)((function(e){return e.baselinesTableState.radioTable.emptyState})),U=(0,y.useSelector)((function(e){return e.baselinesTableState.radioTable.baselineTableData})),V=(0,y.useSelector)((function(e){return e.baselinesTableState.radioTable.totalBaselines})),X=(0,y.useSelector)((function(e){return e.globalFilterState})),Y=(0,y.useSelector)((function(e){return e.baselinesTableState.radioTable.baselineError})),$=function(){var e=(0,a.A)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(O.A.updateColumns("display_name"));case 2:r(O.A.selectSingleHSP());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,d.useEffect)((function(){return t&&(window.entityListener=(0,k._r)(t,{actionType:"SELECT_ENTITY",callback:function(){F&&$()}}),window.entityListener=(0,k._r)(t,{actionType:"SELECT_SINGLE_HSP",callback:function(){r(O.A.updateColumns("display_selected_hsp"))}})),function(){window.removeEventListener("SELECT_ENTITY",$),window.removeEventListener("SELECT_SINGLE_HSP",O.A.updateColumns)}}),[]),(0,d.useEffect)((function(){null!=L&&L.id&&!F&&(i("/baselines/".concat(L.id)),r(w.I.clearCreateBaselineData()))}),[L,F]);var q,J=function(){c(""),r(A.A.clearSelectedBaselines("RADIO")),r(O.A.selectSingleHSP()),r(w.I.toggleCreateBaselineModal())},Q=function(){var e,t={copyBaselineChecked:j,copySystemChecked:N,fromScratchChecked:m};return Object.keys(t).forEach((function(n){t[n]&&(e=n.substring(0,n.length-7).toLowerCase())})),e},Z=function(){var e=(0,a.A)(p().mark((function e(){var t;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={display_name:s},e.prev=1,""===s){e.next=27;break}if(!m){e.next=9;break}return t.baseline_facts=[],e.next=7,r(w.I.createBaseline(t));case 7:e.next=25;break;case 9:if(1!==W.length||!j){e.next=15;break}return t={display_name:s},e.next=13,r(w.I.createBaseline(t,W[0]));case 13:e.next=25;break;case 15:if(null==M||!M.selectedSystemIds.length||!N){e.next=21;break}return t.inventory_uuid=null==M?void 0:M.selectedSystemIds[0],e.next=19,r(w.I.createBaseline(t));case 19:e.next=25;break;case 21:if(null==M||!M.selectedHSP||!N){e.next=25;break}return t.hsp_uuid=M.selectedHSP.id,e.next=25,r(w.I.createBaseline(t));case 25:r(A.A.clearSelectedBaselines("RADIO")),r(w.I.toggleCreateBaselineModal());case 27:e.next=31;break;case 29:e.prev=29,e.t0=e.catch(1);case 31:case"end":return e.stop()}}),e,null,[[1,29]])})));return function(){return e.apply(this,arguments)}}(),ee=function(e,t){var n=t.currentTarget.value;r(A.A.clearSelectedBaselines("RADIO")),"fromScratchChecked"===n?(h(!0),P(!1),_(!1)):"copyBaselineChecked"===n?(h(!1),P(!0),_(!1)):(h(!1),P(!1),_(!0))};return b().createElement(x.Modal,{className:"drift create-baseline-modal","aria-label":"create-baseline-modal",width:"1200px",title:"Create baseline",isOpen:F,onClose:J,actions:""===s||j&&0===W.length||N&&(null==M||!M.selectedSystemIds.length)&&(null==M||!M.selectedHSP)?[b().createElement(x.Button,{key:"confirm",variant:"primary",isDisabled:!0,ouiaId:"create-baseline-button-".concat(Q()),"aria-label":"create-baseline-disabled"},"Create baseline"),b().createElement(x.Button,{key:"cancel",variant:"link",onClick:function(){return J()},ouiaId:"create-baseline-modal-cancel-button","aria-label":"cancel-create-baseline"},"Cancel")]:[b().createElement(x.Button,{key:"confirm",variant:"primary",onClick:function(){return Z()},ouiaId:"create-baseline-button-".concat(Q()),"aria-label":"create-baseline-confirm"},"Create baseline"),b().createElement(x.Button,{key:"cancel",variant:"link",onClick:function(){return J()},ouiaId:"create-baseline-modal-cancel-button","aria-label":"cancel-create-baseline"},"Cancel")]},N?b().createElement(T.A,{globalFilterState:X}):null,(j?q=b().createElement(b().Fragment,null,b().createElement("b",null,"Select baseline to copy from"),b().createElement(g.A,{tableId:"RADIO",onSelect:function(e,t,n){var a=[U[n][0]];r(A.A.selectBaseline(a,t,"RADIO"))},tableData:U,loading:z,columns:R,totalBaselines:V,permissions:n,hasMultiSelect:!1,selectedBaselineIds:W,leftAlignToolbar:!0,hasSwitch:!1,revertBaselineFetch:A.A.revertBaselineFetch,baselineError:Y,emptyState:G})):N&&(q=b().createElement(b().Fragment,null,b().createElement("b",null,"Select system or historical profile to copy from"),b().createElement("br",null),b().createElement(C.A,{createBaselineModal:!0,hasMultiSelect:!1,historicalProfiles:null!=M&&M.selectedHSP?[M.selectedHSP]:[],permissions:n,entities:M,selectVariant:"radio",systemColumns:function(e){var t=e.map((function(e){return"display_name"===e.key||"display_selected_hsp"===e.key?{title:"Name",key:e.key,props:{width:20},renderFunc:function(e,t,n){return n.display_selected_hsp||e}}:e}));return n.hspRead&&t.push({key:"historical_profiles",props:{width:10,isStatic:!0},title:"Historical profiles"}),t},deselectHistoricalProfiles:$}))),b().createElement(b().Fragment,null,b().createElement(b().Fragment,null,b().createElement(x.Radio,{isChecked:m,id:"create-baseline","data-testid":"from-scratch-radio",ouiaId:"create-baseline-from-scratch-radio",name:"baseline-create-options",label:"Create baseline from scratch",value:"fromScratchChecked",onChange:ee}),b().createElement(x.Radio,{isChecked:j,id:"copy-baseline",ouiaId:"create-baseline-copy-baseline-radio","data-testid":"copy-baseline-radio",name:"baseline-create-options",label:"Copy an existing baseline",value:"copyBaselineChecked",onChange:ee}),b().createElement(x.Radio,{isChecked:N,id:"copy-system",ouiaId:"create-baseline-copy-system-radio","data-testid":"copy-system-radio",name:"baseline-create-options",label:"Copy an existing system or historical profile",value:"copySystemChecked",onChange:ee})),b().createElement("div",{className:"md-padding-top md-padding-bottom"},b().createElement(x.Form,null,b().createElement(x.FormGroup,{label:"Baseline name",isRequired:!0,type:"text",helperTextInvalid:Object.prototype.hasOwnProperty.call(K,"detail")?K.detail:null,fieldId:"name",validated:Object.prototype.hasOwnProperty.call(K,"status")?"error":null,onKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),s&&Z())}},b().createElement(x.TextInput,{className:"fact-value",value:s,type:"text",onChange:function(e){return c(e)},validated:Object.prototype.hasOwnProperty.call(K,"status")?x.ValidatedOptions.error:null,"aria-label":"baseline name"})))),q)))};j.propTypes={middlewareListener:h().object,permissions:h().object};const P=j;var D=n(84804),H=n(87358),N=n(53467),_=n(97417),R=n(76803),F=n(17763),L=n(20881);function M(e,t,n){return t=(0,s.A)(t),(0,l.A)(e,W()?Reflect.construct(t,n||[],(0,s.A)(e).constructor):t.apply(e,n))}function W(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(W=function(){return!!e})()}var K=function(e){function t(e){var n;return(0,i.A)(this,t),n=M(this,t,[e]),(0,u.A)(n,"fetchBaseline",(function(e){(0,n.props.navigate)("/baselines/"+e)})),(0,u.A)(n,"onSelect",(function(e,t,r){var a=n.props,i=a.baselineTableData;(0,a.selectBaseline)(-1===r?i.map((function(e){return e[0]})):[i[r][0]],t,"CHECKBOX")})),n.state={columns:[{title:"Name",transforms:[E.sortable,(0,E.cellWidth)(45)]},{title:"Last updated",transforms:[E.sortable,(0,E.cellWidth)(30)]},{title:"Associated systems",transforms:[(0,E.cellWidth)(20)]},{title:"",transforms:[(0,E.cellWidth)(5)]}],error:{}},n}return(0,c.A)(t,e),(0,o.A)(t,[{key:"componentDidMount",value:(n=(0,a.A)(p().mark((function e(){var t;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.chrome,e.next=3,null==t?void 0:t.appAction("baseline-list");case 3:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.baselineError,r=t.notificationsSwitchError;e.baselineError!==n&&this.setState({error:n}),e.notificationsSwitchError!==r&&this.setState({error:r})}},{key:"renderTable",value:function(e){var t=this.props,n=t.baselineError,r=t.baselineTableData,a=t.clearEditBaselineData,i=t.emptyState,o=t.exportStatus,l=t.loading,s=t.notificationsSwitchError,c=t.resetBaselinesExportStatus,u=t.revertBaselineFetch,f=t.selectBaseline,p=t.selectedBaselineIds,d=t.totalBaselines,m=this.state,h=m.columns,y=m.error;return a(),b().createElement("div",null,b().createElement(g.A,{tableId:"CHECKBOX",hasMultiSelect:!0,onSelect:this.onSelect,tableData:r,loading:l,columns:h,kebab:!0,createButton:!0,exportButton:!0,exportStatus:o,onClick:this.fetchBaseline,selectBaseline:f,selectedBaselineIds:p,totalBaselines:d,permissions:e,hasSwitch:!0,notificationsSwitchError:s,emptyState:i,revertBaselineFetch:u,baselineError:n,error:y,resetBaselinesExportStatus:c}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.selectHistoricProfiles,r=t.setSelectedSystemIds;return b().createElement(R.d.Consumer,null,(function(t){return b().createElement(F.N.Consumer,null,(function(a){var i;return b().createElement(b().Fragment,null,b().createElement(P,{permissions:t.permissions,selectHistoricProfiles:n,setSelectedSystemIds:r,middlewareListener:null==a?void 0:a.middlewareListener}),b().createElement(v.PageHeader,null,b().createElement(v.PageHeaderTitle,{title:"Baselines"})),b().createElement(v.Main,{store:null==a||null===(i=a.registry)||void 0===i?void 0:i.getStore()},!1===t.permissions.baselinesRead?b().createElement(D.A,{icon:S.LockIcon,color:"#6a6e73",title:"You do not have access to Baselines",text:["Contact your organization administrator(s) for more information."]}):b().createElement(b().Fragment,null,e.renderTable(t.permissions)))," ")}))}))}}]);var n}(d.Component);K.propTypes={loading:h().bool,baselineTableData:h().array,emptyState:h().bool,exportStatus:h().string,selectBaseline:h().func,baselineError:h().object,revertBaselineFetch:h().func,clearEditBaselineData:h().func,selectedBaselineIds:h().array,totalBaselines:h().number,selectHistoricProfiles:h().func,setSelectedSystemIds:h().func,entitiesLoading:h().func,notificationsSwitchError:h().object,resetBaselinesExportStatus:h().func,chrome:h().object,navigate:h().func};const z=(0,y.connect)((function(e){return{loading:e.baselinesTableState.checkboxTable.loading,emptyState:e.baselinesTableState.checkboxTable.emptyState,exportStatus:e.baselinesTableState.checkboxTable.exportStatus,baselineTableData:e.baselinesTableState.checkboxTable.baselineTableData,baselineError:e.baselinesTableState.checkboxTable.baselineError,notificationsSwitchError:e.editBaselineState.notificationsSwitchError,selectedBaselineIds:e.baselinesTableState.checkboxTable.selectedBaselineIds,totalBaselines:e.baselinesTableState.checkboxTable.totalBaselines}}),(function(e){return{selectBaseline:function(t,n,r){return e(A.A.selectBaseline(t,n,r))},revertBaselineFetch:function(){return e(A.A.revertBaselineFetch("CHECKBOX"))},clearEditBaselineData:function(){return e(N.p.clearEditBaselineData())},selectHistoricProfiles:function(t){return e(_.V.selectHistoricProfiles(t))},setSelectedSystemIds:function(t){return e(H.D.setSelectedSystemIds(t))},resetBaselinesExportStatus:function(){return e(A.A.resetBaselinesExportStatus())}}}))((function(e){var t=(0,L.A)(),n=(0,I.A)();return b().createElement(K,(0,r.A)({},e,{chrome:t,navigate:n}))}))},54128:(e,t,n)=>{var r=n(31800),a=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(a,""):e}},31800:e=>{var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},38221:(e,t,n)=>{var r=n(23805),a=n(10124),i=n(99374),o=Math.max,l=Math.min;e.exports=function(e,t,n){var s,c,u,f,p,d,b=0,m=!1,h=!1,y=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function v(t){var n=s,r=c;return s=c=void 0,b=t,f=e.apply(r,n)}function S(e){var n=e-d;return void 0===d||n>=t||n<0||h&&e-b>=u}function E(){var e=a();if(S(e))return g(e);p=setTimeout(E,function(e){var n=t-(e-d);return h?l(n,u-(e-b)):n}(e))}function g(e){return p=void 0,y&&s?v(e):(s=c=void 0,f)}function B(){var e=a(),n=S(e);if(s=arguments,c=this,d=e,n){if(void 0===p)return function(e){return b=e,p=setTimeout(E,t),m?v(e):f}(d);if(h)return clearTimeout(p),p=setTimeout(E,t),v(d)}return void 0===p&&(p=setTimeout(E,t)),f}return t=i(t)||0,r(n)&&(m=!!n.leading,u=(h="maxWait"in n)?o(i(n.maxWait)||0,t):u,y="trailing"in n?!!n.trailing:y),B.cancel=function(){void 0!==p&&clearTimeout(p),b=0,s=d=c=p=void 0},B.flush=function(){return void 0===p?f:g(a())},B}},62193:(e,t,n)=>{var r=n(88984),a=n(5861),i=n(72428),o=n(56449),l=n(64894),s=n(3656),c=n(55527),u=n(37167),f=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(l(e)&&(o(e)||"string"==typeof e||"function"==typeof e.splice||s(e)||u(e)||i(e)))return!e.length;var t=a(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(c(e))return!r(e).length;for(var n in e)if(f.call(e,n))return!1;return!0}},10124:(e,t,n)=>{var r=n(9325);e.exports=function(){return r.Date.now()}},99374:(e,t,n)=>{var r=n(54128),a=n(23805),i=n(44394),o=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,s=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return NaN;if(a(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=a(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=l.test(e);return n||s.test(e)?c(e.slice(2),n?2:8):o.test(e)?NaN:+e}}}]);
//# sourceMappingURL=../sourcemaps/253.8453d1887d2ca58340102c210c41a646.js.map