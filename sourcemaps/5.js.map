{"version":3,"sources":["webpack:///./src/SmartComponents/BaselinesPage/CreateBaselineModal/CreateBaselineModal.js","webpack:///./src/SmartComponents/BaselinesPage/BaselinesPage.js"],"names":["CreateBaselineModal","props","cancelModal","toggleCreateBaselineModal","clearSelectedBaselines","updateBaselineName","checkKeyPress","event","key","preventDefault","state","baselineName","submitBaselineName","renderModalBody","modalBody","copyBaselineChecked","copySystemChecked","error","renderCopyBaseline","renderCopySystem","Fragment","renderRadioButtons","Form","FormGroup","type","helperTextInvalid","hasOwnProperty","detail","fieldId","isValid","onKeyPress","TextInput","className","placeHolder","value","onChange","aria-label","bind","fromScratchChecked","setState","handleChecked","_","currentTarget","this","createBaseline","selectedBaselineIds","history","entities","newBaselineObject","display_name","baseline_facts","length","selectedSystemIds","inventory_uuid","push","baselineData","id","Radio","isChecked","name","label","BaselinesTable","hasSelect","SystemsTable","createBaselineModal","undefined","Button","variant","isDisabled","onClick","createBaselineModalOpened","Modal","title","isOpen","onClose","width","isFooterLeftAligned","actions","renderActions","Component","propTypes","PropTypes","bool","func","object","array","withRouter","connect","createBaselineModalState","baselinesTableState","dispatch","createBaselineModalActions","uuid","baselinesTableActions","BaselinesPage","window","insights","chrome","auth","getUser","EmptyState","EmptyStateIcon","icon","AddCircleOIcon","Title","size","EmptyStateBody","CreateBaselineButton","CardBody","kebab","createButton","exportButton","emptyState","baselineListLoading","Card","renderEmptyState","renderTable","fullBaselineListData"],"mappings":"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","file":"js/5-ed5bc0decd2e476c5bc7.js","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport { Button, Modal, Radio, TextInput, Form, FormGroup } from '@patternfly/react-core';\n\nimport SystemsTable from '../../SystemsTable/SystemsTable';\nimport BaselinesTable from '../../BaselinesTable/BaselinesTable';\nimport { createBaselineModalActions } from './redux';\nimport { baselinesTableActions } from '../../BaselinesTable/redux';\n\nclass CreateBaselineModal extends Component {\n    constructor(props) {\n        super(props);\n\n        this.submitBaselineName = this.submitBaselineName.bind(this);\n\n        this.state = {\n            baselineName: '',\n            fromScratchChecked: true,\n            copyBaselineChecked: false,\n            copySystemChecked: false\n        };\n\n        this.updateBaselineName = value => {\n            this.setState({ baselineName: value });\n        };\n\n        this.handleChecked = (_, event) => {\n            const { value } = event.currentTarget;\n            this.props.clearSelectedBaselines();\n\n            if (value === 'fromScratchChecked') {\n                this.setState({ fromScratchChecked: true, copyBaselineChecked: false, copySystemChecked: false });\n            } else if (value === 'copyBaselineChecked') {\n                this.setState({ fromScratchChecked: false, copyBaselineChecked: true, copySystemChecked: false });\n            } else {\n                this.setState({ fromScratchChecked: false, copyBaselineChecked: false, copySystemChecked: true });\n            }\n        };\n    }\n\n    async submitBaselineName() {\n        const { baselineName, fromScratchChecked, copyBaselineChecked, copySystemChecked } = this.state;\n        const { createBaseline, toggleCreateBaselineModal, selectedBaselineIds, history, entities, clearSelectedBaselines } = this.props;\n        /*eslint-disable camelcase*/\n        let newBaselineObject = { display_name: baselineName };\n\n        try {\n            if (baselineName !== '') {\n                if (fromScratchChecked) {\n                    newBaselineObject.baseline_facts = [];\n                    await createBaseline(newBaselineObject);\n                } else if (selectedBaselineIds.length === 1 && copyBaselineChecked) {\n                    newBaselineObject = { display_name: baselineName };\n                    await createBaseline(newBaselineObject, selectedBaselineIds[0]);\n                } else if (entities.selectedSystemIds.length === 1 && copySystemChecked) {\n                    newBaselineObject.inventory_uuid = entities.selectedSystemIds[0];\n                    await createBaseline(newBaselineObject);\n                }\n\n                history.push('baselines/' + this.props.baselineData.id);\n                toggleCreateBaselineModal();\n                clearSelectedBaselines();\n            }\n        } catch (e) {\n            // do nothing and let redux handle\n        }\n        /*eslint-enable camelcase*/\n    }\n\n    cancelModal = () => {\n        const { toggleCreateBaselineModal, clearSelectedBaselines } = this.props;\n\n        this.updateBaselineName('');\n        clearSelectedBaselines();\n        toggleCreateBaselineModal();\n    }\n\n    renderRadioButtons() {\n        const { fromScratchChecked, copyBaselineChecked, copySystemChecked } = this.state;\n\n        return (<React.Fragment>\n            <Radio\n                isChecked={ fromScratchChecked }\n                id='create baseline'\n                name='baseline-create-options'\n                label='Create baseline from scratch'\n                value='fromScratchChecked'\n                onChange={ this.handleChecked }\n            />\n            <Radio\n                isChecked={ copyBaselineChecked }\n                id='copy baseline'\n                name='baseline-create-options'\n                label='Copy an existing baseline'\n                value='copyBaselineChecked'\n                onChange={ this.handleChecked }\n            />\n            <Radio\n                isChecked={ copySystemChecked }\n                id='copy system'\n                name='baseline-create-options'\n                label='Copy an existing system'\n                value='copySystemChecked'\n                onChange={ this.handleChecked }\n            />\n        </React.Fragment>\n        );\n    }\n\n    renderCopyBaseline() {\n        return (<React.Fragment>\n            <b>Select baseline to copy from</b>\n            <BaselinesTable hasSelect={ true } />\n        </React.Fragment>\n        );\n    }\n\n    renderCopySystem() {\n        return (<React.Fragment>\n            <b>Select system to copy from</b>\n            <SystemsTable selectedSystemIds={ [] } createBaselineModal={ true } />\n        </React.Fragment>\n        );\n    }\n\n    checkKeyPress = (event) => {\n        if (event.key === 'Enter') {\n            event.preventDefault();\n            this.state.baselineName ? this.submitBaselineName() : null;\n        }\n    }\n\n    renderModalBody = () => {\n        const { baselineName, copyBaselineChecked, copySystemChecked } = this.state;\n        const { error } = this.props;\n        let modalBody;\n\n        if (copyBaselineChecked) {\n            modalBody = this.renderCopyBaseline();\n        } else if (copySystemChecked) {\n            modalBody = this.renderCopySystem();\n        }\n\n        return (<React.Fragment>\n            { this.renderRadioButtons() }\n            <br></br>\n            <b>Baseline name</b>\n            <br></br>\n            <Form>\n                <FormGroup\n                    type=\"text\"\n                    helperTextInvalid={ error.hasOwnProperty('detail') ? error.detail : null }\n                    fieldId=\"name\"\n                    isValid={ !error.hasOwnProperty('status') }\n                    onKeyPress={ this.checkKeyPress }\n                >\n                    <TextInput\n                        className=\"fact-value\"\n                        placeHolder=\"Baseline name\"\n                        value={ baselineName }\n                        type=\"text\"\n                        onChange={ this.updateBaselineName }\n                        isValid={ !error.hasOwnProperty('status') }\n                        aria-label=\"baseline name\"\n                    />\n                </FormGroup>\n            </Form>\n            <br></br>\n            <br></br>\n            { modalBody }\n        </React.Fragment>\n        );\n    }\n\n    renderActions() {\n        const { selectedBaselineIds, entities } = this.props;\n        const { baselineName, copyBaselineChecked, copySystemChecked } = this.state;\n        let actions;\n\n        if (baselineName === ''\n            || (copyBaselineChecked && selectedBaselineIds.length === 0)\n            || (copySystemChecked && entities && entities.selectedSystemIds !== undefined && entities.selectedSystemIds.length === 0)\n        ) {\n            actions = [\n                <Button\n                    key=\"confirm\"\n                    variant=\"primary\"\n                    isDisabled>\n                    Create baseline\n                </Button>,\n                <Button\n                    key=\"cancel\"\n                    variant=\"secondary\"\n                    onClick={ this.cancelModal }>\n                    Cancel\n                </Button>\n            ];\n        } else {\n            actions = [\n                <Button\n                    key=\"confirm\"\n                    variant=\"primary\"\n                    onClick={ this.submitBaselineName }>\n                    Create baseline\n                </Button>,\n                <Button\n                    key=\"cancel\"\n                    variant=\"secondary\"\n                    onClick={ this.cancelModal }>\n                    Cancel\n                </Button>\n            ];\n        }\n\n        return actions;\n    }\n\n    render() {\n        const { createBaselineModalOpened } = this.props;\n\n        return (\n            <Modal\n                className=\"create-baseline-modal\"\n                title=\"Create baseline\"\n                isOpen={ createBaselineModalOpened }\n                onClose={ this.cancelModal }\n                width=\"auto\"\n                isFooterLeftAligned\n                actions={ this.renderActions() }\n            >\n                { this.renderModalBody() }\n            </Modal>\n        );\n    }\n}\n\nCreateBaselineModal.propTypes = {\n    createBaselineModalOpened: PropTypes.bool,\n    createBaseline: PropTypes.func,\n    history: PropTypes.object,\n    baselineData: PropTypes.object,\n    toggleCreateBaselineModal: PropTypes.func,\n    clearSelectedBaselines: PropTypes.func,\n    entities: PropTypes.object,\n    selectedBaselineIds: PropTypes.array,\n    error: PropTypes.object\n};\n\nfunction mapStateToProps(state) {\n    return {\n        createBaselineModalOpened: state.createBaselineModalState.createBaselineModalOpened,\n        baselineData: state.createBaselineModalState.baselineData,\n        entities: state.entities,\n        selectedBaselineIds: state.baselinesTableState.selectedBaselineIds,\n        error: state.createBaselineModalState.error\n    };\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        toggleCreateBaselineModal: () => dispatch(createBaselineModalActions.toggleCreateBaselineModal()),\n        createBaseline: (newBaselineObject, uuid) => dispatch(createBaselineModalActions.createBaseline(newBaselineObject, uuid)),\n        clearSelectedBaselines: () => dispatch(baselinesTableActions.clearSelectedBaselines())\n    };\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(CreateBaselineModal));\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\n\nimport { Main, PageHeader, PageHeaderTitle } from '@redhat-cloud-services/frontend-components';\nimport { Card, CardBody } from '@patternfly/react-core';\nimport { AddCircleOIcon } from '@patternfly/react-icons';\nimport { EmptyState, EmptyStateBody, EmptyStateIcon, Title } from '@patternfly/react-core';\n\nimport BaselinesTable from '../BaselinesTable/BaselinesTable';\nimport CreateBaselineButton from './CreateBaselineButton/CreateBaselineButton';\nimport CreateBaselineModal from './CreateBaselineModal/CreateBaselineModal';\n\nexport class BaselinesPage extends Component {\n    constructor(props) {\n        super(props);\n    }\n\n    async componentDidMount() {\n        await window.insights.chrome.auth.getUser();\n    }\n\n    renderEmptyState() {\n        return (\n            <center>\n                <EmptyState>\n                    <EmptyStateIcon icon={ AddCircleOIcon } />\n                    <br></br>\n                    <Title size=\"lg\">No baselines</Title>\n                    <EmptyStateBody>\n                        You currently have no baselines displayed.\n                        <br/>\n                        Create a baseline to use in your System Comparison analysis.\n                    </EmptyStateBody>\n                    <CreateBaselineButton />\n                </EmptyState>\n            </center>\n        );\n    }\n\n    renderTable() {\n        return (\n            <CardBody>\n                <div>\n                    <BaselinesTable kebab={ true } createButton={ true } exportButton={ true } hasSelect={ true }/>\n                </div>\n            </CardBody>\n        );\n    }\n\n    render() {\n        const { emptyState, baselineListLoading } = this.props;\n\n        /*eslint-disable camelcase*/\n        return (\n            <React.Fragment>\n                <CreateBaselineModal />\n                <PageHeader>\n                    <PageHeaderTitle title='Baselines'/>\n                </PageHeader>\n                <Main>\n                    <Card className='pf-t-light pf-m-opaque-100'>\n                        { (emptyState && baselineListLoading === false)\n                            ? this.renderEmptyState() : this.renderTable()\n                        }\n                    </Card>\n                </Main>\n            </React.Fragment>\n        );\n        /*eslint-enable camelcase*/\n    }\n}\n\nBaselinesPage.propTypes = {\n    baselineListLoading: PropTypes.bool,\n    fullBaselineListData: PropTypes.array,\n    emptyState: PropTypes.bool\n};\n\nfunction mapStateToProps(state) {\n    return {\n        baselineListLoading: state.baselinesTableState.baselineListLoading,\n        fullBaselineListData: state.baselinesTableState.fullBaselineListData,\n        emptyState: state.baselinesTableState.emptyState\n    };\n}\n\nexport default connect(mapStateToProps, null)(BaselinesPage);\n"],"sourceRoot":""}