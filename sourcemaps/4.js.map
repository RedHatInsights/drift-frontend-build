{"version":3,"sources":["webpack:///./node_modules/jiff/lib/jsonPointer.js","webpack:///./node_modules/jiff/lib/InvalidPatchOperationError.js","webpack:///./node_modules/jiff/lib/array.js","webpack:///./node_modules/jiff/lib/patches.js","webpack:///./node_modules/jiff/lib/clone.js","webpack:///./node_modules/jiff/lib/TestFailedError.js","webpack:///./node_modules/jiff/lib/PatchNotInvertibleError.js","webpack:///./node_modules/jiff/jiff.js","webpack:///./node_modules/jiff/lib/lcs.js","webpack:///./node_modules/jiff/lib/jsonPatch.js","webpack:///./node_modules/jiff/lib/jsonPointerParse.js","webpack:///./node_modules/jiff/lib/deepEquals.js","webpack:///./node_modules/jiff/lib/commutePaths.js","webpack:///./node_modules/jiff/lib/inverse.js","webpack:///./src/SmartComponents/BaselinesPage/redux/actions.js","webpack:///./src/SmartComponents/BaselinesPage/CreateBaselineButton/CreateBaselineButton.js","webpack:///./src/SmartComponents/BaselinesPage/CreateBaseline/CreateBaseline.js","webpack:///./src/SmartComponents/BaselinesPage/BaselinesKebab/redux/actions.js","webpack:///./src/SmartComponents/BaselinesPage/BaselinesKebab/BaselinesKebab.js","webpack:///./src/SmartComponents/BaselinesPage/EditBaseline/FactModal/redux/actions.js","webpack:///./src/SmartComponents/BaselinesPage/EditBaseline/EditBaselineToolbar/EditBaselineToolbar.js","webpack:///./src/SmartComponents/BaselinesPage/EditBaseline/FactKebab/FactKebab.js","webpack:///./src/SmartComponents/BaselinesPage/EditBaseline/helpers.js","webpack:///./src/SmartComponents/BaselinesPage/EditBaseline/FactModal/FactModal.js","webpack:///./src/SmartComponents/BaselinesPage/EditBaseline/EditBaseline.js","webpack:///./src/SmartComponents/BaselinesPage/BaselinesPage.js"],"names":["_parse","exports","find","x","path","findContext","context","target","key","separator","parent","hasContext","segment","Array","isArray","start","array","index","Error","findIndex","parseArrayIndex","join","segments","absolute","parse","push","bind","contains","a","b","indexOf","length","encodeSegment","s","replace","escapeRx","encodedEscape","separatorRx","encodedSeparator","decodeSegment","encodedSeparatorRx","encodedEscapeRx","escapeChar","isValidArrayIndex","arrayIndexRx","test","SyntaxError","InvalidPatchOperationError","message","call","this","name","constructor","captureStackTrace","module","prototype","Object","create","cons","l","i","tail","map","f","jsonPointer","clone","deepEquals","commutePaths","TestFailedError","PatchNotInvertibleError","_add","pointer","value","splice","isValidObject","commuteAddOrCopy","add","op","TypeError","_remove","removed","notFound","missingValue","apply","options","JSON","stringify","inverse","pr","commute","change","val","before","after","remove","c","patch","prev","move","from","pto","pfrom","fromContext","copy","_","y","cloneArray","k","keys","cloneObject","lcs","diff","appendChanges","hash","orElse","isFunction","defaultHash","makeContext","defaultContext","invertible","initState","patchInPlace","applyInPlace","state","a1","a2","a1hash","a2hash","lcsMatrix","compare","offset","reduce","j","last","p","REMOVE","ADD","lcsToJsonPatch","appendArrayChanges","o1","o2","keyPath","appendObjectChanges","appendValueChanges","predicate","RIGHT","DOWN","SKIP","backtrack","matrix","type","cols","rows","prefix","Math","min","findPrefix","suffix","al","bl","findSuffix","lastrow","m","createMatrix","r","EQUAL","patches","changes","toString","defaultOptions","onSegment","pos","accum","matches","match","charAt","parseRx","lastIndex","exec","slice","compareArrays","akeys","bkeys","compareObjects","commuteArrayAncestor","lpath","rpath","direction","lindex","rindex","rc","max","copyPatch","left","right","p1","p2","p1l","p2l","getCommonPathPrefix","isArrayPath","ac","bc","commuted","commuteArraySiblings","commuteArrayPaths","commuteTreePaths","invertOp","skip","toggleCreateBaseline","types","CREATE_NEW_BASELINE","CreateBaselineButton","props","createBaseline","history","addSystemModalOpened","toggleAddSystemModal","location","pathname","Button","variant","onClick","Component","propTypes","PropTypes","func","object","bool","withRouter","connect","addSystemModalState","dispatch","baselinesPageActions","addSystemModalActions","CreateBaseline","submitBaselineName","baselineName","updateBaselineName","setState","display_name","baseline_facts","Fragment","EmptyState","EmptyStateVariant","full","EmptyStateIcon","icon","CubesIcon","Title","headingLevel","size","EmptyStateBody","InputGroup","TextInput","onChange","aria-label","newBaselineObject","baselinesTableActions","exportToCSV","exportType","baselineData","data","exportData","baselineRowData","EXPORT_BASELINES_LIST_TO_CSV","payload","BaselinesKebab","kebabOpened","exportSelect","toggleKebab","baselineTableData","dropdownItems","DropdownItem","component","Dropdown","style","float","className","toggle","KebabToggle","onToggle","isOpen","isPlain","string","baselinesTableState","baselinesKebabActions","toggleFactModal","TOGGLE_FACT_MODAL","setFactData","factData","SET_FACT_DATA","EditBaselineToolbar","handleAddFact","factName","factValue","fact","Toolbar","ToolbarGroup","ToolbarItem","factModalActions","FactKebab","editFact","deleteFact","addFact","newAPIBody","patchBaseline","factToDelete","values","deletedSubFact","editBaselineHelpers","buildDeletedSubFact","makeDeleteFactPatch","id","position","DropdownPosition","onKebabToggle","obj","baselineId","makeAPIPatch","originalAPIBody","originalParentFact","patchBody","forEach","makePatchBody","jiff","renderKebab","buildNewFactData","isParent","newFactData","subFacts","subFact","buildEditedFactData","originalFactName","originalValueName","originalSubFact","newSubFact","newSubFacts","makeAddFactPatch","oldFactData","undefined","facts_patch","parentFactData","FactModal","cancelFact","confirmModal","renderCategoryCheckbox","renderFactInput","renderValueInput","renderModalBody","patchFact","categoryCheck","handleChange","checked","handleNewName","handleNewValue","editedFactData","patchData","Checkbox","label","defaultChecked","isDisabled","isChecked","placeholder","isValid","valueInput","factModalOpened","Modal","title","onClose","width","actions","factModalState","newBaselineBody","EditBaseline","rowData","SkeletonSize","md","expandedRows","includes","expandRow","row","renderExpandableRowButton","facts","renderRowData","baselineDataLoading","renderHeaderRow","renderLoadingRows","renderRows","renderTable","finishBaselineEdit","clearBaselineData","baselineUUID","fetchBaselineData","editBaselineTableData","BaselinesPage","handleSearch","debounce","search","fetchBaselines","window","insights","chrome","auth","getUser","buttonTitle","onFilterChange","AddCircleOIcon","baselineListLoading","CardBody","renderToolbar","BaselinesTable","creatingNewBaseline","fullBaselineListData","Card","renderEmptyState","baselinesPageState"],"mappings":"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","file":"js/4-3754393dc877713903a8.js","sourcesContent":["/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\nvar _parse = require('./jsonPointerParse');\n\nexports.find = find;\nexports.join = join;\nexports.absolute = absolute;\nexports.parse = parse;\nexports.contains = contains;\nexports.encodeSegment = encodeSegment;\nexports.decodeSegment = decodeSegment;\nexports.parseArrayIndex = parseArrayIndex;\nexports.isValidArrayIndex = isValidArrayIndex;\n\n// http://tools.ietf.org/html/rfc6901#page-2\nvar separator = '/';\nvar separatorRx = /\\//g;\nvar encodedSeparator = '~1';\nvar encodedSeparatorRx = /~1/g;\n\nvar escapeChar = '~';\nvar escapeRx = /~/g;\nvar encodedEscape = '~0';\nvar encodedEscapeRx = /~0/g;\n\n/**\n * Find the parent of the specified path in x and return a descriptor\n * containing the parent and a key.  If the parent does not exist in x,\n * return undefined, instead.\n * @param {object|array} x object or array in which to search\n * @param {string} path JSON Pointer string (encoded)\n * @param {?function(index:Number, array:Array, context:object):Number} findContext\n *  optional function used adjust array indexes for smarty/fuzzy patching, for\n *  patches containing context.  If provided, context MUST also be provided.\n * @param {?{before:Array, after:Array}} context optional patch context for\n *  findContext to use to adjust array indices.  If provided, findContext MUST\n *  also be provided.\n * @returns {{target:object|array|number|string, key:string}|undefined}\n */\nfunction find(x, path, findContext, context) {\n\tif(typeof path !== 'string') {\n\t\treturn;\n\t}\n\n\tif(path === '') {\n\t\t// whole document\n\t\treturn { target: x, key: void 0 };\n\t}\n\n\tif(path === separator) {\n\t\treturn { target: x, key: '' };\n\t}\n\n\tvar parent = x, key;\n\tvar hasContext = context !== void 0;\n\n\t_parse(path, function(segment) {\n\t\t// hm... this seems like it should be if(typeof x === 'undefined')\n\t\tif(x == null) {\n\t\t\t// Signal that we prematurely hit the end of the path hierarchy.\n\t\t\tparent = null;\n\t\t\treturn false;\n\t\t}\n\n\t\tif(Array.isArray(x)) {\n\t\t\tkey = hasContext\n\t\t\t\t? findIndex(findContext, parseArrayIndex(segment), x, context)\n\t\t\t\t: segment === '-' ? segment : parseArrayIndex(segment);\n\t\t} else {\n\t\t\tkey = segment;\n\t\t}\n\n\t\tparent = x;\n\t\tx = x[key];\n\t});\n\n\treturn parent === null\n\t\t? void 0\n\t\t: { target: parent, key: key };\n}\n\nfunction absolute(path) {\n\treturn path[0] === separator ? path : separator + path;\n}\n\nfunction join(segments) {\n\treturn segments.join(separator);\n}\n\nfunction parse(path) {\n\tvar segments = [];\n\t_parse(path, segments.push.bind(segments));\n\treturn segments;\n}\n\nfunction contains(a, b) {\n\treturn b.indexOf(a) === 0 && b[a.length] === separator;\n}\n\n/**\n * Decode a JSON Pointer path segment\n * @see http://tools.ietf.org/html/rfc6901#page-3\n * @param {string} s encoded segment\n * @returns {string} decoded segment\n */\nfunction decodeSegment(s) {\n\t// See: http://tools.ietf.org/html/rfc6901#page-3\n\treturn s.replace(encodedSeparatorRx, separator).replace(encodedEscapeRx, escapeChar);\n}\n\n/**\n * Encode a JSON Pointer path segment\n * @see http://tools.ietf.org/html/rfc6901#page-3\n * @param {string} s decoded segment\n * @returns {string} encoded segment\n */\nfunction encodeSegment(s) {\n\treturn s.replace(escapeRx, encodedEscape).replace(separatorRx, encodedSeparator);\n}\n\nvar arrayIndexRx = /^(0|[1-9]\\d*)$/;\n\n/**\n * Return true if s is a valid JSON Pointer array index\n * @param {String} s\n * @returns {boolean}\n */\nfunction isValidArrayIndex(s) {\n\treturn arrayIndexRx.test(s);\n}\n\n/**\n * Safely parse a string into a number >= 0. Does not check for decimal numbers\n * @param {string} s numeric string\n * @returns {number} number >= 0\n */\nfunction parseArrayIndex (s) {\n\tif(isValidArrayIndex(s)) {\n\t\treturn +s;\n\t}\n\n\tthrow new SyntaxError('invalid array index ' + s);\n}\n\nfunction findIndex (findContext, start, array, context) {\n\tvar index = start;\n\n\tif(index < 0) {\n\t\tthrow new Error('array index out of bounds ' + index);\n\t}\n\n\tif(context !== void 0 && typeof findContext === 'function') {\n\t\tindex = findContext(start, array, context);\n\t\tif(index < 0) {\n\t\t\tthrow new Error('could not find patch context ' + context);\n\t\t}\n\t}\n\n\treturn index;\n}","module.exports = InvalidPatchOperationError;\n\nfunction InvalidPatchOperationError(message) {\n\tError.call(this);\n\tthis.name = this.constructor.name;\n\tthis.message = message;\n\tif(typeof Error.captureStackTrace === 'function') {\n\t\tError.captureStackTrace(this, this.constructor);\n\t}\n}\n\nInvalidPatchOperationError.prototype = Object.create(Error.prototype);\nInvalidPatchOperationError.prototype.constructor = InvalidPatchOperationError;","/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\nexports.cons = cons;\nexports.tail = tail;\nexports.map = map;\n\n/**\n * Prepend x to a, without mutating a. Faster than a.unshift(x)\n * @param {*} x\n * @param {Array} a array-like\n * @returns {Array} new Array with x prepended\n */\nfunction cons(x, a) {\n\tvar l = a.length;\n\tvar b = new Array(l+1);\n\tb[0] = x;\n\tfor(var i=0; i<l; ++i) {\n\t\tb[i+1] = a[i];\n\t}\n\n\treturn b;\n}\n\n/**\n * Create a new Array containing all elements in a, except the first.\n *  Faster than a.slice(1)\n * @param {Array} a array-like\n * @returns {Array} new Array, the equivalent of a.slice(1)\n */\nfunction tail(a) {\n\tvar l = a.length-1;\n\tvar b = new Array(l);\n\tfor(var i=0; i<l; ++i) {\n\t\tb[i] = a[i+1];\n\t}\n\n\treturn b;\n}\n\n/**\n * Map any array-like. Faster than Array.prototype.map\n * @param {function} f\n * @param {Array} a array-like\n * @returns {Array} new Array mapped by f\n */\nfunction map(f, a) {\n\tvar b = new Array(a.length);\n\tfor(var i=0; i< a.length; ++i) {\n\t\tb[i] = f(a[i]);\n\t}\n\treturn b;\n}","var jsonPointer = require('./jsonPointer');\nvar clone = require('./clone');\nvar deepEquals = require('./deepEquals');\nvar commutePaths = require('./commutePaths');\n\nvar array = require('./array');\n\nvar TestFailedError = require('./TestFailedError');\nvar InvalidPatchOperationError = require('./InvalidPatchOperationError');\nvar PatchNotInvertibleError = require('./PatchNotInvertibleError');\n\nvar find = jsonPointer.find;\nvar parseArrayIndex = jsonPointer.parseArrayIndex;\n\nexports.test = {\n\tapply: applyTest,\n\tinverse: invertTest,\n\tcommute: commuteTest\n};\n\nexports.add = {\n\tapply: applyAdd,\n\tinverse: invertAdd,\n\tcommute: commuteAddOrCopy\n};\n\nexports.remove = {\n\tapply: applyRemove,\n\tinverse: invertRemove,\n\tcommute: commuteRemove\n};\n\nexports.replace = {\n\tapply: applyReplace,\n\tinverse: invertReplace,\n\tcommute: commuteReplace\n};\n\nexports.move = {\n\tapply: applyMove,\n\tinverse: invertMove,\n\tcommute: commuteMove\n};\n\nexports.copy = {\n\tapply: applyCopy,\n\tinverse: notInvertible,\n\tcommute: commuteAddOrCopy\n};\n\n/**\n * Apply a test operation to x\n * @param {object|array} x\n * @param {object} test test operation\n * @throws {TestFailedError} if the test operation fails\n */\n\nfunction applyTest(x, test, options) {\n\tvar pointer = find(x, test.path, options.findContext, test.context);\n\tvar target = pointer.target;\n\tvar index, value;\n\n\tif(Array.isArray(target)) {\n\t\tindex = parseArrayIndex(pointer.key);\n\t\t//index = findIndex(options.findContext, index, target, test.context);\n\t\tvalue = target[index];\n\t} else {\n\t\tvalue = pointer.key === void 0 ? pointer.target : pointer.target[pointer.key];\n\t}\n\n\tif(!deepEquals(value, test.value)) {\n\t\tthrow new TestFailedError('test failed ' + JSON.stringify(test));\n\t}\n\n\treturn x;\n}\n\n/**\n * Invert the provided test and add it to the inverted patch sequence\n * @param pr\n * @param test\n * @returns {number}\n */\nfunction invertTest(pr, test) {\n\tpr.push(test);\n\treturn 1;\n}\n\nfunction commuteTest(test, b) {\n\tif(test.path === b.path && b.op === 'remove') {\n\t\tthrow new TypeError('Can\\'t commute test,remove -> remove,test for same path');\n\t}\n\n\tif(b.op === 'test' || b.op === 'replace') {\n\t\treturn [b, test];\n\t}\n\n\treturn commutePaths(test, b);\n}\n\n/**\n * Apply an add operation to x\n * @param {object|array} x\n * @param {object} change add operation\n */\nfunction applyAdd(x, change, options) {\n\tvar pointer = find(x, change.path, options.findContext, change.context);\n\n\tif(notFound(pointer)) {\n\t\tthrow new InvalidPatchOperationError('path does not exist ' + change.path);\n\t}\n\n\tif(change.value === void 0) {\n\t\tthrow new InvalidPatchOperationError('missing value');\n\t}\n\n\tvar val = clone(change.value);\n\n\t// If pointer refers to whole document, replace whole document\n\tif(pointer.key === void 0) {\n\t\treturn val;\n\t}\n\n\t_add(pointer, val);\n\treturn x;\n}\n\nfunction _add(pointer, value) {\n\tvar target = pointer.target;\n\n\tif(Array.isArray(target)) {\n\t\t// '-' indicates 'append' to array\n\t\tif(pointer.key === '-') {\n\t\t\ttarget.push(value);\n\t\t} else if (pointer.key > target.length) {\n\t\t\tthrow new InvalidPatchOperationError('target of add outside of array bounds')\n\t\t} else {\n\t\t\ttarget.splice(pointer.key, 0, value);\n\t\t}\n\t} else if(isValidObject(target)) {\n\t\ttarget[pointer.key] = value;\n\t} else {\n\t\tthrow new InvalidPatchOperationError('target of add must be an object or array ' + pointer.key);\n\t}\n}\n\nfunction invertAdd(pr, add) {\n\tvar context = add.context;\n\tif(context !== void 0) {\n\t\tcontext = {\n\t\t\tbefore: context.before,\n\t\t\tafter: array.cons(add.value, context.after)\n\t\t}\n\t}\n\tpr.push({ op: 'test', path: add.path, value: add.value, context: context });\n\tpr.push({ op: 'remove', path: add.path, context: context });\n\treturn 1;\n}\n\nfunction commuteAddOrCopy(add, b) {\n\tif(add.path === b.path && b.op === 'remove') {\n\t\tthrow new TypeError('Can\\'t commute add,remove -> remove,add for same path');\n\t}\n\n\treturn commutePaths(add, b);\n}\n\n/**\n * Apply a replace operation to x\n * @param {object|array} x\n * @param {object} change replace operation\n */\nfunction applyReplace(x, change, options) {\n\tvar pointer = find(x, change.path, options.findContext, change.context);\n\n\tif(notFound(pointer) || missingValue(pointer)) {\n\t\tthrow new InvalidPatchOperationError('path does not exist ' + change.path);\n\t}\n\n\tif(change.value === void 0) {\n\t\tthrow new InvalidPatchOperationError('missing value');\n\t}\n\n\tvar value = clone(change.value);\n\n\t// If pointer refers to whole document, replace whole document\n\tif(pointer.key === void 0) {\n\t\treturn value;\n\t}\n\n\tvar target = pointer.target;\n\n\tif(Array.isArray(target)) {\n\t\ttarget[parseArrayIndex(pointer.key)] = value;\n\t} else {\n\t\ttarget[pointer.key] = value;\n\t}\n\n\treturn x;\n}\n\nfunction invertReplace(pr, c, i, patch) {\n\tvar prev = patch[i-1];\n\tif(prev === void 0 || prev.op !== 'test' || prev.path !== c.path) {\n\t\tthrow new PatchNotInvertibleError('cannot invert replace w/o test');\n\t}\n\n\tvar context = prev.context;\n\tif(context !== void 0) {\n\t\tcontext = {\n\t\t\tbefore: context.before,\n\t\t\tafter: array.cons(prev.value, array.tail(context.after))\n\t\t}\n\t}\n\n\tpr.push({ op: 'test', path: prev.path, value: c.value });\n\tpr.push({ op: 'replace', path: prev.path, value: prev.value });\n\treturn 2;\n}\n\nfunction commuteReplace(replace, b) {\n\tif(replace.path === b.path && b.op === 'remove') {\n\t\tthrow new TypeError('Can\\'t commute replace,remove -> remove,replace for same path');\n\t}\n\n\tif(b.op === 'test' || b.op === 'replace') {\n\t\treturn [b, replace];\n\t}\n\n\treturn commutePaths(replace, b);\n}\n\n/**\n * Apply a remove operation to x\n * @param {object|array} x\n * @param {object} change remove operation\n */\nfunction applyRemove(x, change, options) {\n\tvar pointer = find(x, change.path, options.findContext, change.context);\n\n\t// key must exist for remove\n\tif(notFound(pointer) || pointer.target[pointer.key] === void 0) {\n\t\tthrow new InvalidPatchOperationError('path does not exist ' + change.path);\n\t}\n\n\t_remove(pointer);\n\treturn x;\n}\n\nfunction _remove (pointer) {\n\tvar target = pointer.target;\n\n\tvar removed;\n\tif (Array.isArray(target)) {\n\t\tremoved = target.splice(parseArrayIndex(pointer.key), 1);\n\t\treturn removed[0];\n\n\t} else if (isValidObject(target)) {\n\t\tremoved = target[pointer.key];\n\t\tdelete target[pointer.key];\n\t\treturn removed;\n\n\t} else {\n\t\tthrow new InvalidPatchOperationError('target of remove must be an object or array');\n\t}\n}\n\nfunction invertRemove(pr, c, i, patch) {\n\tvar prev = patch[i-1];\n\tif(prev === void 0 || prev.op !== 'test' || prev.path !== c.path) {\n\t\tthrow new PatchNotInvertibleError('cannot invert remove w/o test');\n\t}\n\n\tvar context = prev.context;\n\tif(context !== void 0) {\n\t\tcontext = {\n\t\t\tbefore: context.before,\n\t\t\tafter: array.tail(context.after)\n\t\t}\n\t}\n\n\tpr.push({ op: 'add', path: prev.path, value: prev.value, context: context });\n\treturn 2;\n}\n\nfunction commuteRemove(remove, b) {\n\tif(remove.path === b.path && b.op === 'remove') {\n\t\treturn [b, remove];\n\t}\n\n\treturn commutePaths(remove, b);\n}\n\n/**\n * Apply a move operation to x\n * @param {object|array} x\n * @param {object} change move operation\n */\nfunction applyMove(x, change, options) {\n\tif(jsonPointer.contains(change.path, change.from)) {\n\t\tthrow new InvalidPatchOperationError('move.from cannot be ancestor of move.path');\n\t}\n\n\tvar pto = find(x, change.path, options.findContext, change.context);\n\tvar pfrom = find(x, change.from, options.findContext, change.fromContext);\n\n\t_add(pto, _remove(pfrom));\n\treturn x;\n}\n\nfunction invertMove(pr, c) {\n\tpr.push({ op: 'move',\n\t\tpath: c.from, context: c.fromContext,\n\t\tfrom: c.path, fromContext: c.context });\n\treturn 1;\n}\n\nfunction commuteMove(move, b) {\n\tif(move.path === b.path && b.op === 'remove') {\n\t\tthrow new TypeError('Can\\'t commute move,remove -> move,replace for same path');\n\t}\n\n\treturn commutePaths(move, b);\n}\n\n/**\n * Apply a copy operation to x\n * @param {object|array} x\n * @param {object} change copy operation\n */\nfunction applyCopy(x, change, options) {\n\tvar pto = find(x, change.path, options.findContext, change.context);\n\tvar pfrom = find(x, change.from, options.findContext, change.fromContext);\n\n\tif(notFound(pfrom) || missingValue(pfrom)) {\n\t\tthrow new InvalidPatchOperationError('copy.from must exist');\n\t}\n\n\tvar target = pfrom.target;\n\tvar value;\n\n\tif(Array.isArray(target)) {\n\t\tvalue = target[parseArrayIndex(pfrom.key)];\n\t} else {\n\t\tvalue = target[pfrom.key];\n\t}\n\n\t_add(pto, clone(value));\n\treturn x;\n}\n\n// NOTE: Copy is not invertible\n// See https://github.com/cujojs/jiff/issues/9\n// This needs more thought. We may have to extend/amend JSON Patch.\n// At first glance, this seems like it should just be a remove.\n// However, that's not correct.  It violates the involution:\n// invert(invert(p)) ~= p.  For example:\n// invert(copy) -> remove\n// invert(remove) -> add\n// thus: invert(invert(copy)) -> add (DOH! this should be copy!)\n\nfunction notInvertible(_, c) {\n\tthrow new PatchNotInvertibleError('cannot invert ' + c.op);\n}\n\nfunction notFound (pointer) {\n\treturn pointer === void 0 || (pointer.target == null && pointer.key !== void 0);\n}\n\nfunction missingValue(pointer) {\n\treturn pointer.key !== void 0 && pointer.target[pointer.key] === void 0;\n}\n\n/**\n * Return true if x is a non-null object\n * @param {*} x\n * @returns {boolean}\n */\nfunction isValidObject (x) {\n\treturn x !== null && typeof x === 'object';\n}\n","/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n/**\n * Create a deep copy of x which must be a legal JSON object/array/value\n * @param {object|array|string|number|null} x object/array/value to clone\n * @returns {object|array|string|number|null} clone of x\n */\nmodule.exports = clone;\n\nfunction clone(x) {\n\tif(x == null || typeof x !== 'object') {\n\t\treturn x;\n\t}\n\n\tif(Array.isArray(x)) {\n\t\treturn cloneArray(x);\n\t}\n\n\treturn cloneObject(x);\n}\n\nfunction cloneArray (x) {\n\tvar l = x.length;\n\tvar y = new Array(l);\n\n\tfor (var i = 0; i < l; ++i) {\n\t\ty[i] = clone(x[i]);\n\t}\n\n\treturn y;\n}\n\nfunction cloneObject (x) {\n\tvar keys = Object.keys(x);\n\tvar y = {};\n\n\tfor (var k, i = 0, l = keys.length; i < l; ++i) {\n\t\tk = keys[i];\n\t\ty[k] = clone(x[k]);\n\t}\n\n\treturn y;\n}\n","module.exports = TestFailedError;\n\nfunction TestFailedError(message) {\n\tError.call(this);\n\tthis.name = this.constructor.name;\n\tthis.message = message;\n\tif(typeof Error.captureStackTrace === 'function') {\n\t\tError.captureStackTrace(this, this.constructor);\n\t}\n}\n\nTestFailedError.prototype = Object.create(Error.prototype);\nTestFailedError.prototype.constructor = TestFailedError;","module.exports = PatchNotInvertibleError;\n\nfunction PatchNotInvertibleError(message) {\n\tError.call(this);\n\tthis.name = this.constructor.name;\n\tthis.message = message;\n\tif(typeof Error.captureStackTrace === 'function') {\n\t\tError.captureStackTrace(this, this.constructor);\n\t}\n}\n\nPatchNotInvertibleError.prototype = Object.create(Error.prototype);\nPatchNotInvertibleError.prototype.constructor = PatchNotInvertibleError;","/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\nvar lcs = require('./lib/lcs');\nvar array = require('./lib/array');\nvar patch = require('./lib/jsonPatch');\nvar inverse = require('./lib/inverse');\nvar jsonPointer = require('./lib/jsonPointer');\nvar encodeSegment = jsonPointer.encodeSegment;\n\nexports.diff = diff;\nexports.patch = patch.apply;\nexports.patchInPlace = patch.applyInPlace;\nexports.inverse = inverse;\nexports.clone = patch.clone;\n\n// Errors\nexports.InvalidPatchOperationError = require('./lib/InvalidPatchOperationError');\nexports.TestFailedError = require('./lib/TestFailedError');\nexports.PatchNotInvertibleError = require('./lib/PatchNotInvertibleError');\n\nvar isValidObject = patch.isValidObject;\nvar defaultHash = patch.defaultHash;\n\n/**\n * Compute a JSON Patch representing the differences between a and b.\n * @param {object|array|string|number|null} a\n * @param {object|array|string|number|null} b\n * @param {?function|?object} options if a function, see options.hash\n * @param {?function(x:*):String|Number} options.hash used to hash array items\n *  in order to recognize identical objects, defaults to JSON.stringify\n * @param {?function(index:Number, array:Array):object} options.makeContext\n *  used to generate patch context. If not provided, context will not be generated\n * @returns {array} JSON Patch such that patch(diff(a, b), a) ~ b\n */\nfunction diff(a, b, options) {\n\treturn appendChanges(a, b, '', initState(options, [])).patch;\n}\n\n/**\n * Create initial diff state from the provided options\n * @param {?function|?object} options @see diff options above\n * @param {array} patch an empty or existing JSON Patch array into which\n *  the diff should generate new patch operations\n * @returns {object} initialized diff state\n */\nfunction initState(options, patch) {\n\tif(typeof options === 'object') {\n\t\treturn {\n\t\t\tpatch: patch,\n\t\t\thash: orElse(isFunction, options.hash, defaultHash),\n\t\t\tmakeContext: orElse(isFunction, options.makeContext, defaultContext),\n\t\t\tinvertible: !(options.invertible === false)\n\t\t};\n\t} else {\n\t\treturn {\n\t\t\tpatch: patch,\n\t\t\thash: orElse(isFunction, options, defaultHash),\n\t\t\tmakeContext: defaultContext,\n\t\t\tinvertible: true\n\t\t};\n\t}\n}\n\n/**\n * Given two JSON values (object, array, number, string, etc.), find their\n * differences and append them to the diff state\n * @param {object|array|string|number|null} a\n * @param {object|array|string|number|null} b\n * @param {string} path\n * @param {object} state\n * @returns {Object} updated diff state\n */\nfunction appendChanges(a, b, path, state) {\n\tif(Array.isArray(a) && Array.isArray(b)) {\n\t\treturn appendArrayChanges(a, b, path, state);\n\t}\n\n\tif(isValidObject(a) && isValidObject(b)) {\n\t\treturn appendObjectChanges(a, b, path, state);\n\t}\n\n\treturn appendValueChanges(a, b, path, state);\n}\n\n/**\n * Given two objects, find their differences and append them to the diff state\n * @param {object} o1\n * @param {object} o2\n * @param {string} path\n * @param {object} state\n * @returns {Object} updated diff state\n */\nfunction appendObjectChanges(o1, o2, path, state) {\n\tvar keys = Object.keys(o2);\n\tvar patch = state.patch;\n\tvar i, key;\n\n\tfor(i=keys.length-1; i>=0; --i) {\n\t\tkey = keys[i];\n\t\tvar keyPath = path + '/' + encodeSegment(key);\n\t\tif(o1[key] !== void 0) {\n\t\t\tappendChanges(o1[key], o2[key], keyPath, state);\n\t\t} else {\n\t\t\tpatch.push({ op: 'add', path: keyPath, value: o2[key] });\n\t\t}\n\t}\n\n\tkeys = Object.keys(o1);\n\tfor(i=keys.length-1; i>=0; --i) {\n\t\tkey = keys[i];\n\t\tif(o2[key] === void 0) {\n\t\t\tvar p = path + '/' + encodeSegment(key);\n\t\t\tif(state.invertible) {\n\t\t\t\tpatch.push({ op: 'test', path: p, value: o1[key] });\n\t\t\t}\n\t\t\tpatch.push({ op: 'remove', path: p });\n\t\t}\n\t}\n\n\treturn state;\n}\n\n/**\n * Given two arrays, find their differences and append them to the diff state\n * @param {array} a1\n * @param {array} a2\n * @param {string} path\n * @param {object} state\n * @returns {Object} updated diff state\n */\nfunction appendArrayChanges(a1, a2, path, state) {\n\tvar a1hash = array.map(state.hash, a1);\n\tvar a2hash = array.map(state.hash, a2);\n\n\tvar lcsMatrix = lcs.compare(a1hash, a2hash);\n\n\treturn lcsToJsonPatch(a1, a2, path, state, lcsMatrix);\n}\n\n/**\n * Transform an lcsMatrix into JSON Patch operations and append\n * them to state.patch, recursing into array elements as necessary\n * @param {array} a1\n * @param {array} a2\n * @param {string} path\n * @param {object} state\n * @param {object} lcsMatrix\n * @returns {object} new state with JSON Patch operations added based\n *  on the provided lcsMatrix\n */\nfunction lcsToJsonPatch(a1, a2, path, state, lcsMatrix) {\n\tvar offset = 0;\n\treturn lcs.reduce(function(state, op, i, j) {\n\t\tvar last, context;\n\t\tvar patch = state.patch;\n\t\tvar p = path + '/' + (j + offset);\n\n\t\tif (op === lcs.REMOVE) {\n\t\t\t// Coalesce adjacent remove + add into replace\n\t\t\tlast = patch[patch.length-1];\n\t\t\tcontext = state.makeContext(j, a1);\n\n\t\t\tif(state.invertible) {\n\t\t\t\tpatch.push({ op: 'test', path: p, value: a1[j], context: context });\n\t\t\t}\n\n\t\t\tif(last !== void 0 && last.op === 'add' && last.path === p) {\n\t\t\t\tlast.op = 'replace';\n\t\t\t\tlast.context = context;\n\t\t\t} else {\n\t\t\t\tpatch.push({ op: 'remove', path: p, context: context });\n\t\t\t}\n\n\t\t\toffset -= 1;\n\n\t\t} else if (op === lcs.ADD) {\n\t\t\t// See https://tools.ietf.org/html/rfc6902#section-4.1\n\t\t\t// May use either index===length *or* '-' to indicate appending to array\n\t\t\tpatch.push({ op: 'add', path: p, value: a2[i],\n\t\t\t\tcontext: state.makeContext(j, a1)\n\t\t\t});\n\n\t\t\toffset += 1;\n\n\t\t} else {\n\t\t\tappendChanges(a1[j], a2[i], p, state);\n\t\t}\n\n\t\treturn state;\n\n\t}, state, lcsMatrix);\n}\n\n/**\n * Given two number|string|null values, if they differ, append to diff state\n * @param {string|number|null} a\n * @param {string|number|null} b\n * @param {string} path\n * @param {object} state\n * @returns {object} updated diff state\n */\nfunction appendValueChanges(a, b, path, state) {\n\tif(a !== b) {\n\t\tif(state.invertible) {\n\t\t\tstate.patch.push({ op: 'test', path: path, value: a });\n\t\t}\n\n\t\tstate.patch.push({ op: 'replace', path: path, value: b });\n\t}\n\n\treturn state;\n}\n\n/**\n * @param {function} predicate\n * @param {*} x\n * @param {*} y\n * @returns {*} x if predicate(x) is truthy, otherwise y\n */\nfunction orElse(predicate, x, y) {\n\treturn predicate(x) ? x : y;\n}\n\n/**\n * Default patch context generator\n * @returns {undefined} undefined context\n */\nfunction defaultContext() {\n\treturn void 0;\n}\n\n/**\n * @param {*} x\n * @returns {boolean} true if x is a function, false otherwise\n */\nfunction isFunction(x) {\n\treturn typeof x === 'function';\n}\n","/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\nexports.compare = compare;\nexports.reduce = reduce;\n\nvar REMOVE, RIGHT, ADD, DOWN, SKIP;\n\nexports.REMOVE = REMOVE = RIGHT = -1;\nexports.ADD    = ADD    = DOWN  =  1;\nexports.EQUAL  = SKIP   = 0;\n\n/**\n * Create an lcs comparison matrix describing the differences\n * between two array-like sequences\n * @param {array} a array-like\n * @param {array} b array-like\n * @returns {object} lcs descriptor, suitable for passing to reduce()\n */\nfunction compare(a, b) {\n\tvar cols = a.length;\n\tvar rows = b.length;\n\n\tvar prefix = findPrefix(a, b);\n\tvar suffix = prefix < cols && prefix < rows\n\t\t? findSuffix(a, b, prefix)\n\t\t: 0;\n\n\tvar remove = suffix + prefix - 1;\n\tcols -= remove;\n\trows -= remove;\n\tvar matrix = createMatrix(cols, rows);\n\n\tfor (var j = cols - 1; j >= 0; --j) {\n\t\tfor (var i = rows - 1; i >= 0; --i) {\n\t\t\tmatrix[i][j] = backtrack(matrix, a, b, prefix, j, i);\n\t\t}\n\t}\n\n\treturn {\n\t\tprefix: prefix,\n\t\tmatrix: matrix,\n\t\tsuffix: suffix\n\t};\n}\n\n/**\n * Reduce a set of lcs changes previously created using compare\n * @param {function(result:*, type:number, i:number, j:number)} f\n *  reducer function, where:\n *  - result is the current reduce value,\n *  - type is the type of change: ADD, REMOVE, or SKIP\n *  - i is the index of the change location in b\n *  - j is the index of the change location in a\n * @param {*} r initial value\n * @param {object} lcs results returned by compare()\n * @returns {*} the final reduced value\n */\nfunction reduce(f, r, lcs) {\n\tvar i, j, k, op;\n\n\tvar m = lcs.matrix;\n\n\t// Reduce shared prefix\n\tvar l = lcs.prefix;\n\tfor(i = 0;i < l; ++i) {\n\t\tr = f(r, SKIP, i, i);\n\t}\n\n\t// Reduce longest change span\n\tk = i;\n\tl = m.length;\n\ti = 0;\n\tj = 0;\n\twhile(i < l) {\n\t\top = m[i][j].type;\n\t\tr = f(r, op, i+k, j+k);\n\n\t\tswitch(op) {\n\t\t\tcase SKIP:  ++i; ++j; break;\n\t\t\tcase RIGHT: ++j; break;\n\t\t\tcase DOWN:  ++i; break;\n\t\t}\n\t}\n\n\t// Reduce shared suffix\n\ti += k;\n\tj += k;\n\tl = lcs.suffix;\n\tfor(k = 0;k < l; ++k) {\n\t\tr = f(r, SKIP, i+k, j+k);\n\t}\n\n\treturn r;\n}\n\nfunction findPrefix(a, b) {\n\tvar i = 0;\n\tvar l = Math.min(a.length, b.length);\n\twhile(i < l && a[i] === b[i]) {\n\t\t++i;\n\t}\n\treturn i;\n}\n\nfunction findSuffix(a, b) {\n\tvar al = a.length - 1;\n\tvar bl = b.length - 1;\n\tvar l = Math.min(al, bl);\n\tvar i = 0;\n\twhile(i < l && a[al-i] === b[bl-i]) {\n\t\t++i;\n\t}\n\treturn i;\n}\n\nfunction backtrack(matrix, a, b, start, j, i) {\n\tif (a[j+start] === b[i+start]) {\n\t\treturn { value: matrix[i + 1][j + 1].value, type: SKIP };\n\t}\n\tif (matrix[i][j + 1].value < matrix[i + 1][j].value) {\n\t\treturn { value: matrix[i][j + 1].value + 1, type: RIGHT };\n\t}\n\n\treturn { value: matrix[i + 1][j].value + 1, type: DOWN };\n}\n\nfunction createMatrix (cols, rows) {\n\tvar m = [], i, j, lastrow;\n\n\t// Fill the last row\n\tlastrow = m[rows] = [];\n\tfor (j = 0; j<cols; ++j) {\n\t\tlastrow[j] = { value: cols - j, type: RIGHT };\n\t}\n\n\t// Fill the last col\n\tfor (i = 0; i<rows; ++i) {\n\t\tm[i] = [];\n\t\tm[i][cols] = { value: rows - i, type: DOWN };\n\t}\n\n\t// Fill the last cell\n\tm[rows][cols] = { value: 0, type: SKIP };\n\n\treturn m;\n}\n","/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\nvar patches = require('./patches');\nvar clone = require('./clone');\nvar InvalidPatchOperationError = require('./InvalidPatchOperationError');\n\nexports.apply = patch;\nexports.applyInPlace = patchInPlace;\nexports.clone = clone;\nexports.isValidObject = isValidObject;\nexports.defaultHash = defaultHash;\n\nvar defaultOptions = {};\n\n/**\n * Apply the supplied JSON Patch to x\n * @param {array} changes JSON Patch\n * @param {object|array|string|number} x object/array/value to patch\n * @param {object} options\n * @param {function(index:Number, array:Array, context:object):Number} options.findContext\n *  function used adjust array indexes for smarty/fuzzy patching, for\n *  patches containing context\n * @returns {object|array|string|number} patched version of x. If x is\n *  an array or object, it will be mutated and returned. Otherwise, if\n *  x is a value, the new value will be returned.\n */\nfunction patch(changes, x, options) {\n\treturn patchInPlace(changes, clone(x), options);\n}\n\nfunction patchInPlace(changes, x, options) {\n\tif(!options) {\n\t\toptions = defaultOptions;\n\t}\n\n\t// TODO: Consider throwing if changes is not an array\n\tif(!Array.isArray(changes)) {\n\t\treturn x;\n\t}\n\n\tvar patch, p;\n\tfor(var i=0; i<changes.length; ++i) {\n\t\tp = changes[i];\n\t\tpatch = patches[p.op];\n\n\t\tif(patch === void 0) {\n\t\t\tthrow new InvalidPatchOperationError('invalid op ' + JSON.stringify(p));\n\t\t}\n\n\t\tx = patch.apply(x, p, options);\n\t}\n\n\treturn x;\n}\n\nfunction defaultHash(x) {\n\treturn isValidObject(x) || isArray(x) ? JSON.stringify(x) : x;\n}\n\nfunction isValidObject (x) {\n\treturn x !== null && Object.prototype.toString.call(x) === '[object Object]';\n}\n\nfunction isArray (x) {\n\treturn Object.prototype.toString.call(x) === '[object Array]';\n}\n","/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\nmodule.exports = jsonPointerParse;\n\nvar parseRx = /\\/|~1|~0/g;\nvar separator = '/';\nvar escapeChar = '~';\nvar encodedSeparator = '~1';\n\n/**\n * Parse through an encoded JSON Pointer string, decoding each path segment\n * and passing it to an onSegment callback function.\n * @see https://tools.ietf.org/html/rfc6901#section-4\n * @param {string} path encoded JSON Pointer string\n * @param {{function(segment:string):boolean}} onSegment callback function\n * @returns {string} original path\n */\nfunction jsonPointerParse(path, onSegment) {\n\tvar pos, accum, matches, match;\n\n\tpos = path.charAt(0) === separator ? 1 : 0;\n\taccum = '';\n\tparseRx.lastIndex = pos;\n\n\twhile(matches = parseRx.exec(path)) {\n\n\t\tmatch = matches[0];\n\t\taccum += path.slice(pos, parseRx.lastIndex - match.length);\n\t\tpos = parseRx.lastIndex;\n\n\t\tif(match === separator) {\n\t\t\tif (onSegment(accum) === false) return path;\n\t\t\taccum = '';\n\t\t} else {\n\t\t\taccum += match === encodedSeparator ? separator : escapeChar;\n\t\t}\n\t}\n\n\taccum += path.slice(pos);\n\tonSegment(accum);\n\n\treturn path;\n}\n","module.exports = deepEquals;\n\n/**\n * Compare 2 JSON values, or recursively compare 2 JSON objects or arrays\n * @param {object|array|string|number|boolean|null} a\n * @param {object|array|string|number|boolean|null} b\n * @returns {boolean} true iff a and b are recursively equal\n */\nfunction deepEquals(a, b) {\n\tif(a === b) {\n\t\treturn true;\n\t}\n\n\tif(Array.isArray(a) && Array.isArray(b)) {\n\t\treturn compareArrays(a, b);\n\t}\n\n\tif(typeof a === 'object' && typeof b === 'object') {\n\t\treturn compareObjects(a, b);\n\t}\n\n\treturn false;\n}\n\nfunction compareArrays(a, b) {\n\tif(a.length !== b.length) {\n\t\treturn false;\n\t}\n\n\tfor(var i = 0; i<a.length; ++i) {\n\t\tif(!deepEquals(a[i], b[i])) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n}\n\nfunction compareObjects(a, b) {\n\tif((a === null && b !== null) || (a !== null && b === null)) {\n\t\treturn false;\n\t}\n\n\tvar akeys = Object.keys(a);\n\tvar bkeys = Object.keys(b);\n\n\tif(akeys.length !== bkeys.length) {\n\t\treturn false;\n\t}\n\n\tfor(var i = 0, k; i<akeys.length; ++i) {\n\t\tk = akeys[i];\n\t\tif(!(k in b && deepEquals(a[k], b[k]))) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n}","var jsonPointer = require('./jsonPointer');\n\n/**\n * commute the patch sequence a,b to b,a\n * @param {object} a patch operation\n * @param {object} b patch operation\n */\nmodule.exports = function commutePaths(a, b) {\n\t// TODO: cases for special paths: '' and '/'\n\tvar left = jsonPointer.parse(a.path);\n\tvar right = jsonPointer.parse(b.path);\n\tvar prefix = getCommonPathPrefix(left, right);\n\tvar isArray = isArrayPath(left, right, prefix.length);\n\n\t// Never mutate the originals\n\tvar ac = copyPatch(a);\n\tvar bc = copyPatch(b);\n\n\tif(prefix.length === 0 && !isArray) {\n\t\t// Paths share no common ancestor, simple swap\n\t\treturn [bc, ac];\n\t}\n\n\tif(isArray) {\n\t\treturn commuteArrayPaths(ac, left, bc, right);\n\t} else {\n\t\treturn commuteTreePaths(ac, left, bc, right);\n\t}\n};\n\nfunction commuteTreePaths(a, left, b, right) {\n\tif(a.path === b.path) {\n\t\tthrow new TypeError('cannot commute ' + a.op + ',' + b.op + ' with identical object paths');\n\t}\n\t// FIXME: Implement tree path commutation\n\treturn [b, a];\n}\n\n/**\n * Commute two patches whose common ancestor (which may be the immediate parent)\n * is an array\n * @param a\n * @param left\n * @param b\n * @param right\n * @returns {*}\n */\nfunction commuteArrayPaths(a, left, b, right) {\n\tif(left.length === right.length) {\n\t\treturn commuteArraySiblings(a, left, b, right);\n\t}\n\n\tif (left.length > right.length) {\n\t\t// left is longer, commute by \"moving\" it to the right\n\t\tleft = commuteArrayAncestor(b, right, a, left, -1);\n\t\ta.path = jsonPointer.absolute(jsonPointer.join(left));\n\t} else {\n\t\t// right is longer, commute by \"moving\" it to the left\n\t\tright = commuteArrayAncestor(a, left, b, right, 1);\n\t\tb.path = jsonPointer.absolute(jsonPointer.join(right));\n\t}\n\n\treturn [b, a];\n}\n\nfunction isArrayPath(left, right, index) {\n\treturn jsonPointer.isValidArrayIndex(left[index])\n\t\t&& jsonPointer.isValidArrayIndex(right[index]);\n}\n\n/**\n * Commute two patches referring to items in the same array\n * @param l\n * @param lpath\n * @param r\n * @param rpath\n * @returns {*[]}\n */\nfunction commuteArraySiblings(l, lpath, r, rpath) {\n\n\tvar target = lpath.length-1;\n\tvar lindex = +lpath[target];\n\tvar rindex = +rpath[target];\n\n\tvar commuted;\n\n\tif(lindex < rindex) {\n\t\t// Adjust right path\n\t\tif(l.op === 'add' || l.op === 'copy') {\n\t\t\tcommuted = rpath.slice();\n\t\t\tcommuted[target] = Math.max(0, rindex - 1);\n\t\t\tr.path = jsonPointer.absolute(jsonPointer.join(commuted));\n\t\t} else if(l.op === 'remove') {\n\t\t\tcommuted = rpath.slice();\n\t\t\tcommuted[target] = rindex + 1;\n\t\t\tr.path = jsonPointer.absolute(jsonPointer.join(commuted));\n\t\t}\n\t} else if(r.op === 'add' || r.op === 'copy') {\n\t\t// Adjust left path\n\t\tcommuted = lpath.slice();\n\t\tcommuted[target] = lindex + 1;\n\t\tl.path = jsonPointer.absolute(jsonPointer.join(commuted));\n\t} else if (lindex > rindex && r.op === 'remove') {\n\t\t// Adjust left path only if remove was at a (strictly) lower index\n\t\tcommuted = lpath.slice();\n\t\tcommuted[target] = Math.max(0, lindex - 1);\n\t\tl.path = jsonPointer.absolute(jsonPointer.join(commuted));\n\t}\n\n\treturn [r, l];\n}\n\n/**\n * Commute two patches with a common array ancestor\n * @param l\n * @param lpath\n * @param r\n * @param rpath\n * @param direction\n * @returns {*}\n */\nfunction commuteArrayAncestor(l, lpath, r, rpath, direction) {\n\t// rpath is longer or same length\n\n\tvar target = lpath.length-1;\n\tvar lindex = +lpath[target];\n\tvar rindex = +rpath[target];\n\n\t// Copy rpath, then adjust its array index\n\tvar rc = rpath.slice();\n\n\tif(lindex > rindex) {\n\t\treturn rc;\n\t}\n\n\tif(l.op === 'add' || l.op === 'copy') {\n\t\trc[target] = Math.max(0, rindex - direction);\n\t} else if(l.op === 'remove') {\n\t\trc[target] = Math.max(0, rindex + direction);\n\t}\n\n\treturn rc;\n}\n\nfunction getCommonPathPrefix(p1, p2) {\n\tvar p1l = p1.length;\n\tvar p2l = p2.length;\n\tif(p1l === 0 || p2l === 0 || (p1l < 2 && p2l < 2)) {\n\t\treturn [];\n\t}\n\n\t// If paths are same length, the last segment cannot be part\n\t// of a common prefix.  If not the same length, the prefix cannot\n\t// be longer than the shorter path.\n\tvar l = p1l === p2l\n\t\t? p1l - 1\n\t\t: Math.min(p1l, p2l);\n\n\tvar i = 0;\n\twhile(i < l && p1[i] === p2[i]) {\n\t\t++i\n\t}\n\n\treturn p1.slice(0, i);\n}\n\nfunction copyPatch(p) {\n\tif(p.op === 'remove') {\n\t\treturn { op: p.op, path: p.path };\n\t}\n\n\tif(p.op === 'copy' || p.op === 'move') {\n\t\treturn { op: p.op, path: p.path, from: p.from };\n\t}\n\n\t// test, add, replace\n\treturn { op: p.op, path: p.path, value: p.value };\n}","var patches = require('./patches');\n\nmodule.exports = function inverse(p) {\n\tvar pr = [];\n\tvar i, skip;\n\tfor(i = p.length-1; i>= 0; i -= skip) {\n\t\tskip = invertOp(pr, p[i], i, p);\n\t}\n\n\treturn pr;\n};\n\nfunction invertOp(patch, c, i, context) {\n\tvar op = patches[c.op];\n\treturn op !== void 0 && typeof op.inverse === 'function'\n\t\t? op.inverse(patch, c, i, context)\n\t\t: 1;\n}\n","import types from './types';\n\nfunction toggleCreateBaseline() {\n    return {\n        type: types.CREATE_NEW_BASELINE\n    };\n}\n\nexport default {\n    toggleCreateBaseline\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport { Button } from '@patternfly/react-core';\n\nimport { baselinesPageActions } from '../redux';\nimport { addSystemModalActions } from '../../AddSystemModal/redux';\n\nclass CreateBaselineButton extends Component {\n    constructor(props) {\n        super(props);\n        this.createBaseline = this.createBaseline.bind(this);\n    }\n\n    createBaseline() {\n        const { history, toggleCreateBaseline, addSystemModalOpened, toggleAddSystemModal } = this.props;\n\n        if (history.location.pathname === '/') {\n            if (addSystemModalOpened === true) {\n                toggleAddSystemModal();\n            }\n\n            history.push({ pathname: 'baselines' });\n        }\n\n        toggleCreateBaseline();\n    }\n\n    render() {\n        return (\n            <Button\n                variant='primary'\n                onClick={ this.createBaseline }>\n                Create baseline\n            </Button>\n        );\n    }\n}\n\nCreateBaselineButton.propTypes = {\n    toggleCreateBaseline: PropTypes.func,\n    toggleAddSystemModal: PropTypes.func,\n    history: PropTypes.object,\n    addSystemModalOpened: PropTypes.bool\n};\n\nfunction mapStateToProps(state) {\n    return {\n        addSystemModalOpened: state.addSystemModalState.addSystemModalOpened\n    };\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        toggleCreateBaseline: () => dispatch(baselinesPageActions.toggleCreateBaseline()),\n        toggleAddSystemModal: () => dispatch(addSystemModalActions.toggleAddSystemModal())\n    };\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(CreateBaselineButton));\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Button,\n    EmptyState,\n    EmptyStateVariant,\n    EmptyStateIcon,\n    EmptyStateBody,\n    InputGroup,\n    TextInput,\n    Title } from '@patternfly/react-core';\nimport { CubesIcon } from '@patternfly/react-icons';\n\nimport { baselinesPageActions } from '../redux';\nimport { baselinesTableActions } from '../../BaselinesTable/redux';\n\nclass CreateBaseline extends Component {\n    constructor(props) {\n        super(props);\n        this.submitBaselineName = this.submitBaselineName.bind(this);\n\n        this.state = {\n            baselineName: ''\n        };\n\n        this.updateBaselineName = value => {\n            this.setState({ baselineName: value });\n        };\n    }\n\n    submitBaselineName() {\n        const { baselineName } = this.state;\n        const { createBaseline, toggleCreateBaseline } = this.props;\n        /*eslint-disable camelcase*/\n        let newBaselineObject = { display_name: baselineName, baseline_facts: []};\n        /*eslint-enable camelcase*/\n\n        createBaseline(newBaselineObject);\n        toggleCreateBaseline();\n    }\n\n    render() {\n        const { baselineName } = this.state;\n\n        return (\n            <React.Fragment>\n                <EmptyState variant={ EmptyStateVariant.full }>\n                    <EmptyStateIcon icon={ CubesIcon } />\n                    <Title headingLevel=\"h5\" size=\"lg\">\n                        Create baseline\n                    </Title>\n                    <EmptyStateBody>\n                        Create a baseline name\n                        <InputGroup>\n                            <TextInput value={ baselineName } type=\"text\" onChange={ this.updateBaselineName } aria-label=\"baseline name\" />\n                            <Button onClick={ this.submitBaselineName }>Submit</Button>\n                        </InputGroup>\n                    </EmptyStateBody>\n                </EmptyState>\n            </React.Fragment>\n        );\n    }\n}\n\nCreateBaseline.propTypes = {\n    toggleCreateBaseline: PropTypes.func,\n    createBaseline: PropTypes.func\n};\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        toggleCreateBaseline: () => dispatch(baselinesPageActions.toggleCreateBaseline()),\n        createBaseline: (newBaselineObject) => dispatch(baselinesTableActions.createBaseline(newBaselineObject))\n    };\n}\n\nexport default connect(null, mapDispatchToProps)(CreateBaseline);\n","import types from './types';\n\nfunction exportToCSV(exportType, baselineData, baselineRowData = []) {\n    let data = {\n        exportType,\n        exportData: baselineData,\n        baselineRowData\n    };\n\n    return {\n        type: types.EXPORT_BASELINES_LIST_TO_CSV,\n        payload: data\n    };\n}\n\nexport default {\n    exportToCSV\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\n\nimport { baselinesKebabActions } from './redux';\nimport { Dropdown, KebabToggle, DropdownItem } from '@patternfly/react-core';\n\nclass BaselinesKebab extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            kebabOpened: false\n        };\n\n        this.exportSelect = this.exportSelect.bind(this);\n\n        this.toggleKebab = () => {\n            const { kebabOpened } = this.state;\n            this.setState({\n                kebabOpened: !kebabOpened\n            });\n        };\n    }\n\n    exportSelect() {\n        const { exportType, baselineTableData, baselineData, baselineRowData } = this.props;\n        this.toggleKebab();\n        if (exportType === 'baseline list') {\n            this.props.exportToCSV(exportType, baselineTableData);\n        } else if (exportType === 'baselines data') {\n            this.props.exportToCSV(exportType, baselineData, baselineRowData);\n        }\n    }\n\n    render() {\n        const { kebabOpened } = this.state;\n        const dropdownItems = [\n            <DropdownItem key=\"export\" component=\"button\" onClick={ this.exportSelect }>Export as CSV</DropdownItem>\n        ];\n        return (\n            <Dropdown\n                style={ { float: 'left' } }\n                className={ 'action-kebab' }\n                toggle={ <KebabToggle onToggle={ this.toggleKebab } /> }\n                isOpen={ kebabOpened }\n                dropdownItems={ dropdownItems }\n                isPlain\n            />\n        );\n    }\n}\n\nBaselinesKebab.propTypes = {\n    exportToCSV: PropTypes.func,\n    baselineTableData: PropTypes.array,\n    exportType: PropTypes.string,\n    baselineData: PropTypes.array,\n    baselineRowData: PropTypes.array\n};\n\nfunction mapStateToProps(state) {\n    return {\n        baselineTableData: state.baselinesTableState.baselineTableData,\n        baselineData: state.baselinesTableState.baselineData\n    };\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        exportToCSV: (exportType, exportData, baselineRowData) => {\n            dispatch(baselinesKebabActions.exportToCSV(exportType, exportData, baselineRowData));\n        }\n    };\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(BaselinesKebab));\n","import types from './types';\n\nfunction toggleFactModal() {\n    return {\n        type: types.TOGGLE_FACT_MODAL\n    };\n}\n\nfunction setFactData(factData) {\n    return {\n        type: types.SET_FACT_DATA,\n        payload: factData\n    };\n}\n\nexport default {\n    toggleFactModal,\n    setFactData\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Button, Toolbar, ToolbarGroup, ToolbarItem } from '@patternfly/react-core';\n\nimport { factModalActions } from '../FactModal/redux';\n\nclass EditBaselineToolbar extends Component {\n    constructor(props) {\n        super(props);\n\n        this.handleAddFact = this.handleAddFact.bind(this);\n    }\n\n    handleAddFact() {\n        const { setFactData, toggleFactModal } = this.props;\n\n        setFactData({ factName: '', factValue: '', fact: []});\n        toggleFactModal();\n    }\n\n    render() {\n        return (\n            <Toolbar className='display-margin'>\n                <ToolbarGroup>\n                    <ToolbarItem>\n                        <Button\n                            variant='primary'\n                            onClick={ this.handleAddFact }>\n                            Add fact\n                        </Button>\n                    </ToolbarItem>\n                </ToolbarGroup>\n            </Toolbar>\n        );\n    };\n}\n\nEditBaselineToolbar.propTypes = {\n    toggleFactModal: PropTypes.func,\n    setFactData: PropTypes.func\n};\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        toggleFactModal: () => dispatch(factModalActions.toggleFactModal()),\n        setFactData: (factData) => dispatch(factModalActions.setFactData(factData))\n    };\n}\n\nexport default connect(null, mapDispatchToProps)(EditBaselineToolbar);\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Dropdown, DropdownItem, DropdownPosition, KebabToggle } from '@patternfly/react-core';\n\nimport { factModalActions } from '../FactModal/redux';\nimport { baselinesTableActions } from '../../../BaselinesTable/redux';\nimport editBaselineHelpers from '../helpers';\n\nclass FactKebab extends Component {\n    constructor(props) {\n        super(props);\n\n        this.editFact = this.editFact.bind(this);\n        this.deleteFact = this.deleteFact.bind(this);\n        this.addFact = this.addFact.bind(this);\n\n        this.state = {\n            isOpen: false,\n            factName: this.props.factName,\n            factValue: this.props.factValue,\n            fact: this.props.fact\n        };\n    }\n\n    onKebabToggle(isOpen) {\n        this.setState({\n            isOpen\n        });\n    }\n\n    editFact() {\n        const { factName, factValue, fact } = this.state;\n        const { toggleFactModal, setFactData } = this.props;\n\n        toggleFactModal();\n        setFactData({\n            factName,\n            factValue,\n            fact\n        });\n    }\n\n    deleteFact() {\n        const { factName, factValue, fact } = this.state;\n        const { baselineData, patchBaseline } = this.props;\n        let factToDelete = { name: factName, value: factValue };\n        let newAPIBody;\n\n        if (fact.values && factValue !== '') {\n            let deletedSubFact = editBaselineHelpers.buildDeletedSubFact(factToDelete, fact);\n            newAPIBody = editBaselineHelpers.makeDeleteFactPatch(deletedSubFact, baselineData, fact);\n        } else {\n            newAPIBody = editBaselineHelpers.makeDeleteFactPatch(factToDelete, baselineData, []);\n        }\n\n        patchBaseline(baselineData.id, newAPIBody);\n    }\n\n    addFact() {\n        const { fact } = this.state;\n        const { toggleFactModal, setFactData } = this.props;\n\n        toggleFactModal();\n        setFactData({ fact });\n    }\n\n    render() {\n        const { isOpen, factValue, fact } = this.state;\n        const dropdownItems = [\n            <DropdownItem\n                key=\"edit\"\n                component=\"button\"\n                onClick={ this.editFact }>\n                { fact.values && factValue === '' ? 'Edit category' : 'Edit fact' }\n            </DropdownItem>,\n            <DropdownItem\n                key=\"delete\"\n                component=\"button\"\n                onClick={ this.deleteFact }>\n                { fact.values && factValue === '' ? 'Delete category' : 'Delete fact' }\n            </DropdownItem>\n        ];\n\n        if (fact.values && factValue === '') {\n            dropdownItems.push(\n                <DropdownItem\n                    key=\"add fact\"\n                    component=\"button\"\n                    onClick={ this.addFact }>\n                    Add sub fact\n                </DropdownItem>\n            );\n        }\n\n        return (\n            <Dropdown\n                position={ DropdownPosition.right }\n                style={ { float: 'right' } }\n                className={ 'baseline-fact-kebab' }\n                toggle={ <KebabToggle onToggle={ (isOpen) => this.onKebabToggle(isOpen) } /> }\n                isOpen={ isOpen }\n                dropdownItems={ dropdownItems }\n                isPlain\n            />\n        );\n    }\n}\n\nFactKebab.propTypes = {\n    factName: PropTypes.string,\n    factValue: PropTypes.string,\n    fact: PropTypes.object,\n    toggleFactModal: PropTypes.func,\n    setFactData: PropTypes.func,\n    baselineData: PropTypes.obj,\n    patchBaseline: PropTypes.func\n};\n\nfunction mapStateToProps(state) {\n    return {\n        baselineData: state.baselinesTableState.baselineData\n    };\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        toggleFactModal: () => dispatch(factModalActions.toggleFactModal()),\n        setFactData: (factData) => dispatch(factModalActions.setFactData(factData)),\n        patchBaseline: (baselineId, newAPIBody) => dispatch(baselinesTableActions.patchBaseline(baselineId, newAPIBody))\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FactKebab);\n","import React from 'react';\nimport jiff from 'jiff';\nimport FactKebab from './FactKebab/FactKebab';\n\nfunction renderKebab(factName, factValue, fact) {\n    return <td>\n        { <FactKebab\n            factName={ factName }\n            factValue={ factValue }\n            fact={ fact } />\n        }\n    </td>;\n}\n\nfunction buildNewFactData(isParent, factName, factValue, factData) {\n    let newFactData = {};\n    let subFacts = [];\n\n    if (factData && !Array.isArray(factData)) {\n        factData.values.forEach(function(subFact) {\n            subFacts.push(subFact);\n        });\n        subFacts.push({ name: factName, value: factValue });\n\n        newFactData.name = factData.name;\n        newFactData.values = subFacts;\n\n        return newFactData;\n    }\n\n    newFactData.name = factName;\n    if (isParent) {\n        newFactData.values = [];\n    } else {\n        newFactData.value = factValue;\n    }\n\n    return newFactData;\n}\n\nfunction buildEditedFactData(isParent, originalFactName, factName, originalValueName, factValue, factData) {\n    let newAPIBody = {};\n    let subFacts = [];\n    let originalSubFact = { name: originalFactName, value: originalValueName };\n\n    if (isParent) {\n        newAPIBody.name = factName;\n        factData.values.forEach(function(subFact) {\n            subFacts.push(subFact);\n        });\n        newAPIBody.values = subFacts;\n    } else {\n        if (factData.values && factValue !== '') {\n            newAPIBody.name = factData.name;\n            let newSubFact = { name: factName, value: factValue };\n\n            factData.values.forEach(function(subFact) {\n                if (subFact.name !== originalSubFact.name && subFact.value !== originalSubFact.value) {\n                    subFacts.push(subFact);\n                }\n            });\n            subFacts.push(newSubFact);\n            newAPIBody.values = subFacts;\n        } else {\n            newAPIBody = { name: factName, value: factValue };\n        }\n    }\n\n    return newAPIBody;\n}\n\nfunction buildDeletedSubFact(factToDelete, fact) {\n    let newParentFact;\n    let newSubFacts = [];\n\n    fact.values.forEach(function(subFact) {\n        if (subFact.name !== factToDelete.name && subFact.value !== factToDelete.value) {\n            newSubFacts.push(subFact);\n        }\n    });\n\n    newParentFact = { name: fact.name, values: newSubFacts };\n\n    return newParentFact;\n}\n\nfunction makeDeleteFactPatch(factToDelete, originalAPIBody, parentFactData) {\n    if (factToDelete === undefined || originalAPIBody === undefined) {\n        return {};\n    }\n\n    let patchBody = makeAPIPatch(factToDelete, originalAPIBody, parentFactData);\n    if (factToDelete.values) {\n        patchBody.push(factToDelete);\n    }\n\n    let patch = makePatchBody(patchBody, originalAPIBody.baseline_facts);\n\n    /*eslint-disable camelcase*/\n    let newAPIBody = { display_name: originalAPIBody.display_name, facts_patch: patch };\n    /*eslint-enable camelcase*/\n\n    return newAPIBody;\n}\n\nfunction makeAddFactPatch(newFactData, originalAPIBody, oldFactData) {\n    if (newFactData === undefined || originalAPIBody === undefined) {\n        return {};\n    }\n\n    let patchBody = makeAPIPatch(newFactData, originalAPIBody, oldFactData);\n\n    patchBody.push(newFactData);\n\n    let patch = makePatchBody(patchBody, originalAPIBody.baseline_facts);\n\n    /*eslint-disable camelcase*/\n    let newAPIBody = { display_name: originalAPIBody.display_name, facts_patch: patch };\n    /*eslint-enable camelcase*/\n\n    return newAPIBody;\n}\n\nfunction makeAPIPatch(data, originalAPIBody, originalParentFact) {\n    let patchBody = [];\n\n    if (Array.isArray(originalParentFact) && originalParentFact.length === 0) {\n        originalAPIBody.baseline_facts.forEach(function(fact) {\n            if (fact.name !== data.name) {\n                patchBody.push(fact);\n            }\n        });\n    } else {\n        originalAPIBody.baseline_facts.forEach(function(fact) {\n            if (fact.name !== originalParentFact.name) {\n                patchBody.push(fact);\n            }\n        });\n    }\n\n    return patchBody;\n}\n\nfunction makePatchBody(newAPIBody, originalAPIBody) {\n    return jiff.diff(originalAPIBody, newAPIBody);\n}\n\nexport default {\n    renderKebab,\n    buildNewFactData,\n    buildEditedFactData,\n    buildDeletedSubFact,\n    makeAddFactPatch,\n    makeDeleteFactPatch\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Button, Checkbox, Modal, TextInput } from '@patternfly/react-core';\n\nimport { factModalActions } from '../FactModal/redux';\nimport { baselinesTableActions } from '../../../BaselinesTable/redux';\nimport editBaselineHelpers from '../helpers';\n\nclass FactModal extends Component {\n    constructor(props) {\n        super(props);\n\n        this.cancelFact = this.cancelFact.bind(this);\n        this.confirmModal = this.confirmModal.bind(this);\n        this.renderCategoryCheckbox = this.renderCategoryCheckbox.bind(this);\n        this.renderFactInput = this.renderFactInput.bind(this);\n        this.renderValueInput = this.renderValueInput.bind(this);\n        this.renderModalBody = this.renderModalBody.bind(this);\n        this.patchFact = this.patchFact.bind(this);\n\n        this.state = {\n            factName: this.props.factName,\n            factValue: this.props.factValue,\n            factData: this.props.factData\n        };\n\n        if (this.props.factName !== '' && this.props.factValue === '') {\n            this.state.categoryCheck = true;\n        } else {\n            this.state.categoryCheck = false;\n        }\n\n        this.handleChange = (checked) => {\n            this.setState({ categoryCheck: checked });\n        };\n\n        this.handleNewName = value => {\n            this.setState({ factName: value });\n        };\n\n        this.handleNewValue = value => {\n            this.setState({ factValue: value });\n        };\n    }\n\n    cancelFact() {\n        const { toggleFactModal } = this.props;\n\n        toggleFactModal();\n    }\n\n    confirmModal() {\n        const { toggleFactModal, factName, factValue } = this.props;\n\n        if ((factName === '' && factValue === '')\n        || (factName === undefined && factValue === undefined)) {\n            this.addFact();\n        } else {\n            this.editFact();\n        }\n\n        toggleFactModal();\n    }\n\n    addFact() {\n        const { categoryCheck, factName, factValue, factData } = this.state;\n\n        let newFactData = editBaselineHelpers.buildNewFactData(categoryCheck, factName, factValue, factData);\n        this.patchFact(newFactData, factData);\n    }\n\n    editFact() {\n        const { categoryCheck, factName, factValue, factData } = this.state;\n\n        let editedFactData = editBaselineHelpers.buildEditedFactData(\n            categoryCheck, this.props.factName, factName, this.props.factValue, factValue, factData\n        );\n\n        this.patchFact(editedFactData, factData);\n    }\n\n    patchFact(patchData, factData) {\n        const { baselineData, patchBaseline } = this.props;\n\n        let newAPIBody = editBaselineHelpers.makeAddFactPatch(patchData, baselineData, factData);\n        patchBaseline(baselineData.id, newAPIBody);\n    }\n\n    renderCategoryCheckbox() {\n        const { categoryCheck } = this.state;\n        const { factName, factValue } = this.props;\n        let categoryCheckBody;\n\n        if (factName !== '' && factValue === '') {\n            categoryCheckBody = <Checkbox\n                label=\"This is a category\"\n                aria-label=\"controlled checkbox example\"\n                id=\"categoryCheck\"\n                name=\"isCategory\"\n                defaultChecked\n                isDisabled\n            />;\n        } else if (factName !== '' && factValue !== '') {\n            categoryCheckBody = <Checkbox\n                label=\"This is a category\"\n                aria-label=\"controlled checkbox example\"\n                id=\"categoryCheck\"\n                name=\"isCategory\"\n                isDisabled\n            />;\n        } else {\n            categoryCheckBody = <Checkbox\n                label=\"This is a category\"\n                isChecked={ categoryCheck }\n                onChange={ this.handleChange }\n                aria-label=\"controlled checkbox example\"\n                id=\"categoryCheck\"\n                name=\"isCategory\"\n            />;\n        }\n\n        return categoryCheckBody;\n    }\n\n    renderFactInput() {\n        const { factName } = this.state;\n        let factInputBody;\n\n        factInputBody = <div className=\"fact-value\">\n            Fact name:\n            <br></br>\n            <TextInput\n                value={ factName }\n                type=\"text\"\n                placeholder=\"Name\"\n                onChange={ this.handleNewName }\n                isValid={ factName !== '' && factName !== undefined ? true : false }\n                aria-label=\"fact name\"\n            />\n        </div>;\n\n        return factInputBody;\n    }\n\n    renderValueInput() {\n        const { categoryCheck, factValue } = this.state;\n        let valueInput;\n        let valueInputBody;\n\n        if (categoryCheck) {\n            valueInput = <TextInput\n                type=\"text\"\n                aria-label=\"value\"\n                isDisabled\n            />;\n        } else {\n            valueInput = <TextInput\n                value={ factValue }\n                type=\"text\"\n                placeholder=\"Value\"\n                onChange={ this.handleNewValue }\n                isValid={ factValue !== '' && factValue !== undefined ? true : false }\n                aria-label=\"value\"\n            />;\n        }\n\n        valueInputBody = <div className=\"fact-value\">\n            Value:\n            <br></br>\n            { valueInput }\n        </div>;\n\n        return valueInputBody;\n\n    }\n\n    renderModalBody() {\n        let modalBody;\n\n        modalBody = <React.Fragment>\n            { this.renderCategoryCheckbox() }\n            { this.renderFactInput() }\n            <br></br>\n            { this.renderValueInput() }\n        </React.Fragment>;\n\n        return modalBody;\n    }\n\n    render() {\n        const { factModalOpened } = this.props;\n\n        return (\n            <Modal\n                title=\"Fact add/edit\"\n                isOpen={ factModalOpened }\n                onClose={ this.cancelFact }\n                width=\"auto\"\n                actions={ [\n                    <Button\n                        key=\"confirm\"\n                        variant=\"primary\"\n                        onClick={ this.confirmModal }>\n                        Save\n                    </Button>,\n                    <Button\n                        key=\"cancel\"\n                        variant=\"primary\"\n                        onClick={ this.cancelFact }>\n                        Cancel\n                    </Button>\n                ] }\n            >\n                { this.renderModalBody() }\n            </Modal>\n        );\n    };\n}\n\nFactModal.propTypes = {\n    toggleFactModal: PropTypes.func,\n    factModalOpened: PropTypes.bool,\n    factName: PropTypes.string,\n    factValue: PropTypes.string,\n    factData: PropTypes.obj,\n    baselineData: PropTypes.obj,\n    patchBaseline: PropTypes.func\n};\n\nfunction mapStateToProps(state) {\n    return {\n        factModalOpened: state.factModalState.factModalOpened,\n        factName: state.factModalState.factName,\n        factValue: state.factModalState.factValue,\n        factData: state.factModalState.factData,\n        baselineData: state.baselinesTableState.baselineData\n    };\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        toggleFactModal: () => dispatch(factModalActions.toggleFactModal()),\n        patchBaseline: (baselineId, newBaselineBody) => dispatch(baselinesTableActions.patchBaseline(baselineId, newBaselineBody))\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FactModal);\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Button } from '@patternfly/react-core';\nimport { Skeleton, SkeletonSize } from '@redhat-cloud-services/frontend-components';\nimport { AngleDownIcon, AngleRightIcon } from '@patternfly/react-icons';\n\nimport EditBaselineToolbar from './EditBaselineToolbar/EditBaselineToolbar';\nimport FactModal from './FactModal/FactModal';\nimport { baselinesPageActions } from '../redux';\nimport { baselinesTableActions } from '../../BaselinesTable/redux';\nimport editBaselineHelpers from './helpers';\n\nclass EditBaseline extends Component {\n    constructor(props) {\n        super(props);\n    }\n\n    renderHeaderRow() {\n        return (\n            <tr>\n                <th className=\"edit-baseline-header\"><div>Fact</div></th>\n                <th className=\"edit-baseline-header\"><div>Value</div></th>\n                <th></th>\n            </tr>\n        );\n    }\n\n    renderLoadingRows() {\n        let rows = [];\n        let rowData = [];\n\n        for (let i = 0; i < 3; i += 1) {\n            rowData.push(<td><Skeleton size={ SkeletonSize.md } /></td>);\n        }\n\n        for (let i = 0; i < 10; i += 1) {\n            rows.push(<tr>{ rowData }</tr>);\n        }\n\n        return rows;\n    }\n\n    renderExpandableRowButton(factName) {\n        const { expandedRows } = this.props;\n        let expandIcon;\n\n        if (expandedRows.includes(factName)) {\n            expandIcon = <AngleDownIcon className=\"pointer active-blue\" onClick={ () => this.props.expandRow(factName) } />;\n        } else {\n            expandIcon = <AngleRightIcon className=\"pointer\" onClick={ () => this.props.expandRow(factName) } />;\n        }\n\n        return expandIcon;\n    }\n\n    renderRowData(fact) {\n        const { expandedRows } = this.props;\n        let row = [];\n        let rows = [];\n\n        if (fact.values) {\n            row.push(<td className={ expandedRows.includes(fact.name) ? 'nested-fact' : '' }>\n                { this.renderExpandableRowButton(fact.name) } { fact.name }</td>);\n            row.push(<td></td>);\n            row.push(editBaselineHelpers.renderKebab(fact.name, '', fact));\n            rows.push(<tr>{ row }</tr>);\n\n            if (expandedRows.includes(fact.name)) {\n                fact.values.forEach(function(subFact) {\n                    row = [];\n                    row.push(<td className=\"nested-fact\">\n                        <p className=\"child-row\">{ subFact.name }</p>\n                    </td>);\n                    row.push(<td>{ subFact.value }</td>);\n                    row.push(editBaselineHelpers.renderKebab(subFact.name, subFact.value, fact));\n                    rows.push(<tr>{ row }</tr>);\n                });\n            }\n        } else {\n            row.push(<td>{ fact.name }</td>);\n            row.push(<td>{ fact.value }</td>);\n            row.push(editBaselineHelpers.renderKebab(fact.name, fact.value, fact));\n            rows.push(<tr>{ row }</tr>);\n        }\n\n        return rows;\n    }\n\n    renderRows() {\n        const { baselineData } = this.props;\n        /*eslint-disable camelcase*/\n        let facts = baselineData.baseline_facts;\n        /*eslint-enable camelcase*/\n        let rows = [];\n        let rowData = [];\n\n        if (facts !== undefined) {\n            for (let i = 0; i < facts.length; i += 1) {\n                rowData = this.renderRowData(facts[i]);\n                rows.push(rowData);\n            }\n        }\n\n        return rows;\n    }\n\n    renderTable() {\n        const { baselineDataLoading } = this.props;\n\n        return (\n            <table className=\"pf-c-table ins-c-table pf-m-compact ins-entity-table drift-table\">\n                <thead>\n                    { this.renderHeaderRow() }\n                </thead>\n                <tbody>\n                    { baselineDataLoading\n                        ? this.renderLoadingRows()\n                        : this.renderRows()\n                    }\n                </tbody>\n            </table>\n        );\n    }\n\n    render() {\n        const { factModalOpened } = this.props;\n\n        return (\n            <React.Fragment>\n                { factModalOpened\n                    ? <FactModal />\n                    : null\n                }\n                <EditBaselineToolbar />\n                { this.renderTable() }\n                <Button\n                    className=\"button-margin margin-right\"\n                    style={ { float: 'right' } }\n                    variant='primary'\n                    onClick={ this.finishBaselineEdit }>\n                    Finish\n                </Button>\n            </React.Fragment>\n        );\n    }\n}\n\nEditBaseline.propTypes = {\n    toggleCreateBaseline: PropTypes.func,\n    clearBaselineData: PropTypes.func,\n    baselineUUID: PropTypes.string,\n    baselineData: PropTypes.object,\n    baselineDataLoading: PropTypes.bool,\n    patchBaseline: PropTypes.func,\n    fetchBaselineData: PropTypes.func,\n    factModalOpened: PropTypes.bool,\n    editBaselineTableData: PropTypes.array,\n    expandRow: PropTypes.func,\n    expandedRows: PropTypes.array\n};\n\nfunction mapStateToProps(state) {\n    return {\n        baselineUUID: state.baselinesTableState.baselineUUID,\n        baselineData: state.baselinesTableState.baselineData,\n        baselineDataLoading: state.baselinesTableState.baselineDataLoading,\n        factModalOpened: state.factModalState.factModalOpened,\n        editBaselineTableData: state.baselinesTableState.editBaselineTableData,\n        expandedRows: state.baselinesTableState.expandedRows\n    };\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        toggleCreateBaseline: () => dispatch(baselinesPageActions.toggleCreateBaseline()),\n        clearBaselineData: () => dispatch(baselinesTableActions.clearBaselineData()),\n        patchBaseline: (baselineId, newBaselineBody) => dispatch(baselinesTableActions.patchBaseline(baselineId, newBaselineBody)),\n        expandRow: (factName) => dispatch(baselinesTableActions.expandRow(factName))\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EditBaseline);\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport debounce from 'lodash/debounce';\n\nimport { Main, PageHeader, PageHeaderTitle } from '@redhat-cloud-services/frontend-components';\nimport { Card, CardBody, Toolbar, ToolbarGroup, ToolbarItem } from '@patternfly/react-core';\nimport { SimpleTableFilter } from '@redhat-cloud-services/frontend-components';\nimport { AddCircleOIcon } from '@patternfly/react-icons';\nimport { EmptyState, EmptyStateBody, EmptyStateIcon, Title } from '@patternfly/react-core';\n\nimport BaselinesTable from '../BaselinesTable/BaselinesTable';\nimport CreateBaselineButton from './CreateBaselineButton/CreateBaselineButton';\nimport CreateBaseline from './CreateBaseline/CreateBaseline';\nimport BaselinesKebab from './BaselinesKebab/BaselinesKebab';\nimport EditBaseline from './EditBaseline/EditBaseline';\nimport { baselinesTableActions } from '../BaselinesTable/redux';\n\nclass BaselinesPage extends Component {\n    constructor(props) {\n        super(props);\n        this.state = { search: false };\n        this.handleSearch = this.handleSearch.bind(this);\n    }\n\n    async componentDidMount() {\n        await window.insights.chrome.auth.getUser();\n        const { fetchBaselines } = this.props;\n\n        fetchBaselines();\n    }\n\n    handleSearch = debounce(function(search) {\n        this.setState({ search: true });\n        this.props.fetchBaselines(search);\n    }, 250)\n\n    renderToolbar() {\n        return (\n            <Toolbar className=\"drift-toolbar\">\n                <ToolbarGroup>\n                    <ToolbarItem>\n                        <SimpleTableFilter buttonTitle={ null }\n                            onFilterChange={ this.handleSearch }\n                            placeholder=\"Search by name\"\n                        />\n                    </ToolbarItem>\n                </ToolbarGroup>\n                <ToolbarGroup>\n                    <ToolbarItem>\n                        <CreateBaselineButton />\n                    </ToolbarItem>\n                    <ToolbarItem>\n                        <BaselinesKebab exportType='baseline list'/>\n                    </ToolbarItem>\n                </ToolbarGroup>\n            </Toolbar>\n        );\n    }\n\n    renderEmptyState() {\n        return (\n            <center>\n                <EmptyState>\n                    <EmptyStateIcon icon={ AddCircleOIcon } />\n                    <br></br>\n                    <Title size=\"lg\">No baselines</Title>\n                    <EmptyStateBody>\n                        You currently have no baselines displayed.\n                        <br/>\n                        Please create a baseline to use in your System Comparison analysis.\n                    </EmptyStateBody>\n                    <CreateBaselineButton />\n                </EmptyState>\n            </center>\n        );\n    }\n\n    renderTable() {\n        const { baselineListLoading } = this.props;\n\n        return (\n            <CardBody>\n                { this.renderToolbar() }\n                <div>\n                    <BaselinesTable baselineListLoading={ baselineListLoading }/>\n                </div>\n            </CardBody>\n        );\n    }\n\n    render() {\n        const { creatingNewBaseline, baselineUUID, fullBaselineListData, baselineListLoading } = this.props;\n\n        return (\n            <React.Fragment>\n                <PageHeader>\n                    <PageHeaderTitle title='Baselines'/>\n                </PageHeader>\n                <Main>\n                    <Card className='pf-t-light pf-m-opaque-100'>\n                        { creatingNewBaseline\n                            ? <CardBody>\n                                <div>\n                                    <CreateBaseline />\n                                </div>\n                            </CardBody>\n                            : null\n                        }\n                        { baselineUUID !== '' ?\n                            <CardBody>\n                                <div>\n                                    <EditBaseline />\n                                </div>\n                            </CardBody>\n                            : null\n                        }\n                        { (!creatingNewBaseline && baselineUUID === '')\n                            ? (fullBaselineListData.length === 0 && baselineListLoading === false)\n                                ? this.renderEmptyState() : this.renderTable()\n                            : null\n                        }\n                    </Card>\n                </Main>\n            </React.Fragment>\n        );\n    }\n}\n\nBaselinesPage.propTypes = {\n    baselineListLoading: PropTypes.bool,\n    creatingNewBaseline: PropTypes.bool,\n    baselineUUID: PropTypes.string,\n    fullBaselineListData: PropTypes.array,\n    fetchBaselines: PropTypes.func\n};\n\nfunction mapStateToProps(state) {\n    return {\n        baselineListLoading: state.baselinesTableState.baselineListLoading,\n        creatingNewBaseline: state.baselinesPageState.creatingNewBaseline,\n        baselineUUID: state.baselinesTableState.baselineUUID,\n        fullBaselineListData: state.baselinesTableState.fullBaselineListData\n    };\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        fetchBaselines: ((search) => dispatch(baselinesTableActions.fetchBaselines(search)))\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(BaselinesPage);\n"],"sourceRoot":""}